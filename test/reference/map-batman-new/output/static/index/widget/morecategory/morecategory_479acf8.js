define("index:widget/morecategory/morecategory.js",function(e,t,n){MY_GEO="我的位置";var r=e("common:widget/geolocation/location.js"),i=e("common:static/js/util.js"),a=e("common:widget/url/url.js");n.exports={init:function(){this.render(),this.bind(),this.initSize()},render:function(){this.parentele=$(".categoryparent"),this.morecategory=$("#more-category"),this.childele=$(".sublist li")},bind:function(){var e=this;e.parentele.on("click",$.proxy(e._redirect,this)),e._setCenterName(),e.childele.on("click",$.proxy(e._redirect,this))},_redirect:function(e){var t=this.getUrl($(e.target).text());a.update(t,{queryReplace:!0,pageStateReplace:!0})},_handleClickEvent:function(e){var t=this;e.target,t.toggleClickedLiIcon(e)},_setCenterName:function(){var e=a.get(),t=e.pageState||{},n=e.query||{},i=(n.wd||"").split("     ");return"更多"===i[1]?(this.centerName=i[0],this.centerName):t.center_name?decodeURIComponent(t.center_name):r.hasExactPoi()?MY_GEO:r.getCity()},toggleClickedLiIcon:function(e){var t=this,n=$(e.target).parent();childli=n.next(".rl_sub_list"),"none"==childli.css("display")?(n.find("em").removeClass("rl_opt_close"),n.find("em").addClass("rl_opt_open"),$(".rl_sub_list").hide(),childli.show()):(n.find("em").removeClass("rl_opt_open"),n.find("em").addClass("rl_opt_close"),childli.hide()),t.currentLi=t.getCurrentLi(e.target),t._scrollToCurrentCategory()},_scrollToCurrentCategory:function(){var e=this,t=$(e.currentLi).offset();window.scroll(0,t.top)},getCurrentLi:function(e){var t=e;if("LI"!==t.nodeName)for(;null!=e.parentNode;){if("LI"===e.parentNode.nodeName){t=e.parentNode;break}e=e.parentNode}return t},getUrl:function(e){var t={module:"search",action:"search",query:{qt:"s",wd:this.centerName?e+" "+this.centerName:e,searchFlag:"more_cate",c:r.getCityCode()||1},pageState:{}};return t=this.setCenterPoi(t),this.centerName&&(delete t.query.nb_x,delete t.query.nb_y,delete t.query.center_rank,delete t.pageState.center_name),t},setCenterPoi:function(e){var t=e||{};t.query=t.query||{},t.pageState=t.pageState||{};var n=a.get(),i=n.pageState||{},o=n.query||{};return i&&"searchnearby"==i.type||i&&"searchnearby"==i.from?(t.query.center_rank=1,t.query.nb_x=o.nb_x,t.query.nb_y=o.nb_y,t.pageState.center_name=i.center_name,t):(r.hasExactPoi()&&(t.query.center_rank=1,t.query.nb_x=r.getPointX(),t.query.nb_y=r.getPointY(),t.pageState.center_name=r.isUserInput()?r.getAddress():"我的位置"),t)},initSize:function(){i.isAndroid()&&($("#cateinfo-canyin .back-icon").css("margin-top","43px"),$("#cateinfo-hotel .back-icon").css("margin-top","97px"),$("#cateinfo-ent .back-icon").css("margin-top","45px"),$("#cateinfo-trf .back-icon").css("margin-top","44px"),$("#cateinfo-service .back-icon").css("margin-top","45px"))}}});