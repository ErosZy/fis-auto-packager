var TaxiBigPipe=function(){function ajax(e,t,a){var n=new(window.XMLHttpRequest||ActiveXObject)("Microsoft.XMLHTTP");n.onreadystatechange=function(){4==this.readyState&&t(this.responseText)},n.open(a?"POST":"GET",e+"&t="+~~(1e6*Math.random()),!0),a&&n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(a)}function renderPagelet(e,t,a){if(!(e.id in a)){a[e.id]=!0,e.parent_id&&renderPagelet(t[e.parent_id],t,a);var n=document.getElementById(e.id),r=idMaps[e.id];r&&r.html_id&&(n=document.getElementById(r.html_id)),n||(n=document.createElement("div"),n.id=e.id,document.body.appendChild(n)),n.innerHTML=e.html;for(var i=n.getElementsByTagName("script"),o=i.length-1;o>=0;o--)node=i[o],text=node.text||node.textContent||node.innerHTML||"",window.eval.call(window,text)}}function render(e){var t,a=e.length,n={},r={};for(t=0;a>t;t++){var i=e[t];n[i.id]=i}for(t=0;a>t;t++)renderPagelet(e[t],n,r)}function process(e){function t(){if(a.style){var t=document.createElement("style");t.innerHTML=a.style,document.getElementsByTagName("head")[0].appendChild(t)}render(e.pagelets),a.js?LazyLoad.js(a.js,function(){a.script&&window.eval(a.script)}):a.script&&window.eval(a.script)}var a=e.resource_map;a.async&&require.resourceMap(a.async),a.css?LazyLoad.css(a.css,t):t()}function asyncLoad(arg,param,cb){arg instanceof Array||(arg=[arg]);for(var obj,arr=[],i=arg.length-1;i>=0;i--){if(obj=arg[i],!obj.id)throw new Error("missing pagelet id");idMaps[obj.id]=obj,arr.push("pagelets[]="+obj.id)}var url=location.href.split("#")[0]+"&"+arr.join("&")+"&force_mode=1"+"&"+param;ajax(url,function(res){var data=window.JSON?JSON.parse(res):eval("("+res+")");cb&&"[object Function]"===Object.prototype.toString.call(cb)&&cb(),process(data)})}var idMaps={};return{asyncLoad:asyncLoad}}();
;LazyLoad=function(e){function t(t,s){var n,c=e.createElement(t);for(n in s)s.hasOwnProperty(n)&&c.setAttribute(n,s[n]);return c}function s(e){var t,s,n=i[e];n&&(t=n.callback,s=n.urls,s.shift(),u=0,s.length||(t&&t.call(n.context,n.obj),i[e]=null,f[e].length&&c(e)))}function n(){var t=navigator.userAgent;o={async:e.createElement("script").async===!0},(o.webkit=/AppleWebKit\//.test(t))||(o.ie=/MSIE/.test(t))||(o.opera=/Opera/.test(t))||(o.gecko=/Gecko\//.test(t))||(o.unknown=!0)}function c(c,u,h,g,p){var y,d,k,b,m,v,j=function(){s(c)},w="css"===c,A=[];if(o||n(),u)if(u="string"==typeof u?[u]:u.concat(),w||o.async||o.gecko||o.opera)f[c].push({urls:u,callback:h,obj:g,context:p});else for(y=0,d=u.length;d>y;++y)f[c].push({urls:[u[y]],callback:y===d-1?h:null,obj:g,context:p});if(!i[c]&&(b=i[c]=f[c].shift())){for(l||(l=e.head||e.getElementsByTagName("head")[0]),m=b.urls,y=0,d=m.length;d>y;++y)v=m[y],w?k=o.gecko?t("style"):t("link",{href:v,rel:"stylesheet"}):(k=t("script",{src:v}),k.async=!1),k.className="lazyload",k.setAttribute("charset","utf-8"),o.ie&&!w?k.onreadystatechange=function(){/loaded|complete/.test(k.readyState)&&(k.onreadystatechange=null,j())}:w&&(o.gecko||o.webkit)?o.webkit?(b.urls[y]=k.href,a()):(k.innerHTML='@import "'+v+'";',r(k)):k.onload=k.onerror=j,A.push(k);for(y=0,d=A.length;d>y;++y)l.appendChild(A[y])}}function r(e){var t;try{t=!!e.sheet.cssRules}catch(n){return u+=1,200>u?setTimeout(function(){r(e)},50):t&&s("css"),void 0}s("css")}function a(){var e,t=i.css;if(t){for(e=h.length;--e>=0;)if(h[e].href===t.urls[0]){s("css");break}u+=1,t&&(200>u?setTimeout(a,50):s("css"))}}var o,l,i={},u=0,f={css:[],js:[]},h=e.styleSheets;return{css:function(e,t,s,n){c("css",e,t,s,n)},js:function(e,t,s,n){c("js",e,t,s,n)}}}(this.document);
;define("taxi:widget/common/popup/popup.js",function(t,i,e){e.exports={_defaultOptions:{autoCloseTime:2e3,isTouchHide:!1},_$el:null,_autoCloseTimeout:null,_create:function(t){var i,e;t.layer&&(e=$("<div/>").addClass("taxi-widget-popup-layer").appendTo(document.body)),i=$("<div></div>").addClass("taxi-widget-popup").text(t.text||"").hide().appendTo(document.body),this._layout(i),this._$el=i,this._$layer=e},_layout:function(t){var i,e;"none"===t.css("display")&&(e=t.css("visibility"),t.css({visibility:"visibile"}).show()),i=t.offset(),t.css({left:(window.innerWidth-i.width-20)/2,top:(window.innerHeight-i.height)/2,visibility:e})},open:function(t){var i=this;t=this._options=$.extend({},this._defaultOptions,"string"==typeof t?{text:t}:t),this._$el?(this._$el.text(t.text),this._layout(this._$el)):this._create(t),this._$el.show(),t.autoCloseTime&&(clearTimeout(this._autoCloseTimeout),this._autoCloseTimeout=setTimeout($.proxy(this.close,this),t.autoCloseTime)),listener.on("common","sizechange",function(){setTimeout(function(){i.setPos()},1e3)})},close:function(){var t;this._$layer&&(this._$layer.remove(),this._$layer=null),this._$el&&(this._$el.remove(),this._$el=null,$.isFunction(t=this._options.onClose)&&t.call(this),this._autoCloseTimeout=null)},setPos:function(){if(this._$el){var t=this._$el.offset(),i=(window.innerWidth-t.width)/2,e=(window.innerHeight-t.height)/2+window.scrollY;this._$el.css({left:i,top:e})}}}});
;define("taxi:static/js/storage.js",function(e,t,n){"use strict";function i(e){return e.replace(/./,function(e){return e.toUpperCase()})}var r=window.localStorage,a=_APP_HASH.page;t={set:function(e,t){try{return r.setItem("baiduTaxi"+i(a)+i(e),t),0}catch(n){if(n instanceof window.DOMException)return n.code}},get:function(e){return r.getItem("baiduTaxi"+i(a)+i(e))},remove:function(e){r.removeItem("baiduTaxi"+i(a)+i(e))},clear:function(){r.clear()}},n.exports=t});
;define("taxi:widget/common/addprice/addprice.js",function(e,t,i){"use strict";var t={create:function(e){var t,i,n,a,c,d=$(".taxi-widget-addprice"),o=d.find(".wrapper");$.isArray(e)&&(t=document.createDocumentFragment(),$.each(e,function(e,c){i=$("<div/>").addClass("option"),n=$("<label/>").text(c+"元").appendTo(i),a=$("<input/>").attr({type:"radio",name:"add_price"}).val(c).appendTo(i),i.appendTo(t)}),o.append(t)),c=d.find(".option"),c.on("click",$.proxy(this.onOptionClick,this)),this.$el=d},onOptionClick:function(e){this.setValue($(e.currentTarget).find("input[type=radio]").val())},setValue:function(e){e=parseInt(e,10)||0;var t,i,n=this.$el,a=n.find(".option");a.each(function(n,a){i=$(a),t=i.find("input[type=radio]"),e===parseInt(t.val(),10)?(t.attr("checked","checked"),i.addClass("checked")):(t.removeAttr("checked"),i.removeClass("checked"))})},init:function(e,t){this.create(e),this.setValue(t),this.$el.show()}};i.exports=t});
;define("taxi:widget/common/dialog/dialog.js",function(t,i,e){"use strict";var i,n;n={layer:!0},i={create:function(t){var i,e,o,a=this,d=this.$el=$("<div/>").addClass("taxi-widget-dialog").hide(),s=this.$content=$("<div/>").addClass("content").appendTo(d),r=this.$buttonBar=$("<div/>").addClass("button-bar").appendTo(d);return t=this.options=$.extend({},n,t),o=t.content,"string"==typeof o?s.html(o):s.append(o),t&&(e=t.buttons)&&$.each(e,function(t,i){$("<button/>").text(t).on("click",$.proxy(i,a)).appendTo(r)}),t.layer?(i=this.$layer=$("<div/>").addClass("taxi-widget-dialog-layer").hide(),i.append(d).appendTo(document.body)):d.appendTo(document.body),this},close:function(){return this.$el.hide(),this.options.layer&&this.$layer.hide(),this},open:function(){return this.$el.show(),this.options.layer&&this.$layer.show(),this},destroy:function(){return this.$buttonBar.find("button").each(function(t,i){$(i).off("click")}),this}},e.exports=i});
;define("taxi:widget/common/taxirequester/taxirequester.js",function(t,e,o){var i=t("common:widget/stat/stat.js"),a=t("taxi:static/js/storage.js"),s=t("taxi:widget/common/popup/popup.js"),n=t("taxi:widget/common/dialog/dialog.js"),e={request:function(t){var e=this;Boolean(a.get("notShowDialogBeforeSubmit"))===!1?n.create({content:['<div class="text">确定发起打车？</div>','<input type="checkbox" value="1" class="taxi-ui-checkbox" id="not-show-dialog-before-submit" />','<label for="not-show-dialog-before-submit"><span class="icon"></span>下次不再提醒</label>'].join(""),buttons:{"确定":function(){this.$el.find("input").attr("checked")&&a.set("notShowDialogBeforeSubmit",!0),e.submit(t),this.close()},"取消":function(){this.close()}}}).open():this.submit(t)},submit:function(t){s.open({text:"正在发送打车请求...",layer:!0,autoCloseTime:0}),LoadManager.request({data:t,success:function(e){a.set("orderId",e.info.order_id),a.set("orderStartTime",Date.now()),LoadManager.loadPage("waiting",$.extend({},t,e.info)),i.addStat(STAT_CODE.TAXI_USERREQ,{addPrice:t.add_price})},error:function(t){var e="";switch(t.errno){case-121:e="发单太频繁，请稍后再试！";break;case-101:e="请求参数错误！";break;default:e="系统错误！"}s.open({text:e,layer:!0})}})}};o.exports=e});
;define("taxi:widget/home/home.js",function(t,i,n){"use strict";t("common:static/js/gmu/src/widget/suggestion/suggestion.js"),t("common:static/js/gmu/src/widget/suggestion/renderlist.js"),t("common:static/js/gmu/src/widget/suggestion/sendrequest.js");var e=t("common:static/js/util.js"),o=t("taxi:static/js/storage.js"),a=t("common:widget/geolocation/geolocation.js"),s=t("taxi:widget/common/popup/popup.js"),r=t("taxi:widget/common/addprice/addprice.js"),c=t("taxi:widget/common/taxirequester/taxirequester.js"),i={create:function(){var t=this,i=$(".taxi-widget-home"),n=i.find(".btn-submit"),e=i.find(".nearby-car-info"),o=i.find(".add-price"),a=i.find("input[name=route_start]"),s=i.find("input[name=route_end]"),r=i.find(".home"),c=i.find(".input-panel"),u=i.find(".btn-back"),l=i.find(".btn-back-to-form"),d=i.find(".btn-settings"),f=i.find(".btn-confirm"),p=i.find(".home .input-wrapper");document.referrer&&(u.show(),u.on("click",$.proxy(this.onBtnBackClick,this))),n.on("click",$.proxy(this.onBtnSubmitClick,this)),l.on("click",$.proxy(this.onBtnBackToFormClick,this)),f.on("click",$.proxy(this.onBtnConfirmClick,this)),d.on("click",$.proxy(this.onBtnSettingsClick,this)),p.on("click",$.proxy(this.onFormInputClick,this)),listener.on("common.geolocation","success",function(i,n){t.onGeoSuccess(n)}),listener.on("common.geolocation","fail",$.proxy(this.onGeoFail,this)),this.suggestion=new gmu.Suggestion(".poi-input",{source:"http://map.baidu.com/su",cbKey:"callback",listCount:4,appendContanier:".input-panel",historyShare:!1,quickdelete:!1}),this.suggestion.on("select",$.proxy(this.onBtnConfirmClick,this)),this.$el=i,this.$nearbyCarInfo=e,this.$addPrice=o,this.$btnSubmit=n,this.$form=r,this.$inputPanel=c,this.$routeStart=a,this.$routeEnd=s},onBtnSubmitClick:function(){var t=this.verifyInput(),i=e.urlToJSON(this.$el.find("form").serialize());if(!this.geoSuccess)return s.open({text:"定位不成功，不能发起打车请求！",layer:!0}),!1;if(!this.getNearbyCarInfoSuccess)return s.open({text:"获取附近车辆信息失败，请稍后再试！",layer:!0}),!1;if(0>t){switch(t){case-1:LoadManager.loadPage("verify",$.extend({},i,{referrer:"home"}));break;case-2:s.open({text:"请输入起点!",layer:!0});break;case-3:s.open({text:"请输入终点!",layer:!0})}return!1}c.request(e.urlToJSON(this.$el.find("form").serialize()))},onFormInputClick:function(t){var i=$(t.currentTarget).find("input"),n=i.attr("name");this.$form.hide(),this.$inputPanel.show(),this.$inputPanel.attr("data-type",n),this.$inputPanel.find(".poi-input").val(i.val()).focus()},onBtnSettingsClick:function(){var t=o.get("phone");t?LoadManager.loadPage("settings"):LoadManager.loadPage("verify")},onBtnBackToFormClick:function(){this.backToForm()},onBtnConfirmClick:function(){var t=this.$inputPanel.attr("data-type");this.$el.find("input[name="+t+"]").val(this.$inputPanel.find(".poi-input").val()),this.backToForm()},backToForm:function(){this.$inputPanel.find(".poi-input").val(""),this.$inputPanel.hide(),this.$form.show()},onGeoSuccess:function(t){var i,n=parseInt(t.addr.cityCode,10);this.cityList.indexOf(n)>-1?(this.getNearByCarInfo(t.point.x,t.point.y,n),i=t.addr,i=i.address||i.city+i.district+i.street,this.$routeStart.val(i)):s.open({text:"当前城市不支持打车！",layer:!0}),this.geoSuccess=!0},onGeoFail:function(){s.open({text:"定位失败\n请检查定位服务，以便将打车请求发您周边的司机!",layer:!0}),this.geoFail=!0},verifyInput:function(){var t=o.get("phone"),i=this.$routeStart.val(),n=this.$routeEnd.val();return i?n?t?!0:-1:-3:-2},getNearByCarInfo:function(t,i,n){var e=this,a=this.$nearbyCarInfo;LoadManager.request({data:{qt:"nearby",lng:t,lat:i,city_code:n},success:function(s){var c,u=e.$el;a.addClass("loaded").find(".count").text(s.info.taxi_num),s.info.is_add_price&&1===s.info.is_add_price.flag&&(c=s.info.is_add_price.price_list)&&(c=c.split(":"),r.init(c),u.find("[type=input][name=add_price]").remove()),u.find("[name=taxi_num]").val(s.info.taxi_num),u.find("[name=lng]").val(t),u.find("[name=lat]").val(i),u.find("[name=city_code]").val(n),u.find("[name=price_list]").val(c),u.find("[name=phone]").val(o.get("phone")),e.getNearbyCarInfoSuccess=!0},error:function(t){var i="";switch(t.errno){case-105:i="当前城市不支持打车！";break;default:i="系统错误！"}s.open({text:i,layer:!0})}})},getCityList:function(t){var i=this;LoadManager.request({data:{qt:"citylist",city_list:"all"},success:function(n){i.cityList=n.info,t()},error:function(t){var i="";switch(t.errno){case-101:i="参数错误！";break;default:i="系统错误！"}s.open({text:i,layer:!0})}})},onBtnBackClick:function(){history.back()},destroy:function(){},init:function(){this.create(),this.getCityList($.proxy(a.init,a))}};n.exports=i});
;define("taxi:widget/common/radar/radar.js",function(t,i,e){"use strict";var i={create:function(){this.$el=$(".taxi-widget-radar"),this.$inner=this.$el.find(".inner"),this.currentStep=0,this.maxStep=9,this.timeperframe=150,this.$el.css({height:window.innerHeight-110+"px",visibility:"visible"})},start:function(){this.interval=setInterval($.proxy(this.oneMove,this),this.timeperframe)},oneMove:function(){var t=this.$inner,i=t.width();t.css("background-position-y",-(++this.currentStep%this.maxStep*i)+"px")},destroy:function(){clearInterval(this.interval),this.interval=-1},init:function(){this.create(),this.start()}};e.exports=i});
;define("taxi:widget/waiting/waiting.js",function(t,e,i){"use strict";var a=t("taxi:static/js/storage.js"),n=t("common:widget/stat/stat.js"),o=t("taxi:widget/common/radar/radar.js"),e={create:function(){var t=$(".taxi-widget-waiting"),e=t.find(".taxi-info .count"),i=this.options;e.text(i.taxi_num),this.$el=t},countDown:function(){var t,e,i,n=this,o=this.options,s=Math.min(parseInt(o.limit,10),parseInt(o.taxi_num,10)),r=this.$el,d=r.find(".pushed-car .count"),u=r.find(".second"),h=parseInt(a.get("orderStartTime"),10),c=function(){t=parseInt(d.text(),10),e=parseInt(u.text(),10),t=Math.min(t+2,s),e-=1,d.text(t),u.text(e),0>=e?(n.destroy(),LoadManager.loadPage("resubmit",o)):n.timeout.push(setTimeout(c,1e3))};"number"!=typeof h||isNaN(h)||(i=120-Math.ceil((Date.now()-h)/1e3),0>i?(this.destroy(),LoadManager.loadPage("resubmit",o)):u.text(i)),this.timeout.push(setTimeout(c,1e3))},getCarReply:function(){var t,e=this,i=this.options,a=i.order_id;t=setInterval(function(){LoadManager.request({data:{qt:"driverreply",order_id:a},success:function(i){i.info&&(clearInterval(t),t=null,e.destroy(),LoadManager.loadPage("response",i.info),n.addStat(STAT_CODE.TAXI_DRIVERREPLY))}})},5e3),this.interval.push(t)},destroy:function(){var t,e,i=this.interval,a=this.timeout;for(t=0,e=i.length;e>t;t++)clearInterval(i[t]);for(t=0,e=a.length;e>t;t++)clearTimeout(a[t]);o.destroy()},init:function(){var t=this.options=LoadManager.getPageOptions();t||(this.destroy(),LoadManager.loadPage("home")),this.timeout=[],this.interval=[],this.create(),this.countDown(),this.getCarReply()}};i.exports=e});
;define("taxi:widget/resubmit/resubmit.js",function(t,e,i){"use strict";var o=t("common:static/js/util.js"),a=t("taxi:widget/common/popup/popup.js"),r=t("common:widget/stat/stat.js"),n=t("taxi:static/js/storage.js"),d=t("taxi:widget/common/addprice/addprice.js"),s=t("taxi:widget/common/radar/radar.js"),e={create:function(){var t,e=$(".taxi-widget-resubmit"),i=e.find(".btn-resubmit"),o=e.find(".btn-back"),a=e.find("form"),r=e.find(".addprice-wrapper"),n=this.options;n.price_list?(t=n.price_list.split(","),d.init(t),e.find("[type=input][name=add_price]").remove()):r.hide(),e.find("[name=city_code]").val(n.city_code),e.find("[name=order_id]").val(n.order_id),i.on("click",$.proxy(this.onBtnResubmitClick,this)),o.on("click",$.proxy(this.onBtnBackClick,this)),this.$el=e,this.$form=a},onBtnResubmitClick:function(){var t=$.extend({price_list:this.options.price_list,taxi_num:this.options.taxi_num},o.urlToJSON(this.$form.serialize()));a.open({text:"正在提交表单...",layer:!0,autoCloseTime:0}),LoadManager.request({data:$.extend({},t,{qt:"addpricereq"}),success:function(e){n.set("orderId",e.info.order_id),n.set("orderStartTime",Date.now()),LoadManager.loadPage("waiting",$.extend({},t,e.info)),r.addStat(STAT_CODE.TAXI_ADDPRICEREQ)},error:function(t){var e="";switch(t.errno){case-304:e="订单已过期或结束！";break;case-113:e="请求过于频繁，请稍后再试！";break;default:e="系统错误！"}a.open({text:e,layer:!0,onClose:function(){n.remove("orderId"),LoadManager.loadPage("home")}})}})},onBtnBackClick:function(){n.remove("orderId")},destroy:function(){s.destroy()},init:function(){var t=this.options=LoadManager.getPageOptions(),e=n.get("orderId");t&&e||LoadManager.loadPage("home"),this.create()}};i.exports=e});
;define("taxi:widget/response/response.js",function(e,t,o){"use strict";var i=e("taxi:static/js/storage.js"),n=e("common:widget/stat/stat.js"),t={create:function(){var e=this.$el=$(".taxi-widget-response"),t=this.$feedbackdialog=e.find(".feedbackdialog"),o=e.find(".btn-on-car"),i=e.find(".btn-not-come"),n=e.find(".btn-agreement"),a=e.find(".btn-end"),r=this.$dialogLayer=$("<div/>").addClass("taxi-widget-response-feedbackdialog-layer").hide().appendTo(document.body);t.appendTo(r),a.on("click",$.proxy(this.onBtnEndClick,this)),o.on("click",$.proxy(this.onBtnOnCarClick,this)),i.on("click",$.proxy(this.onBtnNotComeClick,this)),n.on("click",$.proxy(this.onBtnAgreementClick,this)),this.$responder=e.find(".responder")},showResponder:function(){var e=this.$responder.html(),t=this.options;e=e.replace(/\$\{([a-z_]+)\}/g,function(e,o){return t[o]}),this.$responder.html(e),this.$responder.show()},openDialog:function(){this.$feedbackdialog.show(),this.$dialogLayer.show()},closeDialog:function(){this.$feedbackdialog.hide(),this.$dialogLayer.hide()},onBtnEndClick:function(){this.openDialog()},onBtnOnCarClick:function(){var e=this;LoadManager.request({data:{qt:"ordercomment",order_id:this.orderId,comment_type:4},complete:function(){e.closeDialog(),i.remove("orderId"),LoadManager.loadPage("home"),n.addStat(STAT_CODE.TAXI_ON_CAR)}})},onBtnNotComeClick:function(){var e=this;LoadManager.request({data:{qt:"ordercomment",order_id:this.orderId,comment_type:5},complete:function(){e.closeDialog(),i.remove("orderId"),LoadManager.loadPage("home"),n.addStat(STAT_CODE.TAXI_NOT_COME)}})},onBtnAgreementClick:function(){var e=this;LoadManager.request({data:{qt:"ordercomment",order_id:this.orderId,comment_type:6},complete:function(){e.closeDialog(),i.remove("orderId"),LoadManager.loadPage("home"),n.addStat(STAT_CODE.TAXI_AGREEMENT)}})},resizeFeedbackdialog:function(){this.$feedbackdialog.css({width:"270px",height:"210px",left:(window.innerWidth-270)/2+"px",top:(window.innerHeight-210)/2+"px"})},getTaxiPos:function(){var e,t=this,o=this.$el,i=o.find(".distance .count"),n=o.find(".rest-time .count");e=setInterval(function(){LoadManager.request({data:{qt:"taxipos",order_id:t.orderId},success:function(t){var o=t.info;i.text(o.distance),n.text(o.rest_time),o.is_arrived&&(clearInterval(e),e=-1)},error:function(){}})},5e3),this.interval=e},destroy:function(){clearInterval(this.interval),this.interval=-1},init:function(){var e=this.options=LoadManager.getPageOptions(),t=i.get("orderId");e&&t||LoadManager.loadPage("home"),this.orderId=t,this.create(),this.showResponder(),this.resizeFeedbackdialog(),this.getTaxiPos()}};o.exports=t});
;define("taxi:widget/verify/verify.js",function(e,t,i){"use strict";var n=e("taxi:static/js/storage.js"),o=e("taxi:widget/common/popup/popup.js"),a=e("common:widget/stat/stat.js"),s=e("taxi:widget/common/taxirequester/taxirequester.js"),t={create:function(){var e=this.$el=$(".taxi-widget-verify"),t=this.$inputPhone=e.find(".input-phone"),i=this.$inputCode=e.find(".input-code"),n=this.$btnGetCode=e.find(".btn-get-code"),o=this.$btnVerifyPhone=e.find(".btn-verify-phone"),a=this.options;n.on("click",$.proxy(this.onBtnGetCodeClick,this)),o.on("click",$.proxy(this.onBtnVerifyPhoneClick,this)),t.on("keyup",$.proxy(this.onInputPhoneKeyup,this)),i.on("keyup",$.proxy(this.onInputCodeKeyup,this)),t.val(a.phone||""),Taxi.validatePhone(t.val())&&n.removeAttr("disabled"),this.$btnGetCode=n,this.$inputPhone=t},onBtnGetCodeClick:function(){var e,t=this,i=this.$btnGetCode,n=this.$inputPhone,a=60,s=i.text(),r=this.$inputPhone.val(),d=function(){i.text(a+"秒"),a--};i.attr("disabled","disabled"),n.attr("disabled","disabled"),LoadManager.request({data:{qt:"sendcode",phone:r},success:function(){LoadManager.setPageOptions("phone",r),d(),e=t.interval=setInterval(function(){0===a?(i.removeAttr("disabled"),n.removeAttr("disabled"),i.text(s),clearInterval(e),e=-1):d()},1e3)},error:function(e){var a="";switch(e.errno){case-201:a="请求太频繁，请60秒后重试！";break;case-101:a="参数错误！";break;default:a="系统错误！"}o.open({text:a,layer:!0,onClose:function(){i.removeAttr("disabled"),n.removeAttr("disabled"),i.text(s),clearInterval(t.interval),t.interval=-1}})}})},onBtnVerifyPhoneClick:function(){var e=this.$inputPhone.val(),t=this.$btnVerifyPhone,i=this.options,r=i.referrer;t.attr("disabled","disabled"),o.open({text:"正在验证手机号...",layer:!0,autoCloseTime:0}),LoadManager.request({data:{qt:"verifycode",phone:e,code:this.$inputCode.val()},success:function(d){if(o.close(),1===d.info.is_pass)switch(n.set("phone",e),delete i.referrer,r){case"home":s.request($.extend({},i,{qt:"userreq",phone:e}));break;case"settings":LoadManager.loadPage("home");break;default:LoadManager.loadPage("home")}else o.open({text:"验证码错误！",layer:!0});t.removeAttr("disabled"),a.addStat(STAT_CODE.TAXI_VERIFYCODE)},error:function(){o.close(),t.removeAttr("disabled")}})},onInputPhoneKeyup:function(){Taxi.validatePhone(this.$inputPhone.val())?this.$btnGetCode.removeAttr("disabled"):this.$btnGetCode.attr("disabled","disabled")},onInputCodeKeyup:function(){Taxi.validatePhone(this.$inputPhone.val())&&Taxi.validateCode(this.$inputCode.val())?this.$btnVerifyPhone.removeAttr("disabled"):this.$btnVerifyPhone.attr("disabled","disabled")},destroy:function(){clearInterval(this.interval),this.interval=-1},init:function(){this.options=LoadManager.getPageOptions(),this.create()}};i.exports=t});
;define("taxi:widget/settings/settings.js",function(t,i,n){"use strict";var e=t("taxi:static/js/storage.js"),i={create:function(){var t=$(".taxi-widget-settings"),i=t.find(".input-phone"),n=t.find(".btn-modify"),o=t.find(".btn-help"),a=t.find(".btn-terms");i.val(e.get("phone")),Taxi.validatePhone(i.val())||n.attr("disabled","disabled"),n.on("click",$.proxy(this.onBtnModifyClick,this)),i.on("keyup",$.proxy(this.onInputPhoneKeyup,this)),o.on("click",$.proxy(this.onArticleButtonClick,this)),a.on("click",$.proxy(this.onArticleButtonClick,this)),this.$el=t,this.$btnModify=n,this.$inputPhone=i},onArticleButtonClick:function(t){var i=t.currentTarget.className.split("-")[1];LoadManager.loadPage("about",{type:i})},onBtnModifyClick:function(){var t=this.$inputPhone.val();LoadManager.loadPage("verify",{phone:t,referrer:"settings"})},onInputPhoneKeyup:function(){Taxi.validatePhone(this.$inputPhone.val())?this.$btnModify.removeAttr("disabled"):this.$btnModify.attr("disabled","disabled")},init:function(){this.create()}};n.exports=i});
;define("taxi:widget/about/about.js",function(t,e,i){"use strict";var o=t("common:widget/stat/stat.js"),a=t("taxi:widget/common/popup/popup.js"),e={create:function(){var t=$(".taxi-widget-about"),e=t.find(".taxi-widget-nav"),i=this.options,a=i&&i.type;e.find(".title").text({help:"打车攻略",terms:"条款与声明"}[a]),t.find("."+a).show(),"help"===a?o.addStat(STAT_CODE.TAXI_HELP):o.addStat(STAT_CODE.TAXI_TERMS)},init:function(){this.options=LoadManager.getPageOptions(),this.options||a.open({text:"系统异常",layer:!0,onClose:function(){LoadManager.loadPage("home")}}),this.create()}};i.exports=e});
;define("taxi:widget/vip/home/home.js",function(t,i,n){"use strict";t("common:static/js/gmu/src/widget/suggestion/suggestion.js"),t("common:static/js/gmu/src/widget/suggestion/renderlist.js"),t("common:static/js/gmu/src/widget/suggestion/sendrequest.js");var e=t("common:static/js/util.js"),o=t("taxi:static/js/storage.js"),a=t("common:widget/geolocation/geolocation.js"),r=t("taxi:widget/common/popup/popup.js"),s=t("taxi:widget/common/addprice/addprice.js"),c=t("common:widget/stat/stat.js"),i={create:function(){var t=this,i=$(".taxi-widget-vip-home"),n=i.find(".btn-submit"),e=i.find(".nearby-car-info"),o=i.find(".add-price"),a=i.find("input[name=route_start]"),r=i.find("input[name=route_end]"),s=i.find("input[name=phone]"),c=i.find(".home"),d=i.find(".input-panel"),u=i.find(".btn-back-to-form"),l=i.find(".btn-confirm"),p=i.find(".home .input-wrapper"),f=i.find(".btn-orderlist"),h=i.find(".btn-register");n.on("click",$.proxy(this.onBtnSubmitClick,this)),u.on("click",$.proxy(this.onBtnBackToFormClick,this)),l.on("click",$.proxy(this.onBtnConfirmClick,this)),f.on("click",$.proxy(this.onBtnOrderlistClick,this)),h.on("click",$.proxy(this.onBtnRegisterClick,this)),p.on("click",$.proxy(this.onFormInputClick,this)),listener.on("common.geolocation","success",function(i,n){t.onGeoSuccess(n)}),listener.on("common.geolocation","fail",$.proxy(this.onGeoFail,this)),this.suggestion=new gmu.Suggestion("#sug-target",{source:"http://map.baidu.com/su",cbKey:"callback",listCount:4,appendContanier:".input-panel",historyShare:!1,quickdelete:!1}),this.suggestion.on("select",$.proxy(this.onBtnConfirmClick,this)),this.$el=i,this.$nearbyCarInfo=e,this.$addPrice=o,this.$btnSubmit=n,this.$form=c,this.$inputPanel=d,this.$routeStart=a,this.$routeEnd=r,this.$phone=s},onBtnSubmitClick:function(){var t,i=this.verifyInput(),n=e.urlToJSON(this.$el.find("form").serialize());if(!this.geoSuccess)return r.open({text:"定位不成功，不能发起打车请求！",layer:!0}),!1;if(!this.getNearbyCarInfoSuccess)return r.open({text:"获取附近车辆信息失败，请稍后再试！",layer:!0}),!1;if(n.phone||(n.phone=n.third_phone),0>i){switch(i){case-1:t="客人电话号码格式错误！";break;case-2:t="请输入起点!";break;case-3:t="请输入终点!"}return r.open({text:t,layer:!0}),!1}this.submit(n)},submit:function(t){r.open({text:"正在发送打车请求...",layer:!0,autoCloseTime:0}),LoadManager.request({data:t,success:function(i){o.set("orderId",i.info.order_id),o.set("orderStartTime",Date.now()),r.open({text:"订单发送成功！",layer:!0}),c.addStat(STAT_CODE.TAXI_USERREQ,{addPrice:t.add_price})},error:function(t){var i="";switch(t.errno){case-121:i="发单太频繁，请稍后再试！";break;case-101:i="请求参数错误！";break;default:i="系统错误！"}r.open({text:i,layer:!0})}})},onFormInputClick:function(t){var i=$(t.currentTarget).find("input"),n=i.attr("name");this.$form.hide(),this.$inputPanel.show(),this.$inputPanel.attr("data-type",n),this.$inputPanel.find(".poi-input").val(i.val()).focus()},onBtnBackToFormClick:function(){this.backToForm()},onBtnConfirmClick:function(){var t=this.$inputPanel.attr("data-type");this.$el.find("input[name="+t+"]").val(this.$inputPanel.find(".poi-input").val()),this.backToForm()},onBtnOrderlistClick:function(){LoadManager.loadPage("vip/orderlist")},onBtnRegisterClick:function(){LoadManager.loadPage("vip/verify",{referrer:"vip/home"})},backToForm:function(){this.$inputPanel.find(".poi-input").val(""),this.$inputPanel.hide(),this.$form.show()},onGeoSuccess:function(t){var i,n=parseInt(t.addr.cityCode,10);this.cityList.indexOf(n)>-1?(this.getNearByCarInfo(t.point.x,t.point.y,n),i=t.addr,i=i.address||i.city+i.district+i.street,this.$routeStart.val(i),o.set("cityCode",n)):r.open({text:"当前城市不支持打车！",layer:!0}),this.geoSuccess=!0},onGeoFail:function(){r.open({text:"定位失败\n请检查定位服务，以便将打车请求发您周边的司机!",layer:!0}),this.geoFail=!0},verifyInput:function(){var t=this.$routeStart.val(),i=this.$routeEnd.val(),n=this.$phone.val();return n&&!Taxi.validatePhone(n)?-1:t?i?!0:-3:-2},getNearByCarInfo:function(t,i,n){var e=this,a=this.$nearbyCarInfo;LoadManager.request({data:{qt:"nearby",lng:t,lat:i,city_code:n},success:function(r){var c,d=e.$el;a.addClass("loaded").find(".count").text(r.info.taxi_num),r.info.is_add_price&&1===r.info.is_add_price.flag&&(c=r.info.is_add_price.price_list)&&(c=c.split(":"),s.init(c),d.find("[type=input][name=add_price]").remove()),d.find("[name=taxi_num]").val(r.info.taxi_num),d.find("[name=lng]").val(t),d.find("[name=lat]").val(i),d.find("[name=city_code]").val(n),d.find("[name=price_list]").val(c),d.find("[name=third_phone]").val(o.get("thirdPhone")),e.getNearbyCarInfoSuccess=!0},error:function(t){var i="";switch(t.errno){case-105:i="当前城市不支持打车！";break;default:i="系统错误！"}r.open({text:i,layer:!0})}})},getCityList:function(t){var i=this;LoadManager.request({data:{qt:"citylist",city_list:"all"},success:function(n){i.cityList=n.info,t()},error:function(t){var i="";switch(t.errno){case-101:i="参数错误！";break;default:i="系统错误！"}r.open({text:i,layer:!0})}})},destroy:function(){},init:function(){this.create(),this.getCityList($.proxy(a.init,a))}};n.exports=i});
;define("taxi:widget/vip/verify/verify.js",function(t,e,i){"use strict";var n=t("taxi:static/js/storage.js"),o=t("taxi:widget/common/popup/popup.js"),a=t("common:widget/stat/stat.js"),e={create:function(){var t=this.$el=$(".taxi-widget-vip-verify"),e=this.$inputPhone=t.find(".input-phone"),i=this.$inputCode=t.find(".input-code"),o=this.$btnGetCode=t.find(".btn-get-code"),a=this.$btnVerifyPhone=t.find(".btn-verify-phone"),s=t.find(".btn-back");o.on("click",$.proxy(this.onBtnGetCodeClick,this)),a.on("click",$.proxy(this.onBtnVerifyPhoneClick,this)),e.on("keyup",$.proxy(this.onInputPhoneKeyup,this)),i.on("keyup",$.proxy(this.onInputCodeKeyup,this)),s.on("click",$.proxy(this.onBtnBackClick,this)),e.val(n.get("thirdPhone")||""),Taxi.validatePhone(e.val())&&o.removeAttr("disabled"),this.options&&this.options.referrer&&s.show(),this.$btnGetCode=o,this.$inputPhone=e},onBtnGetCodeClick:function(){var t,e=this,i=this.$btnGetCode,n=this.$inputPhone,a=60,s=i.text(),r=this.$inputPhone.val(),d=function(){i.text(a+"秒"),a--};i.attr("disabled","disabled"),n.attr("disabled","disabled"),LoadManager.request({data:{qt:"sendcode",phone:r},success:function(){d(),t=e.interval=setInterval(function(){0===a?(i.removeAttr("disabled"),n.removeAttr("disabled"),i.text(s),clearInterval(t),t=-1):d()},1e3)},error:function(t){var a="";switch(t.errno){case-201:a="请求太频繁，请60秒后重试！";break;case-101:a="参数错误！";break;default:a="系统错误！"}o.open({text:a,layer:!0,onClose:function(){i.removeAttr("disabled"),n.removeAttr("disabled"),i.text(s),clearInterval(e.interval),e.interval=-1}})}})},onBtnVerifyPhoneClick:function(){var t=this.$inputPhone.val(),e=this.$btnVerifyPhone;e.attr("disabled","disabled"),o.open({text:"正在验证手机号...",layer:!0,autoCloseTime:0}),LoadManager.request({data:{qt:"verifycode",phone:t,code:this.$inputCode.val()},success:function(i){o.close(),1===i.info.is_pass?(n.set("thirdPhone",t),LoadManager.loadPage("vip/home")):o.open({text:"验证码错误！",layer:!0}),e.removeAttr("disabled"),a.addStat(STAT_CODE.TAXI_VERIFYCODE)},error:function(){o.close(),e.removeAttr("disabled")}})},onInputPhoneKeyup:function(){Taxi.validatePhone(this.$inputPhone.val())?this.$btnGetCode.removeAttr("disabled"):this.$btnGetCode.attr("disabled","disabled")},onInputCodeKeyup:function(){Taxi.validatePhone(this.$inputPhone.val())&&Taxi.validateCode(this.$inputCode.val())?this.$btnVerifyPhone.removeAttr("disabled"):this.$btnVerifyPhone.attr("disabled","disabled")},onBtnBackClick:function(){LoadManager.loadPage(this.options.referrer)},destroy:function(){clearInterval(this.interval),this.interval=-1},init:function(){this.options=LoadManager.getPageOptions(),this.create()}};i.exports=e});
;define("taxi:static/js/template.js",function(){var e=window.baidu=window.baidu||{};e.template=e.template||{},e.template._encodeHTML=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"&#92;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},e.template._encodeEventHTML=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\\\\/g,"\\").replace(/\\\//g,"/").replace(/\\n/g,"\n").replace(/\\r/g,"\r")}});
;define("taxi:widget/vip/orderlist/orderlist.js",function(require,exports,module){require("taxi:static/js/template.js");var listItemTemplate=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="captain">代叫车订单：<span class="count">',"undefined"==typeof info.length?"":baidu.template._encodeHTML(info.length),'</span></div><ul class="list">    ');for(var i=0,len=info.length;len>i;i++){if(_template_fun_array.push('        <li class="list-item">            '),info[i].status>1){_template_fun_array.push('                <div class="driver-info">                    <span class="name">',"undefined"==typeof info[i].driver_name?"":baidu.template._encodeHTML(info[i].driver_name),'</span>                    <span class="carno">',"undefined"==typeof info[i].taxi_no?"":baidu.template._encodeHTML(info[i].taxi_no),'</span>                    <div class="reply-time">                        ');var date=new Date(1e3*info[i].reply_time),month=date.getMonth()+1,day=date.getDate(),hours=date.getHours(),minutes=date.getMinutes(),seconds=date.getSeconds(),doubleReg=/\d{2}/,formatTime;month=doubleReg.test(month)?month:"0"+month,day=doubleReg.test(day)?day:"0"+day,minutes=doubleReg.test(minutes)?minutes:"0"+minutes,seconds=doubleReg.test(seconds)?seconds:"0"+seconds,formatTime=date.getFullYear()+"-"+month+"-"+day+" "+hours+":"+minutes+":"+seconds,_template_fun_array.push("                        ","undefined"==typeof formatTime?"":baidu.template._encodeHTML(formatTime),'                    </div>                </div>                <div class="status">                    已接单                </div>                <div class="phone-bar">                    <a class="client-phone" href="tel:',"undefined"==typeof info[i].phone?"":baidu.template._encodeHTML(info[i].phone),'">                        '),info[i].phone===info[i].third_phone?_template_fun_array.push('                            <span class="title">本人：</span>                        '):_template_fun_array.push('                            <span class="title">客人：</span>                        '),_template_fun_array.push('                        <span class="phone">',"undefined"==typeof info[i].phone?"":baidu.template._encodeHTML(info[i].phone),'</span>                    </a>                    <a class="driver-phone" href="tel:',"undefined"==typeof info[i].phone?"":baidu.template._encodeHTML(info[i].phone),'">                        <span class="title">司机：</span>                        <span class="phone">',"undefined"==typeof info[i].driver_phone?"":baidu.template._encodeHTML(info[i].driver_phone),"</span>                    </a>                </div>            ")}else _template_fun_array.push('                <a class="client-phone" href="tel:',"undefined"==typeof info[i].phone?"":baidu.template._encodeHTML(info[i].phone),'">                    '),info[i].phone===info[i].third_phone?_template_fun_array.push('                        <span class="title">本人：</span>                    '):_template_fun_array.push('                        <span class="title">客人：</span>                    '),_template_fun_array.push('                    <span class="phone">',"undefined"==typeof info[i].phone?"":baidu.template._encodeHTML(info[i].phone),"</span>                </a>                "),1===info[i].status?(_template_fun_array.push("                    "),1===info[i].can_retry?_template_fun_array.push('                        <button class="btn-retry" data-order-id="',"undefined"==typeof info[i].order_id?"":baidu.template._encodeHTML(info[i].order_id),'">重发</button>                    '):_template_fun_array.push('                        <div class="status">                            推送中                        </div>                    '),_template_fun_array.push("                ")):_template_fun_array.push('                    <div class="status">                        已过期                    </div>                '),_template_fun_array.push("            ");_template_fun_array.push("        </li>    ")}_template_fun_array.push("</ul>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],storage=require("taxi:static/js/storage.js"),popup=require("taxi:widget/common/popup/popup.js"),exports={create:function(){var e=$(".taxi-widget-vip-orderlist"),t=e.find(".list-container");t.height(window.innerHeight-50),this.$listContainer=t,t.on("click",$.proxy(this.onListContainerClick,this))},onListContainerClick:function(e){"btn-retry"===e.target.className&&this.resubmit(e.target)},resubmit:function(e){var t;popup.open({text:"正在重新发送打车请求...",layer:!0}),LoadManager.request({data:{qt:"addpricereq",city_code:storage.get("cityCode"),add_price:"0",order_id:e.getAttribute("data-order-id")},success:function(){popup.open({text:"发送成功！",layer:!0}),t=$(e),t.parent().append('<div class="status">推送中</div>'),t.remove()},error:function(e){var t="";switch(e.errno){case-101:t="参数错误！";break;case-304:t="订单已失效，请建立新单发送！";break;default:t="系统错误！"}popup.open({text:t,layer:!0})}})},loadList:function(){var e=this.$listContainer;LoadManager.request({data:{qt:"myorder",third_phone:storage.get("thirdPhone")},success:function(t){e&&e.html("").append(listItemTemplate(t))}})},destroy:function(){clearInterval(this.interval)},init:function(){this.create(),this.loadList(),this.interval=setInterval($.proxy(this.loadList,this),3e4)}};module.exports=exports});
;!function(e,t,a){"use strict";var i=require("taxi:widget/common/popup/popup.js"),r=require("common:static/js/util.js"),s=require("taxi:static/js/storage.js"),o={pageControllerMap:{home:require("taxi:widget/home/home.js"),waiting:require("taxi:widget/waiting/waiting.js"),resubmit:require("taxi:widget/resubmit/resubmit.js"),response:require("taxi:widget/response/response.js"),verify:require("taxi:widget/verify/verify.js"),settings:require("taxi:widget/settings/settings.js"),about:require("taxi:widget/about/about.js"),"vip/home":require("taxi:widget/vip/home/home.js"),"vip/verify":require("taxi:widget/vip/verify/verify.js"),"vip/orderlist":require("taxi:widget/vip/orderlist/orderlist.js")},getPageOptions:function(e){var t=r.urlToJSON(s.get("pageOptions"));return e?t[e]:t},setPageOptions:function(e,t){var a;"string"==typeof e?(a=this.getPageOptions(),a[e]=t,this.setPageOptions(a)):"object"==typeof e&&s.set("pageOptions",r.jsonToQuery(e))},request:function(e){$.ajax({type:"POST",dataType:"json",url:"/mobile/webapp/taxi/api/"+r.jsonToQuery($.extend({},e.data,{api:2,os:"webapp"})),success:function(t){t&&0===t.errno?e.success&&$.isFunction(e.success)&&e.success(t):e.error&&$.isFunction(e.error)&&(t?e.error(t):i.open({text:"网络数据异常！"}))},error:function(t){$.isFunction(e.error)&&t&&t.errno>0&&e.error()},complete:e.complete})},loadPage:function(e,a){var o,n,g,u=this,p=$("#wrapper");e=e||u.getPageState("lastPage")||"home",a&&("object"==typeof a&&(a=r.jsonToQuery(a)),s.set("pageOptions",a)),o="taxi-pagelet-"+this.slash2dash(e),t.asyncLoad({id:o},a,function(){i.close(),$("<div/>").attr({id:o}).appendTo(p.html("")),u.getPageState("lastPage")!==e&&(n=u.getPageState("lastPage"),g=u.pageControllerMap[n],g&&g.destroy&&$.isFunction(g.destroy)&&g.destroy(),u.setPageState("lastPage",e))})},route:function(){var e,t=this;e=s.get("orderId"),e?this.request({data:{qt:"orderstatus",order_id:e},success:function(e){var a=e.info&&e.info.status;switch(a){case-1:t.loadPage("resubmit");break;case 2:t.loadPage("response");break;case 1:t.loadPage("waiting");break;case 3:case-2:case 3:case 4:s.remove("pageState"),t.loadPage("home");break;default:s.remove("pageState"),t.loadPage("home")}t.setPageState("status",a),t.setPageState("existTime",e.info.exist_time)},error:function(){s.remove("pageState"),t.loadPage("home")}}):this.loadPage(this.getPageState("lastPage"))},routeThird:function(){s.get("thirdPhone")?this.loadPage(this.getPageState("lastPage")||"vip/home"):this.loadPage("vip/verify")},getPageState:function(e){var t=r.urlToJSON(s.get("pageState"));return t&&t[e]},setPageState:function(e,t){var a=r.urlToJSON(s.get("pageState"));a[e]=t,s.set("pageState",r.jsonToQuery(a))},removePageState:function(e){this.setPageState(e,a)},slash2dash:function(e){return e.replace("/","-")},init:function(e){return 0!==s.set("baiduTaxiLocalStorageTest",1)?(i.open({text:"检测到您的浏览器不支持缓存，您可能开启了无痕浏览模式，将无法使用本产品功能，请关闭后再试。",layer:!0,autoCloseTime:0}),!1):(i.open({text:"正在加载...",layer:!0,autoCloseTime:0}),s.remove("baiduTaxiLocalStorageTest"),e&&"vip"===e.version?this.routeThird():this.route(),void 0)}};e.LoadManager=o}(window,TaxiBigPipe);
;!function(){"use strict";var e,i=require("common:static/js/util.js");e={resize:function(){var e=$("#main"),i=$("header");e.height(window.innerHeight-i.height())},validatePhone:function(e){return/^1\d{10}$/g.test(e)},validateCode:function(e){return/^\d{4}$/g.test(e)}},"undefined"!=typeof window.onorientationchange?window.addEventListener("orientationchange",e.resize,!1):window.addEventListener("resize",e.resize,!1),i.isAndroid()&&window.addEventListener("resize",e.resize,!1),window.Taxi=e}();
;define("taxi:widget/common/banner/banner.js",function(n,i,t){"use strict";var i={create:function(){var n=this.$el=$(".taxi-widget-banner"),i=n.find(".btn-close");i.on("click",$.proxy(this.onBtnCloseClick,this))},onBtnCloseClick:function(){this.$el.hide()},init:function(){this.create()}};t.exports=i});
;define("taxi:widget/common/nav/nav.js",function(a,n,t){var n={create:function(){var a=$(".taxi-widget-nav"),n=a.find(".btn-back");n.on("click",$.proxy(this.onBtnBackClick,this))},onBtnBackClick:function(a){var n=$(a.currentTarget),t=n.attr("data-back");t?LoadManager.loadPage(t):LoadManager.loadPage("home")},init:function(){this.create()}};t.exports=n});