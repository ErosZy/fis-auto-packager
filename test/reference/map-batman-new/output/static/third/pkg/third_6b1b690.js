define("third:widget/setcity/setcity.js",function(e,t,i){var o=e("common:widget/cookie/cookie.js"),c=e("common:static/js/util.js"),n=(e("common:widget/url/url.js"),"http://"+location.host+"/mobile/webapp/index/index","http://"+location.host+"/mobile/#subway/show/city=",{path:"/mobile/",expires:86400}),r=function(t){var i=e("common:widget/url/url.js"),c=t||{},r=c.cityName,s=c.cityId,a=c.x,d=c.y,l=i.get().query,m=l.refer;if(m){var y=u(m),p=$.extend(y.query,{city:r,code:s});a&&d&&(p.city_x=a,p.city_y=d),o.set("setCityName",r,n),i.update({module:y.module,action:y.action,query:p},{queryReplace:!0})}},u=function(e){if(e){var e=decodeURIComponent(e).slice(1),t=e.split("/"),i=(t[0],t[1],t[2]),o=t[3],n=t[4],r=t[5]||"";return{module:i,action:o,query:c.urlToJSON(n||""),pageState:c.urlToJSON(r||"")}}};i.exports.setAndRedirect=r});
;define("third:widget/allcity/allcity.js",function(t,i,a){{var c=t("third:widget/setcity/setcity.js");"http://"+location.host+"/mobile/webapp/index/index"}a.exports.init=function(){e()};var e=function(){var t=$(".third-widget-allcity");t.on("click",".select-letter span",d),t.on("click",".city-item",n)},d=function(t){var i=$(t.target),a=i.data("href");window.location.replace(a)},n=function(t){var i=$(t.target),a={},e=i.data("cityid"),d=i.data("short-city")?i.data("short-city"):$.trim(i.data("city")),n=i.data("x"),r=i.data("y");a.cityName=d,a.cityId=e,n&&r&&(a.x=n,a.y=r),c.setAndRedirect(a)}});
;define("third:widget/allcity/allcity.min.js",function(t,i,e){{var a=t("third:widget/setcity/setcity.js");"http://"+location.host+"/mobile/webapp/index/index"}e.exports.init=function(){c()};var c=function(){var t=$(".index-widget-allcity");t.on("click",".select-letter span",n),t.on("click",".city-item",d)},n=function(t){var i=$(t.target),e=i.data("href");window.location.replace(e)},d=function(t){var i=$(t.target),e=$.trim(i.data("city")),c=i.data("cityid"),n=i.data("short-city")||"";a.setAndRedirect(e,c,n)}});
;define("third:widget/bizarea/bizarea.js",function(require,exports,module){var util=require("common:static/js/util.js"),searchData=require("common:static/js/searchdata.js"),locator=require("common:widget/geolocation/location.js"),helper=require("index:widget/helper/helper.js");module.exports={hasGetData:!1,curRenderCity:"",init:function(e){this.wrap=$(".index-widget-bizarea"),e?(this.curRenderCity=locator.getCityCode(),this.wrap.show()):1!=locator.getCityCode()&&this._render(),this._bindGeoEvent()},_render:function(){helper.visible(this.wrap,function(){this.render()},this)},_bindGeoEvent:function(){listener.on("common.geolocation","success",this.render,this)},render:function(){if(!this.hasGetData||this.curRenderCity!=locator.getCityCode()&&1!=locator.getCityCode()){this.hasGetData=!0,this.curRenderCity=locator.getCityCode();var tpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';if(eval(_template_varName),_template_fun_array.push(""),data&&data.area&&data.area.length>0){_template_fun_array.push('    <h2>热门商区</h2>    <ul class="clearfix biz-list">            ');for(var i=0,l=data.area.length;l>i;i++){var item=data.area[i];_template_fun_array.push('                <li>                    <a href="/mobile/webapp/index/casuallook/foo=bar/from=business&bd=',"undefined"==typeof item?"":item,"&code=","undefined"==typeof data.code?"":data.code,'" jsaction="jump" user-data="item">',"undefined"==typeof item?"":item,"</a>                </li>            ")}_template_fun_array.push("    </ul>")}_template_fun_array.push(""),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],_this=this,host="/mobile/webapp/index/index/?",param={async:"1",fn:"gethotarea",mmaptype:"simple",cityname:locator.getCity()},requestUrl=host+util.jsonToUrl(param);$.ajax({url:requestUrl,dataType:"jsonp",success:function(e){try{var t=e;t&&t.data&&t.data.area?(_this.wrap.show(),_this.wrap.html(tpl({data:t.data}))):_this.error()}catch(a){_this.error()}},error:function(){_this.error()}})}},error:function(){this.wrap.hide()}}});
;define("third:widget/businesslist/businesslist.js",function(require,exports,module){var url=require("common:widget/url/url.js"),util=require("common:static/js/util.js"),searchData=require("common:static/js/searchdata.js"),_dataCache,_areaList={},cityData,BUSINESS_SPLIT="     ",dataPath="/mobile/?&from=maponline&tn=m01&ie=utf-8&data_version=11252019",saveData=function(e){e&&(addAreaItem(e.area_code,e),2==e.area_type&&(cityData=e),e.sub&&$.each(e.sub,function(e,a){addAreaItem(a.area_code,a)}))},addAreaItem=function(e,a){a&&e&&(_areaList[e]=a)},getAreaItem=function(e){return _areaList[e]},bind=function(){var e=$(".index-widget-bussinesslist");e.on("click",".top-title",toggleList),e.on("click","[jsaction]",eventHandler)},completeSelete=function(e){if(e){var a,t=getAreaItem(e),i=url.get(),s=(i.query||{},i.pageState||{}),n=util.urlToJSON(s.refer_query)||{},l=util.urlToJSON(s.refer_pagestate)||{},r={},o={},d=n.wd;r=$.extend({},r,l,{dist_name:t.area_name,keep_stay:1}),d&&d.indexOf(BUSINESS_SPLIT)>-1&&(d=d.split(BUSINESS_SPLIT)[1]),10==t.area_type?(d=t.area_name+BUSINESS_SPLIT+d,a=cityData.area_code):a=t.area_code,o=$.extend(o,n,{c:a,wd:d,pn:0}),delete o.nb_x,delete o.nb_y,delete o.center_rank,url.update({module:"place",action:"list",query:o,pageState:r})}},listSub=function(e,a){if(e&&a){var t=(a.data("loaded"),"/?qt=sub_area_list&level=1&business_flag=1"),i=a.next();1==a.data("loaded")?i.hasClass("hide")?(i.data("visible","1"),hideOther(),scrollToEle(a)):hideOther():(t+="&areacode="+e,searchData.fetch(t,function(e){var t=e.content;hideOther(),t&&(saveData(t),appendSubList(t,a))},function(){}))}},scrollToEle=function(e){if(e){var a=e.offset().top;window.scrollTo(0,a)}},hideOther=function(){$(".index-widget-bussinesslist .sub_list .sub_list").not("hide").each(function(e,a){1==$(a).data("visible")?$(a).removeClass("hide"):$(a).addClass("hide"),$(a).data("visible","0")})},appendSubList=function(data,ele){var tpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<li class="sub_list"><ul class="sub_wrapper"><li data-areacode = "',"undefined"==typeof area_code?"":area_code,'" jsaction="complete"><h4>全区</h4><span class="rl_opt"><em class="rl_opt_btn rl_opt_close"></em></span>               </li>');for(var i=0,l=sub.length;l>i;i++)_template_fun_array.push('<li data-areacode = "',"undefined"==typeof sub[i].area_code?"":sub[i].area_code,'" jsaction="complete"><h4>',"undefined"==typeof sub[i].area_name?"":sub[i].area_name,'</h4><span class="rl_opt"><em class="rl_opt_btn rl_opt_close"></em></span>               </li>');_template_fun_array.push("</ul></li>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],html=tpl(data);$(html).insertAfter(ele),ele.data("loaded","1"),ele.data("visible","1"),scrollToEle(ele)},switchToList=function(e){var a,t,i,s,n=this;a=n.get("pagestate"),t=util.getReqParam(a.refer_query)||{},s=util.getReqParam(a.refer_pagestate)||{},s=$.extend(s,{dist_name:e.isBusiness?"":e.name,keep_stay:1});var l=t.wd.split(mapConst.BUSINESS_SPLIT);l=l[1]?l[1]:t.wd,i={wd:e.isBusiness?e.name+"     "+l:l,c:e.isBusiness?e.cityCode:e.subCode,pn:0},$.extend(t,i),app.updateHash({module:"place",action:"list",query:t,pageState:s},{trigger:!0,queryReplace:!0,pageStateReplace:!0})},toggleList=function(){var e=$(this);e.next().toggleClass("hide")},eventHandler=function(){var e=$(this),a=e.data("areacode"),t=e.attr("jsaction"),i={complete:completeSelete,listsub:listSub},s=i[t];$.isFunction(s)&&s(a,e)};module.exports.init=function(e){saveData(e),bind()}});
;define("third:widget/bussinesslist/bussinesslist.js",function(){});
;define("third:widget/cateinfo/cateinfo.js",function(require,exports,module){var util=require("common:static/js/util.js"),url=require("common:widget/url/url.js"),helper=require("index:widget/helper/helper.js"),stat=require("common:widget/stat/stat.js");module.exports={init:function(){this.bind()},bind:function(){var e=this;$(".index-widget-cateinfo [jsaction]").on("click",function(t){var a=$(t.currentTarget);e.search(a.attr("userdata"))})},search:function(userdata){eval("var hash = "+userdata),stat.addCookieStat(STAT_CODE.STAT_CATEINFO_CLICK,{cate:hash.cate,name:hash.wd}),url.update(helper.getHash(hash))}}});
;define("third:widget/city/city.js",function(i,t,n){var e=i("common:widget/url/url.js"),c={init:function(){this.bindEvent()},bindEvent:function(){$(".change-city").on("click",$.proxy(this.changeCity,this))},changeCity:function(){var i,t,n=window.location.pathname;return"third"===window._APP_HASH.module&&"traffic"===window._APP_HASH.action?(i="third",t="settrafficcity"):(i="third",t="changecity"),e.update({module:i,action:t,query:{refer:encodeURIComponent(n)}},{queryReplace:!0}),!1}};n.exports=c});
;define("third:widget/curloc/curloc.js",function(o,c,t){var i=o("common:widget/geolocation/location.js");t.exports.init=function(){listener.on("common.geolocation","success",n,this)};var n=function(){var o=$(".widget-index-curloc .current-city"),c=i.getAddress();o.html(c)}});
;define("third:widget/error/error.js",function(e,t,r){var o="_lastPageUrl",a=function(){$(".back-last-page").on("click",function(){i()})},i=function(){var e=window.localStorage.getItem(o);"string"==typeof e?(window.localStorage.removeItem(o),url.navigate(e,{replace:!0,storageKey:!1})):history.back()};r.exports.init=a});
;define("third:widget/footer/footer.js",function(e,i,t){var o=e("common:widget/pagemgr/pagemgr.js");t.exports={init:function(){this.bind()},bind:function(){var e=this;$("#wrapper").css("overflow","hidden").addClass("bg-white"),o.registerDestory($.proxy(e.destory,this))},unbind:function(){$("#wrapper").css("overflow","auto").removeClass("bg-white")},destory:function(){this.unbind()}}});
;define("third:widget/header/header.js",function(t,i,n){var e=(t("common:widget/quickdelete/quickdelete.js"),t("common:widget/suggestion/suggestion.js"),t("common:widget/search/poisearch.js")),o=t("common:widget/stat/stat.js"),a=$(".common-widget-header"),s=function(){var t=a.find(".sb-wrapper");t.on("click",u),a.find(".se-poi-form").on("submit",r),a.find(".p-btn-submit").on("click",d),p()},u=function(){var t=a.find(".se-wrap");t.toggleClass("hide"),o.addStat(COM_STAT_CODE.HEADER_SEARCH_CLICK)},r=function(t){t.preventDefault(),d()},c=function(){return a.find("input").val()},d=function(){var t=c(),i=a.find("input");return f(i)?(o.addCookieStat(COM_STAT_CODE.HEADER_USER_SEARCH_TOTAL),e.search(t),void 0):!1},f=function(t){return t?/\S+/.test(t.val())?!0:(t.focus(),!1):!1},p=function(){$.ui.quickdelete({container:"#pro_txt_poi",offset:{x:0,y:2}}),$.ui.suggestion({container:"#pro_txt_poi",mask:"#p_se_poi",source:"http://map.baidu.com/su",listCount:6,posAdapt:!1,isSharing:!0,offset:{x:0,y:52},param:$.param({type:"0",newmap:"1",ie:"utf-8"}),onsubmit:function(){var t=this.getValue(),i=a.find("input");i.val(t),t&&d()}})};n.exports.init=function(){s()}});
;define("third:widget/helper/helper.js",function(require,exports,module){var util=require("common:static/js/util.js"),url=require("common:widget/url/url.js"),stat=require("common:widget/stat/stat.js"),searchData=require("common:static/js/searchdata.js"),locator=require("common:widget/geolocation/location.js");module.exports={cates:{cater:{wd:"美食",id:"cater",count:3,data:void 0},hotel:{wd:"快捷酒店",id:"hotel",count:2,data:void 0},bank:{wd:"银行",id:"bank",data:[{name:"工商银行",key:"icbc"},{name:"农业银行",key:"abc"},{name:"建设银行",key:"cbc"},{name:"中国银行",key:"bc"},{name:"ATM",key:"atm"}]}},thumbConfig:{host:"http://map.baidu.com/maps/services/thumbnails",imgWidth:180,imgHeight:135,oneStarW:15},getData:function(t,e,a){if(1==this.getCityCode())return this.cates[t].data=[],e&&e([]),void 0;a=a||{},this.cates[t].data=void 0,a.page&&"hao123"==a.page&&(this.cates.cater.count=6,this.cates.hotel.count=3);var r=this,o=this.cates[t].wd,n=this.getHash({query:{wd:o}}).query;searchData.fetch(util.jsonToQuery(n),function(a){var n=[];a&&a.content&&(n=r._formatData(o,a.content)),r.cates[t].data=n,e&&e(n)},function(){e&&e([])})},getHash:function(t){var e=t.module||"search",a=t.action||"search",r={qt:"s",wd:"",c:this.getCityCode()},o={};t.query?r=$.extend(r,t.query):(r.wd=t.wd||t.word||t.name,r.searchFlag="sort");var n=url.get(),i=n.query,c=n.pageState||{},s=c.from||"",l=decodeURIComponent(c.center_name||locator.getCity());switch("place"==e&&"takeout"==a&&(o.search="takeout",l=locator.hasExactPoi()?locator.isUserInput()?locator.getAddress():"我的位置":locator.getCity()),s){case"searchnearby":r.center_rank=1,r.nb_x=i.nb_x||c.nb_x,r.nb_y=i.nb_y||c.nb_y,o.from="searchnearby",o.type="searchnearby","place"==e&&"takeout"==a&&(l=decodeURIComponent(c.center_name));break;case"business":r.wd=c.bd+"     "+r.wd,"place"==e&&"takeout"==a&&locator.hasExactPoi()&&(r.center_rank=1,r.nb_x=locator.getPointX(),r.nb_y=locator.getPointY());break;default:locator.hasExactPoi()&&(l=locator.isUserInput()?locator.getAddress():"我的位置",r.center_rank=1,r.nb_x=locator.getPointX(),r.nb_y=locator.getPointY())}return o.center_name=l,"今夜特价"===r.wd&&(r.pl_tonight_sale_flag_section=1,r.pl_data_type="hotel"),{module:e,action:a,query:r,pageState:o}},ready:function(){this.cates.cater.data&&this.cates.hotel.data&&listener.trigger("nearpush","dataready")},go:function(evt,key){var target=$(evt.currentTarget);switch(target.attr("jsaction")){case key+"-detail":eval("var data = "+target.attr("userdata"));var uid=data.uid;stat.addCookieStat(STAT_CODE.STAT_NEARPUSH_DETAIL_CLICK,{id:data.id}),url.update({module:"place",action:"detail",query:{qt:"inf",uid:uid,c:this.getCityCode()}},{trigger:!0,queryReplace:!0});break;case key+"-all":eval("var data = "+target.attr("userdata"));var word=data.wd||this.cates[key].wd,hash=this.getHash({module:"search",action:"search",query:{wd:word}});stat.addCookieStat(STAT_CODE.STAT_NEARPUSH_ALL_CLICK,{id:data.id}),url.update({module:hash.module,action:hash.action,query:hash.query,pageState:hash.pageState},{trigger:!0,queryReplace:!0,pageStateReplace:!0})}return!1},getCityCode:function(){var t=url.get(),e=(t.query,t.pageState||{});return e.code&&1!=e.code?e.code:locator.getCityCode()||1},_formatData:function(t,e){var a=this;switch(t){case"美食":return a._formatDataCY(e);case"快捷酒店":return a._formatDataHotel(e)}},_formatDataCY:function(t){for(var e=this,a=this.cates.cater.count,r=[],o=[],n=0,i=t.length;i>n;n++){var c={};c.name=t[n].name,c.uid=t[n].uid;var s=void 0;if(void 0!=t[n].ext&&void 0!=t[n].ext.detail_info&&(s=!0,placeInfo=t[n].ext.detail_info),""!=placeInfo.image&&s){if(c.image=e._getImgSrc(placeInfo.image)||"",""!=placeInfo.groupon&&null!=placeInfo.groupon?c.otherflag='<em class="icon groupon-icon"></em>':""!=placeInfo.premium2&&0!=placeInfo.premium2&&null!=placeInfo.premium2&&(c.otherflag='<em class="icon sale-icon"></em>'),c.star=e._getStar(placeInfo.overall_rating)||"",c.comment=placeInfo.comment_num||"",r.push(c),r.length===a)return r}else o.push(c)}return r=r.concat(o.slice(0,a-r.length))},_formatDataHotel:function(t){for(var e=this,a=this.cates.hotel.count,r=[],o=[],n=0,i=t.length;i>n;n++){var c={};c.name=t[n].name,c.uid=t[n].uid,c.addr=t[n].addr;var s=void 0;if(void 0!=t[n].ext&&void 0!=t[n].ext.detail_info&&(s=!0,placeInfo=t[n].ext.detail_info),c.price=placeInfo.price||"",""!=t[n].image&&placeInfo&&""!=t[n].tel){if(c.image=e._getImgSrc(placeInfo.image)||"",c.star=e._getStar(placeInfo.overall_rating)||"",c.tel=e._getTel(t[n].tel)||{},placeInfo.uid=t[n].uid,c.order=e._getOrder(placeInfo),r.push(c),r.length===a)return r;o.push(c)}}return r=r.concat(o.slice(0,a-r.length))},visible:function(t,e,a){var r=$(t)[0],o=function(){var t=r.getBoundingClientRect().top,o=window.innerHeight;o>=t&&e&&(a?e.call(a):e())};o(),$(window).on("scroll",o)},_getTel:function(t){var e,a;return void 0==t||""==t?{}:(e=t.indexOf(",")>-1?t.split(","):t.split(";"),e=e[0].replace(/\(/gi,"").replace(/\)/gi,"-"),a=util.isAndroid()?'href="javascript:void(0);" data-tel="'+e+'"':'href="tel:'+e+'"',{url:a,num:e})},_getOrder:function(t){var e=t.hotel_ori_info,a=t.ota_url;if(""==e||0==e.length)return!1;for(var r=0,o=e.length,n=e[r];o>r;r++)if("qunar"==n.src&&"可预定酒店"==n.hotel_flag)for(var i=0,c=a.length,s=a[i];c>i;i++)if("qunar"==s.src)return!0},_getStar:function(t){if(t){var e=parseInt(10*t)/10*this.thumbConfig.oneStarW,a='<span class="star-box">                            <span class ="star-scroe" style = "width:#rate#px"></span>                    </span>'.replace("#rate#",e);return a}},_getImgSrc:function(t){if("string"!=typeof t||""==t)return F.uri("/static/img/no_img.png");var e=this.thumbConfig;t.indexOf("&nbsp;&nbsp;&nbsp;")>-1&&(t=$.trim(t.split("&nbsp;&nbsp;&nbsp;")[0])),t=t.replace("(","%28"),t=t.replace(")","%29");var a=e.host+"?width="+e.imgWidth+"&height="+e.imgHeight+"&src="+encodeURIComponent(t);return a}}});
;define("third:widget/helper/maphelper.js",function(t,o,e){"use strict";var i=t("common:widget/map/map.js"),n=(t("common:static/js/mapconst.js"),t("common:widget/geolocation/location.js"),t("common:widget/url/url.js")),c=t("common:widget/popup/popup.js"),s=t("common:static/js/util.js");e.exports={init:function(){i.clearOverlays(),this._centerAndZoom()},_centerAndZoom:function(){var t=this.getCityPoint(),o=i.getMap(),e=this,c=n.get().pageState;o.enableLoadTiles=!0,o.centerAndZoom(t,12),listener.on("common.map","addlazycontrol",function(){c&&"on"===c.traffic&&(s.need2ShowTraffic(e.code)?i.trafficControl.show():(i.trafficControl.hide(),e._showTips()))})},getCityPoint:function(){var t,o=n.get().query,e=window._CURRENT_CITY;return o.city_x&&o.city_y?(this.code=o.code,t=[o.city_x,o.city_y]):1===e.code?(this.code=131,t=[12958160,4825907]):(this.code=e.code,t=this.getPoint(e)),new BMap.Point(t[0],t[1])},_showTips:function(){var t=i.getMap(),o=t.getZoom(),e=n.get().pageState.vt,s=window._APP_HASH;o>9&&("map"==e||/map/i.test(s.page))&&c.open({text:"当前城市暂无实时路况数据"})},getPoint:function(t){return t.geo?t.geo.split(";")[1].split("|")[0].split(","):[12958160,4825907]}}});
;define("third:widget/helper/revert.js",function(e,n,r){r.exports={init:function(){window.eventRecorder&&(eventRecorder.stop(),eventRecorder.play(),window.eventRecorder=null,delete window.eventRecorder)}}});
;define("third:widget/hotcity/hotcity.js",function(t,i,c){var e=t("third:widget/setcity/setcity.js");c.exports.init=function(){d()};var d=function(){var t=$(".third-widget-hotcity");t.on("click",".city-item",a)},a=function(t){var i=$(t.target),c={},d=i.text(),a=i.data("cityid"),n=i.data("x"),y=i.data("y");c.cityName=d,c.cityId=a,n&&y&&(c.x=n,c.y=y),e.setAndRedirect(c)}});
;define("third:widget/locsearch/locsearch.js",function(e,t,o){var a=$(".index-widget-locsearch"),r="输入城市或者其他位置",n=e("common:widget/geolocation/location.js"),i=e("common:widget/url/url.js"),c="_refer_query",l="_refer_pagestate";o.exports.init=function(){u(),s()};var u=function(){var e=$("#search-input"),t=a.find("#search-button"),o=a.find("form");e.on("focus",$.proxy(d,this)),e.on("blur",f),e.on("foucs",d),t.on("click",p),o.on("submit",p)},s=function(){window.localStorage.removeItem(c),window.localStorage.removeItem(l)},d=function(e){var t=$(e.target);t.val()===r&&(t.val(""),t.removeClass("ipt"))},f=function(e){var t=$(e.target);""===$.trim(t.val())&&(t.val(r),t.addClass("ipt"))},g=function(e){var t={qt:"s",wd:$.trim(e),c:n.getCityCode()};return t},p=function(e){var t=$("#search-input"),o=t.val(),a=g(o),r=i.get().pageState||{};window.localStorage.setItem(c,r.refer_query),window.localStorage.setItem(l,r.refer_pagestate),i.update({module:"place",action:"selectpoint",query:a,pageState:{}},{queryReplace:!0,pageStateReplace:!0}),e.preventDefault()}});
;define("third:widget/morecategory/morecategory.js",function(e,t,r){MY_GEO="我的位置";var n=e("common:widget/geolocation/location.js"),a=e("common:widget/url/url.js");r.exports={init:function(){this.render(),this.bind()},render:function(){this.parentele=$(".categoryparent"),this.morecategory=$("#more-category"),this.childele=$(".categorychild h4")},bind:function(){var e=this;e.parentele.on("click",$.proxy(e._handleClickEvent,this)),e._setCenterName(),e.childele.on("click",$.proxy(e._redirect,this))},_redirect:function(e){var t=this.getUrl($(e.target).text()),r="/mobile/webapp/"+t.action+"/"+t.module+"/"+$.param(t.query)+"/"+$.param(t.pageState);location.href=r},_handleClickEvent:function(e){{var t=this;e.target}t.toggleClickedLiIcon(e)},_setCenterName:function(){var e=a.get(),t=e.pageState||{},r=e.query||{},i=(r.wd||"").split("     ");return"更多"===i[1]?(this.centerName=i[0],this.centerName):t.center_name?decodeURIComponent(t.center_name):n.hasExactPoi()?MY_GEO:n.getCity()},toggleClickedLiIcon:function(e){var t=this,r=$(e.target).parent();childli=r.next(".rl_sub_list"),"none"==childli.css("display")?(r.find("em").removeClass("rl_opt_close"),r.find("em").addClass("rl_opt_open"),$(".rl_sub_list").hide(),childli.show()):(r.find("em").removeClass("rl_opt_open"),r.find("em").addClass("rl_opt_close"),childli.hide()),t.currentLi=t.getCurrentLi(e.target),t._scrollToCurrentCategory()},_scrollToCurrentCategory:function(){var e=this,t=$(e.currentLi).offset();window.scroll(0,t.top)},getCurrentLi:function(e){var t=e;if("LI"!==t.nodeName)for(;null!=e.parentNode;){if("LI"===e.parentNode.nodeName){t=e.parentNode;break}e=e.parentNode}return t},getUrl:function(e){var t={module:"search",action:"search",query:{qt:"s",wd:this.centerName?e+" "+this.centerName:e,searchFlag:"more_cate",c:n.getCityCode()||1},pageState:{}};return t=this.setCenterPoi(t),this.centerName&&(delete t.query.nb_x,delete t.query.nb_y,delete t.query.center_rank,delete t.pageState.center_name),t},setCenterPoi:function(e){var t=e||{};t.query=t.query||{},t.pageState=t.pageState||{};var r=a.get(),i=r.pageState||{},o=r.query||{};return i&&"searchnearby"==i.type||i&&"searchnearby"==i.from?(t.query.center_rank=1,t.query.nb_x=o.nb_x,t.query.nb_y=o.nb_y,t.pageState.center_name=i.center_name,t):(n.hasExactPoi()&&(t.query.center_rank=1,t.query.nb_x=n.getPointX(),t.query.nb_y=n.getPointY(),t.pageState.center_name=n.isUserInput()?n.getAddress():"我的位置"),t)}}});
;define("third:widget/moreicons/moreicons.js",function(t,e,o){"use strict";var a=t("common:static/js/util.js"),n=t("common:widget/url/url.js"),i=t("common:widget/stat/stat.js"),c=t("common:widget/geolocation/location.js");o.exports={init:function(){this.bind()},bind:function(){var t=this;$(".more-icons a").on("click",function(){t.search(this,t)})},search:function(t,e){var o=$(t),r=o.data("wd"),d=$("#current-city"),s=d.data("city"),u=d.data("code"),m={wd:r,code:u},l={};if(r&&"团购"!==r&&i.addCookieStat(STAT_CODE.STAT_MORE_ICONS_CLICK,{wd:r}),"团购"===r)return i.addStat(STAT_CODE.STAT_MORE_ICONS_CLICK,{wd:r}),setTimeout(function(){var t;try{if(c.hasExactPoi()){var e=c.getCenterPoi();t="http://mtuan.baidu.com/t/locat?from=map_webapp&x="+e.x+"&y="+e.y+"&to_url="+encodeURIComponent(location.href)}else t="http://mtuan.baidu.com/t/locat?from=map_webapp&to_url="+encodeURIComponent(location.href)}catch(o){t="http://mtuan.baidu.com/t/locat?from=map_webapp&to_url="+encodeURIComponent(location.href)}window.location=t},500),void 0;switch(r){case"更多":l.module="index",l.action="more";break;case"地铁图":var y=a.ifSupportSubway(u);if(y){var p=y.split(",");l.module="subway",l.action="show",l.query={city:p[0]}}else l.module="index",l.action="setsubwaycity";break;case"全景":l.module="index",l.action="sventry";break;case"天气":l.module="third",l.action="weather",l.query={city:s,code:u};break;case"公交":l.module="third",l.action="transit",l.query={city:s,code:u};break;default:l=e.getHash(m)}n.update(l)},getHash:function(t){var e=t.module||"search",o=t.action||"search",a=parseInt(t.code)||131,i={qt:"s",wd:"",c:a},r={};t.query?i=$.extend(i,t.query):(i.wd=t.wd||t.word||t.name,i.searchFlag="sort");var d=n.get(),s=(d.query,d.pageState||{}),u=(s.from||"",decodeURIComponent(s.center_name||c.getCity()));return c._mylocation&&c._mylocation.isExactPoi&&parseInt(c.getMyCityCode())===a&&(u="我的位置",i.center_rank=1,i.nb_x=c.getMyPointX(),i.nb_y=c.getMyPointY()),r.center_name=u,{module:e,action:o,query:i,pageState:r}}}});
;define("third:widget/navebox/navebox.js",function(){});
;define("third:widget/navethumbnail/navethumbnail.js",function(t,e,i){var n=t("common:static/js/util.js"),a=(t("common:widget/geolocation/geolocation.js"),t("common:widget/geolocation/location.js")),o=t("common:static/js/searchdata.js"),s=t("common:widget/stat/stat.js"),r={type:"0,2",level:16,height:101,width:window.innerWidth-22,url:null,host:"http://snap.map.baidu.com/?qt=snap&data="},c=window._CURRENT_CITY,h=c.name;n.showLoading($("#poipic-area")),i.exports={init:function(){this.render(),this.bind()},render:function(){this.thumbImage=$("#mapimg"),this.errorCnt=$(".error-cnt"),this.thumbImageA=$("#right-a"),this.subwayBtn=$("#subwayBtn"),this.cityNameCnt=$("#cityNameCnt"),this.nearbus=$("#nb-bus"),this.nearbusspan=$("#busspan"),this.nearsubway=$("#nb-subway"),this.nearsubwayspan=$("#stationspan"),this.imgcon=$("#route-pic")},bind:function(){var t=this;listener.on("common.geolocation","mylocsuc",function(){t.setLocation()},this),listener.on("common.geolocation","fail",function(){t.thumbImageA.hide(),t.errorCnt.show()},this),listener.on("common","sizechange",function(){t._appReSize()},this),t._trafficsubway()},_trafficsubway:function(){var t=this;if("全国"!=h){t.imgcon.show(),t._setThumbUrl();var e=n.ifSupportSubway(a.getCityCode());if(e){var i=e.split(",");t.subwayBtn.attr("href","/mobile/webapp/subway/show/city="+i[0]+"/ref=index&forcesample=old_sample_1309"),t.cityNameCnt.html(i[1]+"市地铁线路图"),t.subwayBtn.show(),s.addStat(STAT_CODE.STAT_LINEINDEX_SUBWAYBTN_DISPLAY)}else t.subwayBtn.hide()}},_appReSize:function(){var t=this;n.isAndroid()?setTimeout(function(){r.width=window.innerWidth-22},800):r.width=window.innerWidth-22,t._setThumbUrl()},setLocation:function(){var t=this;a.getMyCityCode()==c.code&&t._getNearbyData()},_setThumbUrl:function(){var t=this,e=t._getThumbUrl();t.thumbImage.attr("src",e),n.hideLoading($("#poipic-area"))},_getThumbUrl:function(){r.level=0==r.type?"全国"==a.getCity()?3:a.hasExactPoi()?16:10:10;var t;c?(JSONdata=c.geo,cityPoint=n.geoToPoint(JSONdata),t={x:0,y:0},t.x=cityPoint.lng,t.y=cityPoint.lat):t=a.getCenterPoi();var e={retype:1,src:"webapp",level:r.level,center:t.x+" "+t.y,height:101,width:r.width,coordtype:"M",pictype:r.type};return r.host+JSON.stringify(e)},_getNearbyData:function(){var t=this,e=$.param(t._getQueryByWd("公交站").query),i=$.param(t._getQueryByWd("地铁站").query);o.fetch(e,$.proxy(t._cbGetBusStation,this)),o.fetch(i,$.proxy(t._cbGetSubwayStation,this))},_getQueryByWd:function(t){var e={qt:"s",wd:t,c:a.getMyCityCode()},i={};return e.center_rank=1,e.nb_x=a.getMyPointX(),e.nb_y=a.getMyPointY(),{query:e,pageState:i}},_cbGetBusStation:function(t){var e=this;if(void 0!=t&&0!=t.content.length){var i=t.content[0]||"";e.nearbusspan.text(i.name+"-公交站"),e.nearbusspan.attr("href","/mobile/webapp/place/detail/qt=inf&uid="+i.uid+"&c="+a.getMyCityCode()+"/tab=line"),e.nearbus.show(),s.addStat(STAT_CODE.STAT_LINEINDEX_BUS_DISPLAY)}},_cbGetSubwayStation:function(t){var e=this;if(void 0!=t&&0!=t.content.length){for(var i=void 0,n=0,o=t.content.length;o>n;n++)if(3==t.content[n].poiType){i=t.content[n];break}if(void 0!=i){var r=i||"",c=r.name+"-地铁站";e.nearsubwayspan.text(c),e.nearsubwayspan.attr("href","/mobile/webapp/place/detail/qt=inf&uid="+r.uid+"&c="+a.getMyCityCode()+"/tab=line"),e.nearsubway.show(),s.addStat(STAT_CODE.STAT_LINEINDEX_SUBWAY_DISPLAY)}}}}});
;define("third:widget/nbserachbox/nbserachbox.js",function(e,t,r){MY_GEO="我的位置";var n=e("common:widget/geolocation/location.js"),a=e("common:widget/url/url.js"),i=(e("common:widget/url/url.js").get(),e("common:widget/stat/stat.js"));r.exports={init:function(){this.render(),this.bind()},render:function(){this.searchmorenearby=$("#index-widget-nbserachbox"),this.searchInput=$("#search-input"),this.DEFAULT_VALUE="输入其他分类",this.searchBtn=$("#search-button"),this.searcForm=$("#search-form")},bind:function(){var e=this;e._renderCenterName(),e.searchInput.on("focus",$.proxy(e._clearInput,this)),e.searchInput.on("blur",$.proxy(e._resetInput,this)),e.searcForm.on("submit",$.proxy(e._searchPoint,this)),e.searchBtn.on("click",$.proxy(e._searchPoint,this))},_renderCenterName:function(){var e=this._getCenterName();me=this,me.searchmorenearby.prepend('<p id="search-more-nearby">在 <span class="center-name">'+e+"</span> 的附近找</p>")},_getCenterName:function(){var e=a.get(),t=e.pageState||{},r=e.query||{},i=(r.wd||"").split("     ");return"更多"===i[1]?(this.centerName=i[0],this.centerName):t.center_name?t.center_name:n.hasExactPoi()?MY_GEO:n.getCity()},_clearInput:function(e){var t=this,r=$(e.target);r.val()===t.DEFAULT_VALUE&&(r.val(""),r.removeClass("ipt-default"))},_resetInput:function(e){var t=this,r=$(e.target),n=r.val();""===$.trim(n)&&(r.val(t.DEFAULT_VALUE),r.addClass("ipt-default"))},_searchPoint:function(e){e&&e.stopPropagation&&e.stopPropagation(),e&&e.preventDefault&&e.preventDefault();var t=this,r=$("#search-input"),n=r.val();return r.get(0).blur(),t._checkValueValid(n)?(t.search($.trim(n)),!1):void 0},_checkValueValid:function(e){return""!==$.trim(e)&&$.trim(e)!==this.DEFAULT_VALUE?!0:!1},search:function(e){var t=a.get();"more"==t.action&&i.addStat(STAT_CODE.STAT_MORE_CATEGORY_SEARCH_INPUT);var r=this,n=r._getDirParam($.trim(e));location.href="/mobile/webapp/search/search/"+$.param(n)},_getDirParam:function(e,t){if(e&&"string"==typeof e){t=t||{};var r={qt:"s",wd:this.centerName?e+" "+this.centerName:e,c:n.getCityCode()||1,searchFlag:t.from||""},i=a.get(),s=i.pageState||{};return s.nb_x&&s.nb_x?(r.nb_x=s.nb_x,r.nb_y=s.nb_y,r.center_rank=1,r.center_name=s.center_name):n.hasExactPoi()&&(r.nb_x=n.getPointX(),r.nb_y=n.getPointY(),r.center_rank=1),r.searchFlag="more_cate",r}}}});
;define("third:widget/nearby/nearby.js",function(require,exports,module){var util=require("common:static/js/util.js"),url=require("common:widget/url/url.js"),helper=require("index:widget/helper/helper.js"),stat=require("common:widget/stat/stat.js");module.exports={init:function(e){this.bind(),this.page=e},bind:function(){var e=this;$(".third-nearby [jsaction]").on("click",function(t){var r=$(t.currentTarget);e.search(r.attr("userdata"))})},search:function(userdata){if(eval("var hash = "+userdata),stat.addCookieStat(STAT_CODE.STAT_NEARBY_CLICK,{id:hash.id}),"团购"==hash.wd){var host="http://mtuan.baidu.com/view?z=2&from=map_webapp&to_url=";window.location=host+encodeURIComponent(location.href)}else url.update(helper.getHash(hash))}}});
;define("third:widget/nearpush/bank.js",function(require,exports,module){var util=require("common:static/js/util.js"),url=require("common:widget/url/url.js"),searchData=require("common:static/js/searchdata.js"),locator=require("common:widget/geolocation/location.js"),helper=require("index:widget/helper/helper.js"),id="bank",tpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';if(eval(_template_varName),_template_fun_array.push(""),data&&data.length>0){_template_fun_array.push('    <div class="hd">        <button jsaction="bank-all" userdata="{&#39;wd&#39;:&#39;',"undefined"==typeof wd?"":wd,"&#39;,&#39;id&#39;:&#39;","undefined"==typeof id?"":id,'&#39;}">查看全部</button>        <h2>银行</h2>    </div>    <ul class="list">        ');for(var i=0,l=data.length;l>i;i++)_template_fun_array.push('            <li jsaction="bank-all" userdata="{&#39;wd&#39;:&#39;',"undefined"==typeof data[i].name?"":data[i].name,"&#39;,&#39;id&#39;:&#39;","undefined"==typeof id?"":id,'&#39;}">                <span class="icon ',"undefined"==typeof data[i].key?"":data[i].key,'"></span>                <p>',"undefined"==typeof data[i].name?"":data[i].name,"</p>            </li>        ");_template_fun_array.push("    </ul>")}_template_fun_array.push(""),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0];module.exports={init:function(e){this.pagename=e,this.render(),this.bind()},render:function(){$(".index-widget-bank").html(tpl(helper.cates[id]))},bind:function(){$(".index-widget-bank [jsaction]").on("click",this._go)},_go:function(e){helper.go(e,"bank")}}});
;define("third:widget/nearpush/cater.js",function(require,exports,module){var util=require("common:static/js/util.js"),url=require("common:widget/url/url.js"),stat=require("common:widget/stat/stat.js"),searchData=require("common:static/js/searchdata.js"),locator=require("common:widget/geolocation/location.js"),geolocator=require("common:widget/geolocation/geolocation.js"),helper=require("index:widget/helper/helper.js"),id="cater",tpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';if(eval(_template_varName),_template_fun_array.push(""),data&&data.length>0){_template_fun_array.push('    <div class="hd">        <a href="javascript:void(0);" jsaction="cater-all" userdata="{&#39;wd&#39;:&#39;',"undefined"==typeof word?"":word,"&#39;,&#39;id&#39;:&#39;","undefined"==typeof id?"":id,'&#39;}">            查看全部        </a>        <h2>美食</h2>    </div>    <ul class="list">        ');for(var i=0,l=data.length;3>i;i++)_template_fun_array.push('            <li jsaction="cater-detail" userdata="{&#39;uid&#39;:&#39;',"undefined"==typeof data[i].uid?"":data[i].uid,"&#39;,&#39;id&#39;:&#39;","undefined"==typeof id?"":id,'&#39;}">                <a class="a-img" href="javascript:void(0);">                    <img width="89" height="66" src="',"undefined"==typeof data[i].image?"":data[i].image,'">                    ',"undefined"==typeof data[i].otherflag?"":data[i].otherflag,'                </a>                <dl>                    <dt class="name">',"undefined"==typeof data[i].name?"":data[i].name,'</dt>                    <dd class="rate">',"undefined"==typeof data[i].star?"":data[i].star,'</dd>                    <dd class="cmt">                        <span class="count">',"undefined"==typeof data[i].comment?"":data[i].comment,'</span>                        <span class="tail">条评论</span>                    </dd>                </dl>            </li>        ');if(_template_fun_array.push("    </ul>    "),"hao123"==page){_template_fun_array.push('        <ul class="list">            ');for(var i=3,l=data.length;6>i;i++)_template_fun_array.push('                <li jsaction="cater-detail" userdata="{&#39;uid&#39;:&#39;',"undefined"==typeof data[i].uid?"":data[i].uid,"&#39;,&#39;id&#39;:&#39;","undefined"==typeof id?"":id,'&#39;}">                    <a class="a-img" href="javascript:void(0);">                        <img width="89" height="66" src="',"undefined"==typeof data[i].image?"":data[i].image,'">                        ',"undefined"==typeof data[i].otherflag?"":data[i].otherflag,'                    </a>                    <dl>                        <dt class="name">',"undefined"==typeof data[i].name?"":data[i].name,'</dt>                        <dd class="rate">',"undefined"==typeof data[i].star?"":data[i].star,'</dd>                        <dd class="cmt">                            <span class="count">',"undefined"==typeof data[i].comment?"":data[i].comment,'</span>                            <span class="tail">条评论</span>                        </dd>                    </dl>                </li>            ');_template_fun_array.push("        </ul>    ")}_template_fun_array.push("")}_template_fun_array.push(""),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0];module.exports={hasGetData:!1,firstShow:!1,init:function(a){this.page=a,this.bind()},bind:function(){switch(listener.on("nearpush","dataready",function(){this._render(helper.cates[id].data)},this),this.page){case"business":this._businessAction();break;case"index":this._indexAction();break;default:this._defaultAction()}},_defaultAction:function(){this._bindGeoEvent()},_businessAction:function(){this._fetch()},_indexAction:function(){helper.visible(".index-widget-cater",function(){this.hasGetData||(this._fetch(),this._bindGeoEvent())},this)},_bindGeoEvent:function(){listener.on("common.geolocation","success",this._fetch,this),listener.on("common.geolocation","fail",function(){},this)},_fetch:function(){{var a=this,e=$(".index-widget-cater");$(".index-page-nearby-hd")}1!=locator.getCityCode()&&(e.css("min-height","160px"),util.showLoading(e)),helper.getData(id,function(){helper.ready()},{page:a.page}),this.hasGetData=!0},_render:function(a){var e=this,t=helper.cates[id].wd,i=$(".index-widget-cater"),d=$(".index-page-nearby-hd");a&&a.length>0?(i.html(tpl({data:a,id:id,word:t,page:e.page})),d.show(),e.firstShow||(stat.addStat(STAT_CODE.STAT_NEARPUSH_SHOW),e.firstShow=!0)):(i.css("min-height","0"),"index"==this.page&&d.hide()),util.hideLoading(i),this._bind()},_bind:function(){$(".index-widget-cater [jsaction]").on("click",this.jump)},jump:function(a){helper.go(a,id)}}});
;define("third:widget/nearpush/hotel.js",function(require,exports,module){var util=require("common:static/js/util.js"),url=require("common:widget/url/url.js"),searchData=require("common:static/js/searchdata.js"),locator=require("common:widget/geolocation/location.js"),geolocator=require("common:widget/geolocation/geolocation.js"),helper=require("index:widget/helper/helper.js"),id="hotel",tpl=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';if(eval(_template_varName),_template_fun_array.push(""),data&&data.length>0){_template_fun_array.push('    <div class="hd">        <a href="javascript:void(0);" jsaction="hotel-all" userdata="{&#39;wd&#39;:&#39;',"undefined"==typeof word?"":word,"&#39;,&#39;id&#39;:&#39;","undefined"==typeof id?"":id,'&#39;}">            查看全部        </a>        <h2>酒店</h2>    </div>    <ul class="list">        ');for(var i=0,l=data.length;l>i;i++){_template_fun_array.push("            ");var item=data[i];_template_fun_array.push('            <li jsaction="hotel-detail" userdata="{&#39;uid&#39;:&#39;',"undefined"==typeof item.uid?"":item.uid,"&#39;,&#39;id&#39;:&#39;","undefined"==typeof id?"":id,'&#39;}">                <div class="clearfix">                    <a class="a-img" href="javascript:void(0);">                        <img width="89" height="66" src="',"undefined"==typeof item.image?"":item.image,'">                        ',"undefined"==typeof item.otherflag?"":item.otherflag,'                    </a>                    <dl>                        <dt class="name">',"undefined"==typeof item.name?"":item.name,'</dt>                        <dd class="addr">地址：',"undefined"==typeof item.addr?"":item.addr,'</dd>                        <dd class="cmt">                            <span class="rate">',"undefined"==typeof item.star?"":item.star,'</span>                            <span class="price">                                <span class="tail">人均：</span>                                <span class="count">￥',"undefined"==typeof item.price?"":item.price,'</span>                            </span>                        </dd>                    </dl>                </div>                <div class="bar clearfix">                        '),item.tel.num?_template_fun_array.push('                            <div class="btn tel">                                <a class="a-tel" ',"undefined"==typeof item.tel.url?"":item.tel.url,'>                                    <b class="icon tel"></b>',"undefined"==typeof item.tel.num?"":item.tel.num,"                                </a>                            </div>                            "):_template_fun_array.push('                            <div class="btn tel" style="visibility:hidden">                                <a class="a-tel" href="/">                                    <b class="icon tel"></b>000-00000000                                </a>                            </div>                              '),_template_fun_array.push("                    "),item.order&&_template_fun_array.push('                        <div class="btn order"><a href="javascript:void(0);" jsaction="hotel-detail" userdata="{&#39;uid&#39;:&#39;',"undefined"==typeof item.uid?"":item.uid,'&#39;}">预订</a></div>                    '),_template_fun_array.push("                </div>            </li>        ")}_template_fun_array.push("    </ul>")}_template_fun_array.push(""),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0];module.exports={hasGetData:!1,init:function(e){this.page=e,this.bind()},bind:function(){switch(listener.on("nearpush","dataready",function(){this._render(helper.cates[id].data)},this),this.page){case"business":this._businessAction();break;case"index":this._indexAction();break;default:this._defaultAction()}},_defaultAction:function(){this._bindGeoEvent()},_businessAction:function(){this._fetch()},_indexAction:function(){helper.visible(".index-widget-hotel",function(){this.hasGetData||(this._fetch(),this._bindGeoEvent())},this)},_bindGeoEvent:function(){listener.on("common.geolocation","success",this._fetch,this),listener.on("common.geolocation","fail",function(){},this)},_fetch:function(){var e=this;this.hasGetData=!0,helper.getData(id,function(){helper.ready()},{page:e.page})},_render:function(e){var t=this,a=helper.cates[id].wd;e&&e.length>0&&$(".index-widget-hotel").html(tpl({data:e,id:id,word:a,page:t.page})),this._bind()},_bind:function(){$(".index-widget-hotel [jsaction]").on("click",this.jump),$(".index-widget-hotel .a-tel").on("click",function(e){var t=$(e.currentTarget),a=t.attr("data-tel");t&&a&&util.TelBox.showTb(a),e.stopPropagation()})},jump:function(e){helper.go(e,id)}}});
;define("third:widget/searchbox/searchbox.js",function(t,i,e){t("common:static/js/gmu/src/widget/suggestion/suggestion.js"),t("common:static/js/gmu/src/widget/suggestion/renderlist.js"),t("common:static/js/gmu/src/widget/suggestion/quickdelete.js"),t("common:static/js/gmu/src/widget/suggestion/sendrequest.js");var o=(t("common:static/js/util.js"),t("common:widget/url/url.js")),s=(t("common:widget/geolocation/geolocation.js"),t("common:widget/geolocation/location.js")),n=t("common:widget/search/poisearch.js"),c=t("common:widget/stat/stat.js");e.exports={init:function(){this.render(),this.bind()},render:function(){this._poiSug=new gmu.Suggestion("#se-input-poi",{source:"http://map.baidu.com/su",cbKey:"callback",listCount:6,posAdapt:!1,historyShare:!0,autoClose:!0,appendContanier:"#wrapper",quickdelete:!0}),this._poiSug.$wrapper.offset({left:0,top:104})},bind:function(){$(".se-form").on("submit",$.proxy(this.submit,this)),$(".se-btn").on("click",$.proxy(this.submit,this)),$(".se-input-poi").on("blur",function(){$(".se-city").show()}),$(".se-input-poi").on("focus",function(){$(".se-city").hide()}),listener.on("common.geolocation","success",this.updateMyPos,this),$(".index-widget-searchbox [jsaction]").on("click",$.proxy(this.go,this)),listener.on("common.page","switchstart",function(){$(".ui-suggestion").length&&$(".ui-suggestion").hide()})},go:function(t){var i=$(t.currentTarget);switch(i.attr("jsaction")){case"toNavSearch":var e={qt:"cur",wd:s.getCity()||"全国",from:"maponline",tn:"m01","ie=utf-8":"utf-8"};o.update({query:e,pageState:{tab:"line"}},{queryReplace:!0})}return!1},submit:function(t){var i=$(".se-input-poi");if(!this._checkInput(i))return!1;if(t){var e=$(t.currentTarget),o=e.attr("user-data");"se-btn"==o&&this._poiSug&&this._poiSug._localStorage(i.val())}return i.blur(),c.addCookieStat(STAT_CODE.STAT_POI_SEARCH),n.search(i.val()),!1},updateMyPos:function(t){t=t?t:s.getLocation(),t.addr&&t.addr.city&&$(".se-city-wd").text(t.addr.city)},_checkInput:function(t){return t?/\S+/.test(t.val())?!0:(t.focus(),!1):!1}}});
;define("third:widget/searchbutton/searchbutton.js",function(t,e,o){"use strict";var a=t("common:static/js/util.js"),n=t("common:widget/url/url.js"),i=(t("third:widget/helper/helper.js"),t("common:widget/stat/stat.js"),t("common:widget/geolocation/location.js"));o.exports={init:function(){this._ifSupportSubway(),this.bind()},bind:function(){var t=this;$(".search-button").on("click",$.proxy(t.search,t))},_ifSupportSubway:function(){var t=$("#current-city").data("code")||i.getCityCode(),e=a.ifSupportSubway(t);e&&$(".subway-button").show()},search:function(t){var e,o=$("#current-city").data("code")||i.getCityCode(),r=$(t.target),c=r.data("wd");if("地铁图"==c){var s=a.ifSupportSubway(o),u=s.split(",");e={module:"subway",action:"show",query:{city:u[0]}}}else e=this.getHash({wd:c,code:o});n.update(e)},getHash:function(t){var e=t.module||"search",o=t.action||"search",a=parseInt(t.code)||131,r={qt:"s",wd:"",c:a},c={};t.query?r=$.extend(r,t.query):(r.wd=t.wd||t.word||t.name,r.searchFlag="sort");var s=n.get(),u=(s.query,s.pageState||{}),d=(u.from||"",decodeURIComponent(u.center_name||i.getCity()));return i._mylocation&&i._mylocation.isExactPoi&&parseInt(i.getMyCityCode())===a&&(d="我的位置",r.center_rank=1,r.nb_x=i.getMyPointX(),r.nb_y=i.getMyPointY()),c.center_name=d,{module:e,action:o,query:r,pageState:c}}}});
;define("third:widget/searchline/searchboxmodel.js",function(t,e,i){var n=t("common:widget/geolocation/location.js"),a={data:{start:{word:""},end:{word:""},geo:{word:""}},init:function(){},value:function(t){return t&&$.isPlainObject(t)?this.set(this._deepAdaptive(t)):this.get()},_deepAdaptive:function(t){var e={};for(key in t)e[key]=this._adaptive(t[key]);return e},_adaptive:function(t){var e={};for(key in t)if("name"==key||"wd"==key?e.word=t[key]:"pt"==key?e.point=t[key]:e[key]=t[key],e.word==MY_GEO){if(n.hasExactPoi())return e;e=this.getExactlocationData()}return e.point&&$.isPlainObject(e.point)&&(e.point=e.point.lng+","+e.point.lat),e},set:function(t,e){t&&"string"==typeof t&&e&&$.isPlainObject(e)?this.data[t]=e:t&&$.isPlainObject(t)&&$.extend(this.data,t)},_set:function(t,e){t&&"string"==typeof t&&e&&$.isPlainObject(e)?this.data[t]=e:t&&$.isPlainObject(t)&&$.extend(this.data,t)},get:function(t){return t&&"string"==typeof t?this.data[t]:this.data},getExactlocationData:function(){var t={word:""},e=n;return e&&e.point&&(t={word:MY_GEO,point:e.point.x+","+e.point.y,citycode:e.addr.cityCode}),t},getCenterName:function(){return n.hasExactPoi()?n.isUserDeny()?n.getAddress():MY_GEO:""}};i.exports=a});
;define("third:widget/searchline/searchline.js",function(t,e,r){t("common:static/js/gmu/src/core/widget.js");var o=(t("common:static/js/util.js"),t("common:widget/geolocation/location.js")),s=t("common:widget/popup/popup.js"),n=t("common:widget/url/url.js").get(),a=t("common:widget/url/url.js"),i=t("common:widget/stat/stat.js"),d="我的位置",l=!1;r.exports={init:function(){this.render(),this.bind();var t=this._getPagetype();t.isSelf||(this[t.elSelf].val(t.word),this.model.set([t.el],{word:t.word,point:t.point}))},render:function(){var e=this;e.sestart=$("#se_txt_start"),e.seend=$("#se_txt_end"),e.maskid=$("#se_wrap"),e.reverseBtn=$("#se_dir_reverse"),e.model=t("third:widget/searchline/searchboxmodel.js"),e.urlstart=e._proceedUrl(n.pageState.start),e.urlend=e._proceedUrl(n.pageState.end),e.pagetype=e._getPagetype(),e.selement=$("#se_txt_start, #se_txt_end"),e.submitbtn=$(".se-btn-tr"),e.sedirform=$(".se-dir-form")},_proceedUrl:function(t){var e=!1;return void 0!=t&&(e={word:"",point:""},datarr=t.trim().split("&"),datarr[0]&&(e.word=decodeURIComponent(datarr[0].split("=")[1])),datarr[1]&&(e.point=decodeURIComponent(datarr[1].split("=")[1]))),e},bind:function(){var t=this;$(window).on("pageshow",function(){l&&setTimeout(function(){t._setLocation()},0)}),t.reverseBtn.on("touchstart",$.proxy(t._reverse,this)),t.reverseBtn.on("touchend",$.proxy(t._reverseEnd,this)),listener.on("common.geolocation","mylocsuc",function(){var t=this;l=!!o.getMyLocation().point,t._setLocation()},this),t.selement.on("focus",$.proxy(t._focus,this)),t.selement.on("blur",$.proxy(t._blur,this)),t.selement.on("mousedown",$.proxy(t._touchstart,this)),t.submitbtn.on("touchstart",$.proxy(t._poiSubmit,this)),t.submitbtn.on("touchend",$.proxy(t._poiSubmitEnd,this)),t.selement.on("mousedown",$.proxy(t._touchstart,this)),t.sedirform.on("submit",$.proxy(this._poiSubmit,this))},_getPagetype:function(){var t=this;return result={elSelf:"",el:"sestart",key:"start",isSelf:!1,word:"",point:""},t.urlend?(result.elSelf="seend",result.word=t.urlend.word,result.point=t.urlend.point):t.urlstart?(result.key="end",result.el="seend",result.elSelf="sestart",result.word=t.urlstart.word,result.point=t.urlend.point):result.isSelf=!0,result},_checkInput:function(t){return t?/\S+/.test(t.val())?t.val()==d&&this.model.get("geo").word!=d?(t.val(""),s.open({text:"定位失败！"}),!1):!0:(t.focus(),!1):!1},_getGeoData:function(){{var t={word:"",point:"",citycode:""};o.getLocation()}return l&&(t={word:d,point:o.getMyPointX()+","+o.getMyPointY(),citycode:o.getMyCityCode()}),t},_reverse:function(){var t=this,e={start:$("#se_txt_start").val(),end:$("#se_txt_end").val()};t.reverseBtn.addClass("active"),t.sestart.val(e.end),t.seend.val(e.start),t.model.set("end",{word:e.start}),t.model.set("start",{word:e.end}),t._update()},_reverseEnd:function(){this.reverseBtn.removeClass("active")},_update:function(){var t=this,e=t.sestart,r=t.seend,o=t.model.get("geo");e.val()==d&&o.word==d&&l?(e.addClass("geo"),r.removeClass("geo")):e.removeClass("geo"),r.val()==d&&o.word==d&&l?(r.addClass("geo"),e.removeClass("geo")):r.removeClass("geo")},_setLocation:function(){{var t=this;t.sestart,t.seend}result=t.pagetype,geoData=t._getGeoData(),l&&t[result.el].val(d),result.key&&t.model.set(result.key,geoData);var e=t.model.get("geo");(!e.point||geoData&&""!==geoData.point)&&t.model.set("geo",geoData),t._update()},_focus:function(t){var e=$(t.target),r=$(".se-inner");e.hasClass("se_txt_start")&&(r[0].style.border="1px solid #D55959",r[1].style.border="1px solid #d9d9d9"),e.hasClass("se_txt_end")&&(r[0].style.border="1px solid #d9d9d9",r[1].style.border="1px solid #D55959"),e.val()==d&&e.val(""),e.removeClass("geo")},_blur:function(t){var e=this,r=$(t.target),o=r.attr("key"),n=e.model.get("geo"),a=n.word!=d&&i==d&&l,i=r.val().trim();if(a&&(r.val(""),s.open({text:"定位失败！"})),n.point&&""==i&&l){e.model.get(o).word==n.word&&(r.val(d),r.addClass("geo"));var u="start"==o?"start":"end";e["se"+u].val()!=d&&(e.model.set(o,e._getGeoData()),e.model.set(u,{word:""}))}},_fixDirData:function(){var t=$(".se-dir-form input[type=text]"),e=this._getPagetype();ptIsSelf=e.isSelf,me=this,$.each(t,function(){var t=$(this).attr("key"),r=$("#se_txt_"+t),o=me.model.get(t),s=o.word!=r.val();(!o.word||s)&&(r.val()===d&&l?me.model.set(t,me._getGeoData()):ptIsSelf||r.val()!=e.word?me.model.set(t,{word:r.val()}):me.model.set(t,{word:e.word,point:e.point}))})},_touchstart:function(t){var e=$(t.target);e.focus(),t.stopPropagation()},_getDirParam:function(t,e,r,s){var n,a=o.getCityCode()||1,i=this._getTabIndex("search",t),d=e.citycode||a,l=r.citycode||a,u=d||a;if(e.point&&r.point||!e.point&&!r.point)n={qt:["s","bt","nav","walk"][i]||"bt",sn:this._joinParam(e),en:this._joinParam(r),sc:d,ec:l,c:u,pn:"0",rn:"5"};else{var c,p,m,g;e.point?(c=e,g=r,p="sn",m="1"):(c=r,g=e,p="en",m="0");var v=["s","bse","nse","wse"][i]||"bse",_=c.point;n={qt:v,ptx:_.split(",")[0],pty:_.split(",")[1],wd:g.word||"",name:c.word||"",c:a,sc:e.citycode||a,ec:r.citycode||a,isSingle:"true"},n[v+"tp"]=m,n[p]=this._joinParam(c)}return s&&s.from&&(n.searchFlag=s.from||""),["nav","nse","walk","wse"].indexOf(n.qt)>=0&&(n.version="3"),["bse","bt"].indexOf(n.qt)>=0&&(n.version="5",n.exptype="dep"),n},_poiSubmit:function(t){t&&t.stopPropagation&&t.stopPropagation(),t&&t.preventDefault&&t.preventDefault();var e,r=t;r.target&&(e=$(t.target).attr("data-value"));var o=$(r.target);o.addClass("active"),e||(e=1);var s=this,n=s.sestart,d=s.seend;if(!s._checkInput(n)||!s._checkInput(d))return!1;this._fixDirData(),i.addCookieStat(STAT_CODE.STAT_TRANSIT_PLAN_CLICK);var l=s._getDirParam(e,this.model.get("start"),this.model.get("end"),t);a.update({module:"search",action:"search",query:l},{queryReplace:!0,trigger:!0})},_poiSubmitEnd:function(t){var e=t,r=$(e.target);r.removeClass("active")},_getTabIndex:function(t,e){if(!isNaN(e)){var r=this._num2str(t,e),o=this._str2num(t,r);return o}return"string"==typeof e?this._str2num(t,e):void 0},_getTabStr:function(t,e){if(!isNaN(e))return this._num2str(t,e);if(_.isString(e)){var r=this._str2num(t,e),o=this._num2str(t,r);return o}},_num2str:function(t,e){return"tab"==t?["place","line"][e]||"place":["place","transit","drive","walk"][e]||"place"},_str2num:function(t,e){return"tab"==t?{plcae:0,line:1}[e]||0:{place:0,transit:1,drive:2,walk:3}[e]||0},_joinParam:function(t){if(!t)return"";var e=t.point?"1":"2",r=t.uid||"",o=t.point||"",s=t.word||"";return[e,r,o,s,""].join("$$")}}});
;define("third:widget/searchsite/searchsite.js",function(t,i,n){var s=(t("common:static/js/util.js"),t("common:widget/url/url.js"),t("common:widget/stat/stat.js")),e=t("common:widget/search/poisearch.js");n.exports={init:function(){this.render(),this.bind()},render:function(){var t=this;t.bind()},bind:function(){$(".search").on("click",$.proxy(this.submit,this))},submit:function(){var t=$(".se-input-poi");return this._checkInput(t)?(t.blur(),s.addCookieStat(STAT_CODE.STAT_TRANSIT_SITE_CLICK),e.search(t.val()),!1):!1},_checkInput:function(t){return t?/\S+/.test(t.val())?!0:(t.focus(),!1):!1}}});
;define("third:widget/slideopen/slideopen.js",function(t,e,a){"use strict";a.exports={init:function(){var e,a,n=t("common:static/js/util.js"),o=t("common:widget/stat/stat.js"),i=Boolean(localStorage.getItem("topBannerClosed"));i===!1&&n.getNativeInfo("com.baidu.BaiduMap",function(t){0==t.error?(null!=$(".text").html()&&$(".text").html(""),$(".text").html("打开百度地图客户端"),a=!0):(null!=$(".text").html()&&$(".text").html(""),$(".text").html("下载百度地图客户端"),a=!1)},function(){null!=$(".text").html()&&$(".text").html(""),$(".text").html("下载百度地图客户端"),a=!1}),e=n.isIPhone()?"http://itunes.apple.com/cn/app/id452186370?ls=1&mt=8":n.isIPad()?"https://itunes.apple.com/cn/app/bai-du-de-tuhd/id553771681?ls=1&mt=8":n.isAndroid()?"http://mo.baidu.com/d/map/gw10014/bmap_andr_gw10014.apk":"";var s=$("#unlock-slider"),l=$("#unlock-handle"),c=s[0],d=l[0],p=(c.clientWidth-d.offsetWidth,0),h=0,m=function(t){var e=t.touches;p=e[0].pageX;var a=$(this).css("left");t.preventDefault(),t.stopPropagation(),a=parseInt(a.replace("px","")),h=a,this.addEventListener("touchmove",r),this.addEventListener("touchend",u)},r=function(t){var e=t.touches,n=e[0].pageX-p;t.preventDefault(),t.stopPropagation();var i=h+n;$(".text").css("opacity",1-parseInt(i)/120),0>i||(i>=190?(this.removeEventListener("touchmove",r),a?(o.addStat(STAT_CODE.STAT_NEARPUSH_SHOW),location.href="bdapp://map/"):(o.addStat(STAT_CODE.STAT_APP_LOADDOWN),window.open("http://map.baidu.com/zt/jod.html","_blank")),$("#unlock-handle").animate({left:0},200),$("#slide-to-unlock").animate({opacity:1},200),$(".text").css("opacity",parseInt(i)/120)):$(this).css({left:i}))},u=function(t){t.stopPropagation(),this.removeEventListener("touchmove",r),$("#unlock-handle").animate({left:0},200),$("#slide-to-unlock").animate({opacity:1},200),$(".text").css("opacity",1)};d.addEventListener("touchstart",m),o.addStat(STAT_CODE.STAT_APPBANNER_SHOW)}}});
;define("third:widget/thumbnail/userheading.js",function(t,i,n){function e(){this._timeStamp=0,this._doms=[],this._alpha=0,this._orientation=window.orientation}e.prototype.start=function(t){var i=this;i._doms.push(t),i._started||(i._started=!0,window.addEventListener("deviceorientation",function(t){var n;if(n=t.webkitCompassHeading?Math.round(0-t.webkitCompassHeading):Math.round(t.alpha),n-=i._orientation,!(t.timeStamp-i._timeStamp<100)){i._timeStamp=t.timeStamp;var e=Math.abs(i._alpha-n);if(e>5){for(var o=0;o<i._doms.length;o++)i._doms[o]&&i._doms[o].style&&(i._doms[o].style.transform=i._doms[o].style.webkitTransform="rotate("+Math.round(0-n)+"deg)");i._alpha=n}}},!0),window.addEventListener("orientationchange",function(){i._orientation=window.orientation},!0))},e.prototype.isSupport=function(){var t=navigator.userAgent.toLowerCase();return t.indexOf("android")>-1||!window.DeviceOrientationEvent||t.indexOf("ucweb")>-1&&t.indexOf("linux")>-1?!1:!0},n.exports=new e});
;define("third:widget/thumbnail/thumbnail.js",function(t,i,e){var s=t("common:static/js/util.js"),n=(t("common:widget/url/url.js"),t("common:widget/popup/popup.js")),o=t("common:widget/geolocation/location.js");stat=t("common:widget/stat/stat.js");var a={type:0,level:16,height:101,width:window.innerWidth-22,url:null,host:"http://snap.map.baidu.com/?qt=snap&data="};e.exports={flag:{appreszie:!1,wait:void 0},state:"start",init:function(){this.prevPoint=void 0,this.render(),this.bind()},render:function(){this.thumbImg=$(".thumb-img"),this.thumbWrap=$(".thumb-wrap"),this.locbarTxt=$(".locbar-txt"),this.centerMarker=$(".center-marker"),this.geoBtn=$(".geo-btn"),this.inBtn=$(".in-btn"),this.errorCnt=$(".error-cnt"),this.thumbLink=$(".thumb-link"),this.setState("start"),this.setUserHeading()},bind:function(){var t=this;t.geoBtn.on("click",function(i){stat.addStat(STAT_CODE.STAT_THUNB_START_GEO),t.startGeo(),i.stopImmediatePropagation(),i.stopPropagation()}),t.thumbImg.on("load",function(){t.errorCnt.hide(),t.thumbImg.show(),t.geoBtn.show(),t.hideLoading()}),t.thumbImg.on("error",function(){t.errorCnt.show(),t.thumbImg.hide(),t.centerMarker.hide(),t.hideLoading()}),listener.on("common.geolocation","success",function(){this.successCBK()},this),listener.on("common.geolocation","fail",function(){this.failCBK()},this)},successCBK:function(){this.flag.appreszie||(listener.on("common","sizechange",function(){this._appReSize()},this),this.flag.appreszie=!0),this.setState("success")},failCBK:function(){this.setState("fail")},setState:function(t){switch(this.flag.state=t,this.addStateToLog(t),t){case"start":this.state="start",this.showLoading(),this.waitForLoc(8);break;case"success":this.state="success",this.hideLoading(),this.setLocation();break;case"fail":this.state="fail",this.hideLoading(),this.centerMarker.hide(),n.open({text:"定位失败"}),this.setLocation(),this.flag.wait&&window.clearTimeout(this.flag.wait)}},addStateToLog:function(t){if("success"===t||"fail"===t){var i={code:STAT_CODE.STAT_THUMB_IMG_CLICK,state:t};this.thumbLink.data("log",JSON.stringify(i))}},startGeo:function(){this.setState("start"),o.startGeo()},waitForLoc:function(t){var i=this;i.flag.wait&&window.clearTimeout(i.flag.wait),i.flag.wait=window.setTimeout(function(){"success"!=i.state&&i.failCBK()},1e3*t)},setUserHeading:function(){var i=t("third:widget/thumbnail/userheading.js");if(i.isSupport()){this.centerMarker.addClass("navi-marker");var e=$(".center-marker div").get(0);i.start(e)}},setLocation:function(){var t=o.getCenterPoi();this._unEqualPoint(t)?(this.prevPoint=t,this._setThumbUrl()):void 0!=this.prevPoint&&this.hideLoading(),this._setLocBarAddress(),this._setGeoBtnStatus(),this._setSearchBoxCity()},showLoading:function(){s.showLoading(this.thumbWrap),this.locbarTxt.html("正在定位您的位置...")},hideLoading:function(){s.hideLoading(this.thumbWrap)},_setLocBarAddress:function(t){var i=t||o.getAddress();this.locbarTxt.html(i)},_setSearchBoxCity:function(t){var t=t||o.getCity();$(".se-city-wd").html(t)},_setGeoBtnStatus:function(){o.hasExactPoi()?this.geoBtn.removeClass("geo-fail"):this.geoBtn.addClass("geo-fail")},_setThumbUrl:function(t){var i=this,e=t||i._getThumbUrl();o.hasExactPoi()?i.centerMarker.show():i.centerMarker.hide(),i.thumbImg.attr("src",e)},_appReSize:function(){var t=this;s.isAndroid()?setTimeout(function(){a.width=window.innerWidth-22},800):a.width=window.innerWidth-22,t._setThumbUrl()},_equalPoint:function(t){return this.prevPoint&&this.prevPoint.x==t.x&&this.prevPoint.y==t.y},_unEqualPoint:function(t){return void 0==this.prevPoint||t.x!=this.prevPoint.x||t.y!=this.prevPoint.y},_getThumbUrl:function(t){a.level=0==a.type?"全国"==o.getCity()?3:o.hasExactPoi()?16:10:10,void 0==t&&(t=o.getCenterPoi());var i={retype:1,src:"webapp",level:a.level,center:t.x+" "+t.y,height:101,width:a.width,coordtype:"M",pictype:a.type};return a.host+JSON.stringify(i)}}});
;define("third:widget/waitforloc/waitforloc.js",function(e,t,n){var i=e("common:widget/geolocation/geolocation.js"),a=e("common:widget/url/url.js"),r=e("common:widget/geolocation/location.js");n.exports={config:{lineQtMap:{bt:"bse"},qtMap:{place:"s|con|nb|bd",transit:"bt|bse",drive:"nav|nse",walk:"walk|wse"}},init:function(){this.initIpGeo(),this.bindEvent(),this.initGeo()},initIpGeo:function(){try{var e=window.localStorage;window._DEFAULT_CITY.index?(e.setItem("_DEFAULT_CITY",JSON.stringify(window._DEFAULT_CITY)),cookie.set("DEFAULT_CITY","1",{expires:3e5,domain:"baidu.com",path:"/"})):window._DEFAULT_CITY=JSON.parse(e.getItem("_DEFAULT_CITY"))||{}}catch(t){}var n,i,a,o,c;n=JSON.parse(_DEFAULT_CITY.index)||{},i=n&&n.content,a=i&&i.geo,c=i.level,o=a.split(";")[1].split("|")[0].split(","),1==i.code&&(i.name="全国"),locationData={addr:{city:i.cname,cityCode:i.code},point:{x:o[0],y:o[1]},level:c,type:"ip",isExactPoi:!1,isGeoEnd:!1},r.setAddress(locationData)},bindEvent:function(){var e=this;listener.on("common.geolocation","success",function(){e.geoSuccess()}),listener.on("common.geolocation","fail",function(){e.geoFail()})},initGeo:function(){var e=this;i.init(),setTimeout(function(){e.geoFail()},8e3)},geoSuccess:function(){var e=a.get();this._initMixLocOptionsPage(e)},geoFail:function(){var e=a.get();this.locErrorCallback(e)},_initMixLocOptionsPage:function(e){{var t=this,n=e.pageState&&e.pageState.needloc;e.query}n&&"1"===n?t._initPlacePage(e):t._initTransitPage(e)},_initTransitPage:function(e){var t="我的位置",n=e.query||{},i=n.sn||"",o=n.en||"";geoQuery=n,key="sn",snArr=""+i.split("$$")[3],enArr=""+o.split("$$")[3],q="1$$$$"+r.getPointX()+","+r.getPointY()+"$$我的位置$$",wd=geoQuery.wd?geoQuery.wd:snArr!=t?snArr:enArr,snArr===t||enArr===t?enArr===t&&(key="en"):key=""===$.trim(snArr)?"sn":"en",geoQuery[key]=q,geoQuery=$.extend(geoQuery,{ptx:r.getPointX(),pty:r.getPointY(),bsetp:1,ec:r.getCityCode(),sc:r.getCityCode(),isSingle:"true",name:t,wd:wd}),geoQuery.qt=this.config.lineQtMap[geoQuery.qt]||geoQuery.qt,a.update({module:"search",action:"search",query:geoQuery,pageState:{has_handle_geo:1,needloc:""}},{trigger:!0,replace:!0})},getSearchTypeConfig:function(){var e=this.config.qtMap,t={};return $.each(e,function(e,n){_qt=n.split("|"),$.each(_qt,function(n,i){t[i]=e})}),t},_initPlacePage:function(e){{var t=this,n={center_rank:1,nb_x:r.getPointX(),nb_y:r.getPointY(),c:r.getCityCode()};t._getOptions(e,n)}a.update({module:"search",action:"search",query:{center_rank:n.center_rank,nb_x:n.nb_x,nb_y:n.nb_y,c:n.c},pageState:{center_name:"我的位置",has_handle_geo:1,needloc:""}},{replace:!0})},_getOptions:function(e,t){for(var n in t)e.query[n]=t[n];return e},_initPage:function(){this._searchData()},locErrorCallback:function(e){var t=this.getSearchType(e);switch(t){case"place":this._initPage(e);break;case"walk":case"transit":case"drive":this.setSearchBoxValue(e);default:this._switchToIndex(e)}},getSearchType:function(e){if(e){var t=e.query||{},n=t.qt,i=this.searchTypeConfig||this.getSearchTypeConfig();return this.searchTypeConfig=i,i[n]}},setSearchBoxValue:function(e){var t=this._getStartAndEndWord(e)||{},n="我的位置";t.start&&t.start!=n&&(this.start="word="+encodeURIComponent(t.start)),t.end&&t.end!=n&&(this.end="word="+encodeURIComponent(t.end))},_getUrl:function(){var e=a.get().query||{};return this.isLanding&&(third_party=location.href.match(/[\?\&]third_party=([^&^#]+)/),third_party&&(e.searchFlag=third_party[1]||"","baidukuangpush"===third_party[1]&&(e.tg="push"))),e.c||(e.c=r.getCityCode()),["nav","nse","walk","wse"].indexOf(e.qt)>=0&&(e.version="3"),("nav"==e.qt||"bt"==e.qt)&&(e.wd1&&!e.sn&&(e.sn="2$$$$$$"+e.wd1+"$$"),e.wd2&&!e.en&&(e.en="2$$$$$$"+e.wd2+"$$")),e},_searchData:function(){var e=this._getUrl();a.update({module:"search",action:"search",query:e,pageState:{needloc:""}},{replace:!0,queryReplace:!0})},_switchToIndex:function(e){var t=this.getSearchType(e),n=e.pagestate||{},i=e.query||{},r="";n.tab=t,("walk"===n.tab||"drive"===n.tab||"transit"===n.tab)&&(r="line"),a.update({module:"index",action:"index",query:i,pageState:{start:this.start||"",end:this.end||"",tab:r}},{trigger:!0,replace:!0,queryReplace:!0,pageStateReplace:!0})},_getStartAndEndWord:function(e){if(e&&e.query){var t=e.query,n=t.sn||"",i=t.en||"",a=n.split("$$")[3]||t.name,r=i.split("$$")[3]||t.wd;return{start:a,end:r}}}}});
;define("third:widget/weather/weather.js",function(t,e,a){var i=t("common:widget/url/url.js");a.exports.init=function(){n(),d()};var o=1,n=function(){$(".tab").bind("click",c),$(".switch").bind("click",h)},d=function(){localStorage.tab&&2==localStorage.tab?w(2):w(1)},c=function(t){l($(t.target)),r($(t.target))},l=function(t){t.siblings().removeClass("active"),t.addClass("active")},r=function(t){"today_btn"==t.attr("id")?($(".detail_week").hide(),$(".detail_today").show(),o=1):"week_btn"==t.attr("id")&&($(".detail_week").show(),$(".detail_today").hide(),o=2)},w=function(t){1==t?(l($("#today_btn")),$(".detail_today").show(),$(".detail_week").hide()):2==t&&(l($("#week_btn")),$(".detail_today").hide(),$(".detail_week").show()),localStorage.tab=1},h=function(){localStorage.tab=o;var t=window.location.pathname;i.update({module:"third",action:"changecity",query:{refer:encodeURIComponent(t)}})}});