define("place:widget/datepicker/datepicker.js",function(t,e,a){"use strict";var i=new Date,n=new Date(i.getTime()+864e5);a.exports={init:function(t){var e=$(".hotel-calendar"),a=e.find(".date-ipt-start .tit-text"),r=e.find(".date-ipt-end .tit-text");this.date={},this.options=t,a.text(i.format("yyyy-MM-dd")),r.text(n.format("yyyy-MM-dd")),this.$sContainer=e.find(".hotel-container-start"),this.$eContainer=e.find(".hotel-container-end"),this.$sWrapper=e.find(".hotel-calwrap-start"),this.$eWrapper=e.find(".hotel-calwrap-end"),this.$sInput=a,this.$eInput=r,this.$calendar=e,this.isShow=!1,this.bindEvent()},bindEvent:function(){var t=this;listener.on("place.datepicker","showcalendar",function(){t.isShow||(t._initCalendar(),t.isShow=!0)})},_initCalendar:function(){var e=this,a=(t("common:widget/datepicker/datepicker.js"),$.datepicker),i=a.parseDate(e.$sInput.text()),n=a.parseDate(e.$eInput.text()),r=e.options.uid;e.$sContainer.datepicker({date:i,minDate:i,valuecommit:function(t,i,n){var s=a.parseDate(e.$eInput.text()),p=new Date(i.getTime()+864e5);e.$sInput.text(n),e._compareDate(i,s)>=0&&(e.$eInput.text(p.format("yyyy-MM-dd")),e.$eContainer.datepicker("date",p)),e.$eContainer.datepicker("minDate",p).datepicker("maxDate",new Date(i.getFullYear(),i.getMonth(),i.getDate()+28)).datepicker("refresh"),e._removeActiveCss("start"),e.$sInput.text()!==e.date.st&&listener.trigger("place.datepicker","datechange",{st:e.$sInput.text(),et:e.$eInput.text(),uid:r}),e.date.st=e.$sInput.text()}}),e.$eContainer.datepicker({date:n,minDate:n,maxDate:new Date(i.getFullYear(),i.getMonth(),i.getDate()+28),valuecommit:function(t,a,i){e.$eInput.text(i),e._removeActiveCss("end"),e.$eInput.text()!==e.date.et&&listener.trigger("place.datepicker","datechange",{st:e.$sInput.text(),et:e.$eInput.text(),uid:r}),e.date.et=e.$eInput.text()}}),e.$calendar.find(".hotel-date-ipt").on("click",$.proxy(e._onDateClick,e)),e.$calendar.show()},_removeActiveCss:function(t){switch(t){case"start":this.$sWrapper.hide(),this.$sInput.parents(".hotel-date-ipt").removeClass("active");break;case"end":this.$eWrapper.hide(),this.$eInput.parents(".hotel-date-ipt").removeClass("active")}},_compareDate:function(t,e){return t.getTime()-e.getTime()},_onDateClick:function(t){var e=this,a=$(t.currentTarget);a.hasClass("date-ipt-start")?(e._removeActiveCss("end"),this.$sWrapper.toggle(),a.toggleClass("active")):a.hasClass("date-ipt-end")&&(e._removeActiveCss("start"),this.$eWrapper.toggle(),a.toggleClass("active")),t.stopPropagation(),t.stopImmediatePropagation()}}});