define("taxi:widget/common/banner/banner.js",function(i,t,e){"use strict";var n=i("taxi:static/js/storage.js"),t={create:function(){var i,t=this.$el=$(".taxi-widget-banner"),e=t.find(".btn-close");e.on("click",$.proxy(this.onBtnCloseClick,this)),listener.on("common.geolocation","success",$.proxy(this.onGeoSuccess,this)),(i=n.get("cityCode"))&&this.loadActivate({cityCode:i}),this.$el=t},onGeoSuccess:function(i,t){t.addr.cityCode&&this.loadActivate(t.addr)},loadActivate:function(i){var t,e=this;i.cityCode&&((t=sessionStorage.getItem("activityData"))&&e.buildBanner(JSON.parse(t)),LoadManager.request({data:{qt:"activity",city_code:i.cityCode,phone:n.get("phone"),width:window.innerWidth*window.devicePixelRatio},success:function(i){sessionStorage.setItem("activityData",JSON.stringify(i)),e.buildBanner(i)}}))},buildBanner:function(i){this.$el.html("").append(['<a href="',i.info.activity_url,'" style="background: url(',i.info.verify_ad_url,') 0 0 no-repeat; background-size: cover"'," ></a>"].join("")).css({visibility:"visible"})},onBtnCloseClick:function(){this.$el.hide()},init:function(){this.create()}};e.exports=t});