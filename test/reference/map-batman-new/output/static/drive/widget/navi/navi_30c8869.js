define("drive:widget/navi/navi.js",function(t,n,i){var o=t("drive:widget/navi/navibox.js"),a=t("common:static/js/util.js"),e={bindNav:function(){$("#nav_go_nav").on("click",$.proxy(this.goTonav,this))},bindEvent:function(){$(".gotonav").on("click",$.proxy(this.goTonav,this)),$("a").on("click",$.proxy(this._hideNavBox,this))},_hideNavBox:function(t){var n=t.target,i=$(n).closest("a"),o=i.attr("href");t.preventDefault(),o&&""!=o&&($("#navOkBox").hide(),window.location.href=o)},goTonav:function(){var t=this,n={},i="http://daohang.map.baidu.com/mobile/#navi/naving/"+a.jsonToQuery(window._APP_NAVI_QUERY)+"/vt=map&state=entry";if(a.isAndroid()){var e,r=!1;a.getNativeInfo("com.baidu.BaiduMap",function(a){if(0==a.error&&r===!1){r=!0;var e=t.getLLpoint(window._APP_NAVI_QUERY.start),v=t.getLLpoint(window._APP_NAVI_QUERY.endp),s="bdapp://map/direction?origin="+e+"&destination="+v+"&mode=navigation";return n.description="检测到您已安装百度地图，是否打开百度地图导航？",n.leftBtn="确定",n.rightBtn="直接网页导航",n.naviUrl=i,o.showTb(s,n),void 0}},function(){}),setTimeout(function(){0==r&&(r=!0,e="http://mo.baidu.com/map/code/?from=1321",t._showNavBox(e,i))},1e3)}else a.isIPhone()||a.isIPod()?location.href=i:a.isIPad()?location.href=i:(e="http://mo.baidu.com/d/map/1321/bmap_andr_1321.apk",t._showNavBox(e,i))},_showNavBox:function(t,n){var i={};i.description="下载百度地图，免费导航，精准专业！",i.leftBtn="确定下载",i.rightBtn=" 直接网页导航",i.naviUrl=n,o.showTb(t,i)},getLLpoint:function(t){var n=t.split(","),i={lng:n[0],lat:n[1]},o=this.convertMC2LL(i),o=o.lat+","+o.lng;return o},convertMC2LL:function(t){function n(t,n){if(t&&n){var i=n[0]+n[1]*Math.abs(t.lng),o=Math.abs(t.lat)/n[9],a=n[2]+n[3]*o+n[4]*o*o+n[5]*o*o*o+n[6]*o*o*o*o+n[7]*o*o*o*o*o+n[8]*o*o*o*o*o*o;return i*=t.lng<0?-1:1,a*=t.lat<0?-1:1,{lng:i,lat:a}}}var i,o;i={lng:Math.abs(t.lng),lat:Math.abs(t.lat)};for(var a=0;a<[12890594.86,8362377.87,5591021,3481989.83,1678043.12,0].length;a++)if(i.lat>=[12890594.86,8362377.87,5591021,3481989.83,1678043.12,0][a]){o=[[1.410526172116255e-8,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,17337981.2],[-7.435856389565537e-9,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,10260144.86],[-3.030883460898826e-8,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,6856817.37],[-1.981981304930552e-8,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,4482777.06],[3.09191371068437e-9,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,2555164.4],[2.890871144776878e-9,8983055095805407e-21,-3.068298e-8,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]][a];break}var e=n(t,o),t={lng:e.lng.toFixed(6),lat:e.lat.toFixed(6)};return t}};i.exports=e});