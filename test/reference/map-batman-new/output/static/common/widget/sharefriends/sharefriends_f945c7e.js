define("common:widget/sharefriends/sharefriends.js",function(e,t,n){var s=e("common:static/js/util.js"),r=e("common:widget/url/url.js"),i=e("common:widget/stat/stat.js");ShareToFriends={init:function(e){this.type=e,this.bindEvent()},bindEvent:function(){$(".send-phone").on("click",$.proxy(this.shareToFriends,this))},shareToFriends:function(e){var t=this,n=$("#share-to-friends"),s=n.attr("href");if(!(s&&s.indexOf("body")>-1)){if("transit"==this.type)var r=t.getTransitSmsUrl();else var r=t.getSmsUrl();var o=function(e){if(e&&e.sms_content){var s=e.sms_content;n.attr("href","sms:?body="+s),t.fireEvent(n[0],"click")}},a=function(){};$.ajax({url:r,dataType:"jsonp",success:o,error:a}),e.preventDefault(),i.addStat(COM_STAT_CODE.SHARESMS_CLICK)}},getTransitSmsUrl:function(){var e=r.get(),t=e.query||{},n=e.pageState||{},i=n.i+",1,1",o="http://map.baidu.com/ag/sms/ready?url=",a="http://map.baidu.com/?i="+i+"&s="+t.qt,c=encodeURIComponent("&"+s.jsonToQuery(t)),m=o+encodeURIComponent(a+c+"&sc=0&smsf=1")+"&t="+(new Date).getTime();return m},getSmsUrl:function(){var e=r.get(),t=e.query||{},n="http://map.baidu.com/ag/sms/ready?url=",i="http://map.baidu.com/?s="+t.qt;delete t.version;var o=encodeURIComponent("&"+s.jsonToQuery(t)),a=n+encodeURIComponent(i+o+"&sc=0&smsf=1")+"&t="+(new Date).getTime();return a},fireEvent:function(e,t){var n=e;if(document.createEvent){var s=document.createEvent("MouseEvents");s.initEvent(t,!0,!1),n.dispatchEvent(s)}}},n.exports=ShareToFriends});