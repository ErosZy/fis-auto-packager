define("third:widget/searchbox/searchbox.js",function(t,i,e){t("common:static/js/gmu/src/widget/suggestion/suggestion.js"),t("common:static/js/gmu/src/widget/suggestion/renderlist.js"),t("common:static/js/gmu/src/widget/suggestion/$quickdelete.js"),t("common:static/js/gmu/src/widget/suggestion/sendrequest.js");var o=(t("common:static/js/util.js"),t("common:widget/url/url.js")),s=(t("common:widget/geolocation/geolocation.js"),t("common:widget/geolocation/location.js")),n=t("common:widget/search/poisearch.js"),c=t("common:widget/stat/stat.js");e.exports={init:function(){this.render(),this.bind()},render:function(){this._poiSug=new gmu.Suggestion("#se-input-poi",{source:"http://map.baidu.com/su",cbKey:"callback",listCount:6,posAdapt:!1,historyShare:!0,autoClose:!0,appendContanier:"#wrapper",quickdelete:!0}),this._poiSug.$wrapper.offset({left:0,top:104})},bind:function(){$(".se-form").on("submit",$.proxy(this.submit,this)),$(".se-btn").on("click",$.proxy(this.submit,this)),$(".se-input-poi").on("blur",function(){$(".se-city").show()}),$(".se-input-poi").on("focus",function(){$(".se-city").hide()}),listener.on("common.geolocation","success",this.updateMyPos,this),$(".index-widget-searchbox [jsaction]").on("click",$.proxy(this.go,this)),listener.on("common.page","switchstart",function(){$(".ui-suggestion").length&&$(".ui-suggestion").hide()})},go:function(t){var i=$(t.currentTarget);switch(i.attr("jsaction")){case"toNavSearch":var e={qt:"cur",wd:s.getCity()||"全国",from:"maponline",tn:"m01","ie=utf-8":"utf-8"};o.update({query:e,pageState:{tab:"line"}},{queryReplace:!0})}return!1},submit:function(t){var i=$(".se-input-poi");if(!this._checkInput(i))return!1;if(t){var e=$(t.currentTarget),o=e.attr("user-data");"se-btn"==o&&this._poiSug&&this._poiSug._localStorage(i.val())}return i.blur(),c.addCookieStat(STAT_CODE.STAT_POI_SEARCH),n.search(i.val()),!1},updateMyPos:function(t){t=t?t:s.getLocation(),t.addr&&t.addr.city&&$(".se-city-wd").text(t.addr.city)},_checkInput:function(t){return t?/\S+/.test(t.val())?!0:(t.focus(),!1):!1}}});