define("common:widget/stat/stat.js",function(t,e,n){var o=t("common:widget/cookie/cookie.js"),i=t("common:static/js/util.js"),a=20138,c=function(){var t=o.get("flow_ctrl")||!1;return t===!1?!1:!0}(),r=function(e,n,o){var i={expires:1e4,path:"/"},a=t("common:widget/cookie/cookie.js"),o=o||function(){},n=n||{};n=$.extend({module:window._APP_HASH.module,action:window._APP_HASH.action,page:window._APP_HASH.page,third_party:window._APP_HASH.third_party},n),e&&(n.code=e,n.trackCode=e),a.set("H_MAP_CLK",JSON.stringify(n),i),o()},d=function(t){if("object"==typeof t&&t.code)return r(t.code,t),void 0;if("string"==typeof t)try{for(var e=t.replace(/[{}"']/g,"").split(","),n={},i=0;i<e.length;i++){var a=e[i].split(":");n[$.trim(a[0])]=$.trim(a[1])}r(n.code,n)}catch(c){}else null==o.get("H_MAP_CLK")&&r("",{})},u=function(){listener&&listener.on("common.page","switchstart",function(t,e){var n,o=e.target;o&&(n=$(o).data("log")),d(n)}),$(document).on("click","a,[data-href]",function(){var t=$(this).data("log");d(t)})},s=function(){var t="/mobile/img/t.gif?newmap=1";return/(&|\?)(kehuduan=1|nostat=1)(&|$|#)/.test(location.href)&&(t="/mobile/img/nostat.gif?newmap=1"),function(){return t}}(),_=$("#statImg"),g=function(e,n,o){var o=o||function(){};if(e){n=n||{},c&&(n.flow_ctrl=!0),n.module=_APP_HASH.module,n.action=_APP_HASH.action,n.page=_APP_HASH.page,n.net_type=_WISE_INFO.netype;var a=i.jsonToUrl(n),r=function(t){var e=s();t&&(g._sending=!0,setTimeout(function(){_[0].src=e+t.src,$(document).trigger("addStat",t.code)},50),o())},d=function(){var t=g._reqQueue.shift();t&&r(t)},u=Date.now(),f=t("common:widget/geolocation/location.js"),m={src:"&t="+u+"&code="+e+"&c="+f.getCityCode()+"&"+a,code:e};g._sending?g._reqQueue.push(m):r(m),g._binded||($("#statImg").on("load",function(){g._sending=!1,d()}),$("#statImg").on("error",function(){g._sending=!1,d()}),g._binded=!0)}};g._reqQueue=[];var f=function(){var t=a,e={},n=!1,o=200,i=!1,c=[],r=function(o){if(!n){var a=o||{},r=o.pid||"unkown",u=o.page_id||"unkown",s={pid:r,page_id:u},_=e;c.push(s),a.step_len=c.length,a.time=Date.now(),a=$.extend({},a,s,_),g(t,a),e={ref_pid:s.pid,ref_page_id:s.page_id},(!window.checkLandingPage()||i)&&d(),i=!0}},d=function(){n=!0;var t=setTimeout(function(){n=!1,clearTimeout(t)},o)};return r}();n.exports={addStat:g,sendPvStat:f,initClickStat:u,addCookieStat:r}});