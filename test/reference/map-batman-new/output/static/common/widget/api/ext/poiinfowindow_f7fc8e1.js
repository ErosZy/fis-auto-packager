define("common:widget/api/ext/poiinfowindow.js",function(t,e,o){function a(){this.uid=Date.now()}var i=t("common:static/js/mapconst.js"),n=t("common:widget/url/url.js"),c=t("common:static/js/util.js"),s=t("common:widget/geolocation/location.js"),r=t("common:widget/api/ext/infowindowoverlay.js"),d=t("common:widget/stat/stat.js");a.prototype=new r,$.extend(a.prototype,{index:0,offsetX:-1,offsetY:36,switchTo:function(t){this.index=t||0,this.point=this._getPoint(),this.content=this._getContent(),this.show()},getPoiData:function(){var t=(this.index,this.getData(this.type,this.index));return t?t:void 0},_getPoint:function(){var t=this.getPoiData();if(t)return c.geoToPoint(t.geo)},_getContent:function(){var t=this.getPoiData();if(t){var e=t.name.replace("\\","");t.poiType==i.POI_TYPE_BUSSTOP?e+="-公交车站":t.poiType==i.POI_TYPE_SUBSTOP&&(e+="-地铁站");var o=$("<div />",{"class":"iw-c-title "+(t.pano&&1==t.pano?"iw-c-title-pano":""),text:e,html:t.html,"data-name":t.name,"data-uid":t.uid,"data-geo":t.geo});return o}},nbSearch:function(t,e){if(t&&e){var o=c.geoToPoint(e),a={nb_x:o&&o.lng,nb_y:o&&o.lat,center_name:t||"",from:"searchnearby"};d.addCookieStat(COM_STAT_CODE.MAP_IW_NB_SEARCH),n.update({module:"index",action:"searchnearby",query:{foo:"bar"},pageState:a},{trigger:!0,pageStateReplace:!0,queryReplace:!0})}},lineSearch:function(t,e){if(t&&e){var o=c.geoToPoint(e),a={word:t,point:(o&&o.lng)+","+(o&&o.lat),citycode:this.cityCode||s.getCityCode()},i={end:c.jsonToQuery(a),from:"place"};d.addCookieStat(COM_STAT_CODE.MAP_IW_LINE_SEARCH),n.update({module:"place",action:"linesearch",query:{foo:"bar"},pageState:i},{trigger:!0,queryReplace:!0,pageStateReplace:!0})}},detailSearch:function(t){d.addCookieStat(COM_STAT_CODE.MAP_IW_DETAIL_SEARCH),t?n.update({module:"place",action:"detail",query:{qt:"inf",uid:t},pageState:{vt:""}},{trigger:!0,queryReplace:!0,pageStateReplace:!0}):n.update({module:"place",action:"detail",query:{foo:"bar"},pageState:{vt:"",i:this.index}},{trigger:!0,queryReplace:!1,pageStateReplace:!0})}}),o.exports={_className_:"PoiInfoWindow",_instances:{},_constructor:a,init:function(t){var e;if(!this._instances[t])switch(e=this._instances[t]=new this._constructor,t){case i.IW_GRT:e.offsetX=2,e.offsetY=32;break;case i.IW_VCT:e.offsetX=0,e.offsetY=7;break;case i.IW_CNT:e.offsetX=1,e.offsetY=15}return e}}});