define("common:widget/sharefriends/sharefriends.js",function(t,e,n){var s=t("common:static/js/util.js"),r=t("common:widget/url/url.js"),o=t("common:widget/stat/stat.js");ShareToFriends={init:function(t){this.type=t,this.bindEvent()},bindEvent:function(){$(".send-phone").on("click",$.proxy(this.shareToFriends,this))},shareToFriends:function(t){var e,n=this,s=$("#share-to-friends"),r=s.attr("href");if(!(r&&r.indexOf("body")>-1)){e="transit"==this.type?n.getTransitSmsUrl():n.getSmsUrl();var i=function(t){if(t&&t.sms_content){var e=t.sms_content;s.attr("href","sms:?body="+e),location.href="sms:?body="+e}},a=function(){};$.ajax({url:e,dataType:"jsonp",success:i,error:a}),t.preventDefault(),o.addStat(COM_STAT_CODE.SHARESMS_CLICK)}},getTransitSmsUrl:function(){var t=r.get(),e=t.query||{},n=t.pageState||{},o=n.i+",1,1",i="http://map.baidu.com/ag/sms/ready?url=",a="http://map.baidu.com/?i="+o+"&s="+e.qt,c=encodeURIComponent("&"+s.jsonToQuery(e)),m=i+encodeURIComponent(a+c+"&sc=0&smsf=1")+"&t="+(new Date).getTime();return m},getSmsUrl:function(){var t=r.get(),e=t.query||{},n="http://map.baidu.com/ag/sms/ready?url=",o="http://map.baidu.com/?s="+e.qt;delete e.version;var i=encodeURIComponent("&"+s.jsonToQuery(e)),a=n+encodeURIComponent(o+i+"&sc=0&smsf=1")+"&t="+(new Date).getTime();return a},fireEvent:function(t,e){var n=t;if(document.createEvent){var s=document.createEvent("MouseEvents");s.initEvent(e,!0,!1),n.dispatchEvent(s)}}},n.exports=ShareToFriends});