define("common:widget/url/url.js",function(e,t,a){var o=e("common:static/js/util.js"),i="_lastPageUrl";a.exports={host:"http://"+location.host,update:function(e,t){var a,o=t||{},i=this._get(e,o),r=window.location.pathname;i!==r&&(a=this.host+i,this.navigate(a,t))},navigate:function(e,t){if("string"==typeof e){var a=window.location.pathname,o=t||{};if(o.trigger=o.trigger===!1?!1:!0,o.replace===!0&&o.storageKey!==!1){try{window.localStorage.setItem(i,a)}catch(r){}appPage.redirect(e,o)}else appPage.redirect(e,o)}},get:function(e){e=e||{},path=e.path||window.location.pathname,disableEncode=e.disableEncode||!1;var t=path.slice(1),a=t.split("/"),i=a[0],r=a[1],n=a[2],c=a[3],l=a[4],p=a[5]||"";if(!disableEncode){var s={seachbox:function(e){var t={place:function(e){var t=p.split("from=place&"+e+"=");p="from=place&"+e+"="+encodeURIComponent(t[1])},loc:function(e){var t=p.split(e+"=");p=e+"="+encodeURIComponent(t[1])}};e&&t[e[1]](e[0])}};if(!/%3d|%26/gi.test(p)&&p.indexOf("=")>-1){var d={DictionaryName:"seachbox",DictionaryData:""},u=!/^(from=place&start=word%3d|from=place&end=word%3d)/gi.test(p),g=!/^(start=word%3d|end=word%3d)/gi.test(p);if(u||g){if(-1!==p.indexOf("start")){var f=/^start=word=/gi.test(p);!f&&u&&(d.DictionaryData=["start","place"]),f&&g&&(d.DictionaryData=["start","loc"])}else if(-1!==p.indexOf("end")){var h=/^end=word=/gi.test(p);!h&&u&&(d.DictionaryData=["end","place"]),h&&g&&(d.DictionaryData=["end","loc"])}s[d.DictionaryName](d.DictionaryData)}}}return{product:i,style:r,module:n,action:c,query:o.urlToJSON(l||""),pageState:o.urlToJSON(p||"")}},toIndex:function(e){var e=$.extend({queryReplace:!0,pageStateReplace:!0},e);this.update({module:"index",action:"index"},e)},_get:function(e,t){var a=window.location.pathname.slice(1),i=a.split("/"),r=i[0]||"mobile",n=i[1]||"webapp",c=i[2]||"index",l=i[3]||"index",p=i[4]||"foo=bar",s=i[5]||"",d=t&&t.queryReplace||!1,u=t&&t.pageStateReplace||!1,g=[];if(g.push(e.product||r),g.push(e.style||n),g.push(e.module||c),g.push(e.action||l),d)e.query&&g.push(o.jsonToUrl(e.query));else{var f=o.urlToJSON(p);e.query=e.query||{};for(var h in e.query)""!==e.query[h]?f[h]=e.query[h]:delete f[h];g.push(o.jsonToUrl(f))}if(u)e.pageState&&g.push(o.jsonToUrl(e.pageState));else{e.pageState=e.pageState||{};var y=o.urlToJSON(s);for(var h in e.pageState)""!==e.pageState[h]?y[h]=e.pageState[h]:delete y[h];g.push(o.jsonToUrl(y))}return"/"+g.join("/")}}});