define("place:widget/premium/premium.js",function(e,i,a){function t(e){var i=$(".premium-list > li"),a=$(".place-widget-premium-pagenum-prev"),m=$(".place-widget-premium-pagenum-next"),n=$(".place-widget-premium-curpage"),p=n.html()-0;m.hasClass("place-widget-premium-disable")&&m.removeClass("place-widget-premium-disable"),a.hasClass("place-widget-premium-disable")||(m.on("click",s),i.hide(),i.eq(p-2).show(),n.html(p-1),0==p-2&&(a.addClass("place-widget-premium-disable"),a.off("click",t))),e.stopPropagation(),e.stopImmediatePropagation()}function s(e){var i=$(".premium-list > li"),a=$(".place-widget-premium-pagenum-prev"),m=$(".place-widget-premium-pagenum-next"),n=$(".place-widget-premium-curpage"),p=$(".place-widget-premium-totalpage"),c=n.html()-0,o=p.html()-0;a.hasClass("place-widget-premium-disable")&&a.removeClass("place-widget-premium-disable"),m.hasClass("place-widget-premium-disable")||(a.on("click",t),i.hide(),i.eq(c).show(),n.html(c+1),c+1==o&&(m.addClass("place-widget-premium-disable"),m.off("click",s))),e.stopPropagation(),e.stopImmediatePropagation()}var m,n=e("common:widget/stat/stat.js"),p=e("common:static/js/util.js");e("common:widget/cookie/cookie.js");var c,o=function(){function e(){var e=$("#msg-tel").val();return isNaN(e)||11!==e.length||!e.match(/^((\(\d{3}\))|(\d{3}\-))?13[0-9]\d{8}|15[89]\d{8}|18\d{9}/g)?(o.addClass("tip-active"),setTimeout(function(){o.removeClass("tip-active")},1e3),void 0):(l.send({en_name:n,poi_id:c,promo_id:m,mobile:e},t),a({type:"sendIng"}),void 0)}function i(){d.hidePopup()}function a(e){e=e||{};var i={noNetWork:"请检查网络，稍后重试",sendIng:"正在发送...",success:"发送成功",fail:"发送失败"},a=e.message||i[e.type]||i.fail,t=p.find(".msg-form");$msgNotice=p.find(".msg-notice"),t.hide(),$msgNotice.show().html(a)}function t(e){var i=e.errorNo;0===i?a({type:"success"}):a({message:e.errMsg}),setTimeout(function(){d.hidePopup()},2e3)}function s(){d.creatPopup(),p=$("div.msg-container"),o=p.find(".tip"),$("#msg-send-btn").on("click",e),$("#msg-cancel-btn").on("click",i)}var m,n,p,o;return{show:function(e,i){m=e||"",n=i||"",s(),$(".place-msg-mask").show().find("input").focus()}}}(),d={creatPopup:function(){var e='<div class="place-msg-mask">            <div class="msg-container">                <div class="msg-form">                    <p>请输入手机号</p>                    <p>                        <input type="tel" id="msg-tel"/>                        <span class="tip">请输入正确手机号</span>                    </p>                    <p class="opt">                        <a href="javascript:void(0);" id="msg-send-btn" class="msg-send-btn">发送</a>                        <a href="javascript:void(0);" id="msg-cancel-btn" class="msg-cancel-btn">取消</a>                    </p>                </div>                <div class="msg-notice"></div>            </div>        </div>';$(e).appendTo("#wrapper")},hidePopup:function(){$(".place-msg-mask").remove()}},l={send:function(e,i){e=$.extend({qt:"sms",en_name:"",poi_id:"",promo_id:"",mobile:"",src:"map",terminal:"webapp",imei:2e14},e),$.ajax({url:"http://client.map.baidu.com/detail",data:e,success:i,dataType:"jsonp"})}};p.urlToJSON(location.href).uid,a.exports={init:function(e,i){c=e,m=i||{};var a=$(".place-widget-premium-totalpage").html()-0;a>1&&($(".place-widget-premium-pagenum-prev").on("click",t),$(".place-widget-premium-pagenum-next").on("click",s)),$("#place-premium-msg-btn").click(function(){var e=$(this),i=e.data("saleid"),a=e.data("enname");window.scrollTo(0,$("#product-nav").height()),o.show(i,a),n.addStat(STAT_CODE.PLACE_PREMIUM_SMSG_DL_CLICK,{wd:m.wd,name:m.name,srcname:m.srcname})}),n.addStat(STAT_CODE.PLACE_PREMIUM_VIEW,{wd:m.wd,name:m.name,srcname:m.srcname})}}});