define("third:widget/searchbutton/searchbutton.js",function(t,e,o){"use strict";var a=t("common:static/js/util.js"),n=t("common:widget/url/url.js"),i=(t("third:widget/helper/helper.js"),t("common:widget/stat/stat.js"),t("common:widget/geolocation/location.js"));o.exports={init:function(){this._ifSupportSubway(),this.bind()},bind:function(){var t=this;$(".search-button").on("click",$.proxy(t.search,t))},_ifSupportSubway:function(){var t=$("#current-city").data("code")||i.getCityCode(),e=a.ifSupportSubway(t);e&&$(".subway-button").show()},search:function(t){var e,o=$("#current-city").data("code")||i.getCityCode(),r=$(t.target),c=r.data("wd");if("地铁图"==c){var s=a.ifSupportSubway(o),u=s.split(",");e={module:"subway",action:"show",query:{city:u[0]}}}else e=this.getHash({wd:c,code:o});n.update(e)},getHash:function(t){var e=t.module||"search",o=t.action||"search",a=parseInt(t.code)||131,r={qt:"s",wd:"",c:a},c={};t.query?r=$.extend(r,t.query):(r.wd=t.wd||t.word||t.name,r.searchFlag="sort");var s=n.get(),u=(s.query,s.pageState||{}),d=(u.from||"",decodeURIComponent(u.center_name||i.getCity()));return i._mylocation&&i._mylocation.isExactPoi&&parseInt(i.getMyCityCode())===a&&(d="我的位置",r.center_rank=1,r.nb_x=i.getMyPointX(),r.nb_y=i.getMyPointY()),c.center_name=d,{module:e,action:o,query:r,pageState:c}}}});