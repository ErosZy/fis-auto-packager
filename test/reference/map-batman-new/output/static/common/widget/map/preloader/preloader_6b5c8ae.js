define("common:widget/map/preloader/preloader.js",function(e,i,n){function t(){var e=window._APP_HASH||{},i=e.module,n=e.action,t=e.page;return"index"===i&&"index"===n?r[i+"_"+n+"_"+t]:r[i+"_"+n]}function o(e){var i=t()||0;return[1,2,3].indexOf(i)>=0?{zoom:l.getLevel(),center:{lng:l.getPointX(),lat:l.getPointY()}}:c.getViewport(e)}function a(e){if(d(e)){var i=c.getMapSize(),n=o(),t=n.center,a=n.zoom;t&&a&&tileloader.loadTiles(t,a,{mapWidth:i.width,mapHeight:i.height})}}function d(e){var i=window._APP_HASH||{},n=(i.module,i.action,i.page),o=parseInt(window._WISE_INFO.netype,10)||0,a=p.isSinglePageApp()?1:2,d=t()||0,l=m[e]||{};return!/map/.test(n)&&l.nettype.indexOf(o)>=0&&l.apptype.indexOf(a)>=0&&l.pageid.indexOf(d)>=0}var p=(e("common:static/js/util.js"),e("common:widget/pagemgr/pagemgr.js")),l=e("common:widget/geolocation/location.js"),c=e("common:widget/map/preloader/helper.js");tileloader=e("common:widget/map/preloader/tileloader.js");var r={index_index_map:1,index_index_index:2,index_index_navline:3,place_list:4,place_detail:5,transit_detail:6,drive_list:7,walk_list:8},m={geolocation:{pageid:[2,3],nettype:[0,1,2,3],apptype:[1,2]},onload:{pageid:[2,3,4,5,6,7,8],nettype:[0,1,2,3],apptype:[1,2]},switchend:{pageid:[2,3,4,5,6,7,8],nettype:[0,1,2,3],apptype:[1]},mapclick:{pageid:[2,3,4,5,6,7,8],nettype:[0,1,2,3],apptype:[1]}};n.exports={_initialized:!1,init:function(){this.bindEvent(),e.async(["common:widget/api/api.js","common:widget/api/ext/tfcinfowindow.js"]),e("common:widget/map/preloader/plugin.js").getVectorMdl(),this._initialized=!0},loadTiles:function(e){a(e)},bindEvent:function(){if(!this._initialized){$(window).on("load",function(){a("onload")});var e={};listener.on("common.page","switchend",function(i,n){e[n.eid]=1}),listener.on("common.page","pageloaded",function(i,n){e[n.eid]&&(a("switchend"),delete e[n.eid])}),listener.on("common.geolocation","success",function(){a("geolocation")},this)}}}});