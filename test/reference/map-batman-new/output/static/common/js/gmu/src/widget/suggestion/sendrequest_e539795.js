define("common:static/js/gmu/src/widget/suggestion/sendrequest.js",function(e){e("common:static/js/gmu/src/widget/suggestion/suggestion.js");var n=e("common:widget/geolocation/location.js");!function(e,t){e.extend(gmu.Suggestion.options,{isCache:!0,queryKey:"wd",cbKey:"cb",sendrequest:null,beforesendrequest:null}),gmu.Suggestion.option("sendrequest",function(){return"function"!==e.type(this._options.sendrequest)},function(){var o,i=this,s=i._options,u=s.queryKey,c=s.cbKey,g=(s.param,s.isCache);this.on("sendrequest",function(a,r,m,d){var p=n.getCityCode()||1,f={},y="";n.hasExactPoi()&&(f.minX=n.getPointX()-5e3,f.minY=n.getPointY()-5e3,f.maxX=n.getPointX()+5e3,f.maxY=n.getPointY()+5e3,y="("+f.minX+","+f.minY+";"+f.maxX+","+f.maxY+")");var l="cid="+p+"&b="+y+"&type=0&newmap=1&ie=utf-8",q=s.source,w="suggestion_"+ +new Date;return g&&(o=d(r))?(m(r,o),i):(q=(q+"&"+u+"="+encodeURIComponent(r)).replace(/[&?]{1,2}/,"?"),!~q.indexOf("&"+c)&&(q+="&"+c+"="+w),l&&(q+="&"+l),t[w]=function(e){m(r,e.s),g&&d(r,e.s),delete t[w]},e.ajax({url:q,dataType:"jsonp"}),i)})})}(gmu.$,window)});