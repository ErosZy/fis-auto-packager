define("place:widget/selectlist/selectlist.js",function(e,t,n){var i=e("common:widget/geolocation/location.js"),c=e("common:widget/url/url.js"),a=e("common:static/js/util.js"),o=e("common:widget/setcity/setcity.js");n.exports.init=function(e){l(e),y()};var r,d="     ",l=function(e){r=e},y=function(){$list=$(".place-widget-selectlist"),$list.on("click","li",s)},s=function(){var e=$(this),t=+e.data("i")-1;u(t)},u=function(e){if("undefined"!=typeof e){var t=r.list[e],n=c.get(),i=n.pageState,a=m(t),d=i.refer_pagestate,l=i.refer_query;l&&"undefined"!=l?(g(a,!1),p(t,{referQuery:l,referPageState:d})):(g(a),a.isExactPoi||3===a.addr.cityType?c.toIndex({cache:!1}):o.setAndRedirect(a.addr.city,a.addr.cityCode))}},p=function(e,t){var n,i,a=c.get(),o=t||{},l=(a.pageState||{},JSON.parse(o.referQuery)||{}),y=JSON.parse(o.referPageState)||{},s="wm"===l.qt||"takeout"===y.search,u=r.city;l.wd&&l.wd.split(d)[1]&&(l.wd=l.wd.split(d)[1]),l.c=u.code,i=_(),n=s?x(e,l):v(e,l),y=$.extend(y,{center_name:e.name||""}),delete y.i,c.update({module:n.module,action:n.action,query:n.query,pageState:y},{queryReplace:!0,pageStateReplace:!0})},m=function(e){if(e){var t,n=(_(),r.city,a.geoToPoint(e.geo)),i=f(e);return t={addr:i,isExactPoi:i.isExactPoi,point:{x:n.lng,y:n.lat}}}},g=function(e){e&&(e.isSaveLocInCookie=!0,i.setAddress(e))},f=function(e){var t,n,i=r.city;cityName=i.name,e.cname?(name=e.pcname?e.pcname+e.cname:e.cname,n=!1):(name=e.name,n=!0);var c=null;return 3===e.city_type&&(c=i.up_cityid),t={address:name,city:cityName,cityCode:e.code?e.code:i.code,isExactPoi:n,cityType:e.city_type?e.city_type:i.type,upCityCode:e.pccode?e.pccode:c}},_=function(){return r.type},x=function(e,t){var n,i=_();return 2!=i?(n=a.geoToPoint(e.geo),t.pointX1=n.lng,t.pointY1=n.lat,t.nb_x=n.lng,t.nb_y=n.lat,t.center_rank=1,t.m="searchXY"):(t.m="searchBrands",delete t.pointX1,delete t.pointY1,delete t.center_rank,delete t.nb_x,delete t.nb_y),t=$.extend(t,{cityId:e.addr.cityCode,directId:e.addr.cityCode,pageNum:1,pageSize:10}),{query:t,module:"place",action:"takeout"}},v=function(e,t){var n,i=_();return 2!=i?(n=a.geoToPoint(e.geo),t.nb_x=n.lng,t.nb_y=n.lat,t.center_rank=1):(delete t.nb_x,delete t.nb_y,delete t.center_rank,delete t.pointX1,delete t.pointY1),t=$.extend(t,{c:e.addr.cityCode,center_rank:1,pn:0}),{query:t,module:"search",action:"search"}}});