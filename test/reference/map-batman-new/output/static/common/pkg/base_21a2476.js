var require,define;!function(e){function t(e,t,r){function n(t,r){var n=new window.XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState){if(200!=n.status)throw new Error("A unkown error occurred.");i=n.responseText;var a=o.getItem(e);a&&o.removeItem(a),o.setItem(t,i),o.setItem(e,t),r(i)}},n.open("get",t),n.send(null)}var i,o=localStorage;(i=o.getItem(t))?(o.getItem(e)||o.setItem(e,t),r(i)):n(t,r)}function r(e,t){if(!(e in s)){s[e]=!0;var r=document.createElement("script");if(t){var n=setTimeout(t,require.timeout);r.onerror=function(){clearTimeout(n),t()},r.onreadystatechange=function(){"complete"==this.readyState&&clearTimeout(n)}}return r.type="text/javascript",r.src=e,i.appendChild(r),r}}function n(e,n,a){var u=o[e]||(o[e]=[]);u.push(n);var p,l=c[e]||{},d=l.pkg;p=d?f[d].url:l.url||e,window.XMLHttpRequest?p in s||(s[p]=!0,t(e,p,function(e){script=document.createElement("script"),script.type="text/javascript",script.innerHTML=e,i.appendChild(script)})):r(p,a&&function(){a(e)})}var i=document.getElementsByTagName("head")[0],o={},a={},u={},s={},c={},f={};define=function(e,t){a[e]=t;var r=o[e];if(r){for(var n=r.length-1;n>=0;--n)r[n]();delete o[e]}},require=function(e){e=require.alias(e);var t=u[e];if(t)return t.exports;var r=a[e];if(!r)throw Error("Cannot find module `"+e+"`");t=u[e]={exports:{}};var n="function"==typeof r?r.apply(t,[require,t.exports,t]):r;return n&&(t.exports=n),t.exports},require.async=function(t,r,i){function o(e){for(var t=e.length-1;t>=0;--t){var r=e[t];if(!(r in a||r in f)){f[r]=!0,p++,n(r,u,i);var s=c[r];s&&"deps"in s&&o(s.deps)}}}function u(){if(0==p--){var n,i,o=[];for(n=0,i=t.length;i>n;++n)o[n]=require(t[n]);r&&r.apply(e,o)}}"string"==typeof t&&(t=[t]);for(var s=t.length-1;s>=0;--s)t[s]=require.alias(t[s]);var f={},p=0;o(t),u()},require.resourceMap=function(e){var t,r;r=e.res;for(t in r)r.hasOwnProperty(t)&&(c[t]=r[t]);r=e.pkg;for(t in r)r.hasOwnProperty(t)&&(f[t]=r[t])},require.loadJs=function(e){r(e)},require.loadCss=function(e){if(e.content){var t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e.content:t.innerHTML=e.content,i.appendChild(t)}else if(e.url){var r=document.createElement("link");r.href=e.url,r.rel="stylesheet",r.type="text/css",i.appendChild(r)}},require.alias=function(e){return e},require.timeout=5e3,define.amd={jQuery:!0,version:"1.0.0"}}(this);
;!function(t){String.prototype.trim===t&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.reduce===t&&(Array.prototype.reduce=function(e){if(void 0===this||null===this)throw new TypeError;var n,i=Object(this),r=i.length>>>0,o=0;if("function"!=typeof e)throw new TypeError;if(0==r&&1==arguments.length)throw new TypeError;if(arguments.length>=2)n=arguments[1];else for(;;){if(o in i){n=i[o++];break}if(++o>=r)throw new TypeError}for(;r>o;)o in i&&(n=e.call(t,n,i[o],o,i)),o++;return n})}();var Zepto=function(){function t(t){return null==t?String(t):Y[J.call(t)]||"object"}function e(e){return"function"==t(e)}function n(t){return null!=t&&t==t.window}function i(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function r(e){return"object"==t(e)}function o(t){return r(t)&&!n(t)&&t.__proto__==Object.prototype}function a(t){return t instanceof Array}function s(t){return"number"==typeof t.length}function u(t){return O.call(t,function(t){return null!=t})}function c(t){return t.length>0?S.fn.concat.apply([],t):t}function l(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function f(t){return t in D?D[t]:D[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function h(t,e){return"number"!=typeof e||$[l(t)]?e:e+"px"}function p(t){var e,n;return k[t]||(e=A.createElement(t),A.body.appendChild(e),n=_(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),k[t]=n),k[t]}function d(t){return"children"in t?C.call(t.children):S.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function m(t,e,n){for(T in e)n&&(o(e[T])||a(e[T]))?(o(e[T])&&!o(t[T])&&(t[T]={}),a(e[T])&&!a(t[T])&&(t[T]=[]),m(t[T],e[T],n)):e[T]!==E&&(t[T]=e[T])}function v(t,e){return e===E?S(t):S(t).filter(e)}function g(t,n,i,r){return e(n)?n.call(t,i,r):n}function y(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function b(t,e){var n=t.className,i=n&&n.baseVal!==E;return e===E?i?n.baseVal:n:(i?n.baseVal=e:t.className=e,void 0)}function w(t){var e;try{return t?"true"==t||("false"==t?!1:"null"==t?null:isNaN(e=Number(t))?/^[\[\{]/.test(t)?S.parseJSON(t):t:e):t}catch(n){return t}}function x(t,e){e(t);for(var n in t.childNodes)x(t.childNodes[n],e)}var E,T,S,P,j,N,M=[],C=M.slice,O=M.filter,A=window.document,k={},D={},_=A.defaultView.getComputedStyle,$={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},R=/^\s*<(\w+|!)[^>]*>/,Z=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,z=/^(?:body|html)$/i,L=["val","css","html","text","data","width","height","offset"],U=["after","prepend","before","append"],q=A.createElement("table"),F=A.createElement("tr"),B={tr:A.createElement("tbody"),tbody:q,thead:q,tfoot:q,td:F,th:F,"*":A.createElement("div")},I=/complete|loaded|interactive/,X=/^\.([\w-]+)$/,H=/^#([\w-]*)$/,V=/^[\w-]+$/,Y={},J=Y.toString,G={},W=A.createElement("div");return G.matches=function(t,e){if(!t||1!==t.nodeType)return!1;var n=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var i,r=t.parentNode,o=!r;return o&&(r=W).appendChild(t),i=~G.qsa(r,e).indexOf(t),o&&W.removeChild(t),i},j=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},N=function(t){return O.call(t,function(e,n){return t.indexOf(e)==n})},G.fragment=function(t,e,n){t.replace&&(t=t.replace(Z,"<$1></$2>")),e===E&&(e=R.test(t)&&RegExp.$1),e in B||(e="*");var i,r,a=B[e];return a.innerHTML=""+t,r=S.each(C.call(a.childNodes),function(){a.removeChild(this)}),o(n)&&(i=S(r),S.each(n,function(t,e){L.indexOf(t)>-1?i[t](e):i.attr(t,e)})),r},G.Z=function(t,e){return t=t||[],t.__proto__=S.fn,t.selector=e||"",t},G.isZ=function(t){return t instanceof G.Z},G.init=function(t,n){if(t){if(e(t))return S(A).ready(t);if(G.isZ(t))return t;var i;if(a(t))i=u(t);else if(r(t))i=[o(t)?S.extend({},t):t],t=null;else if(R.test(t))i=G.fragment(t.trim(),RegExp.$1,n),t=null;else{if(n!==E)return S(n).find(t);i=G.qsa(A,t)}return G.Z(i,t)}return G.Z()},S=function(t,e){return G.init(t,e)},S.extend=function(t){var e,n=C.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach(function(n){m(t,n,e)}),t},G.qsa=function(t,e){var n;return i(t)&&H.test(e)?(n=t.getElementById(RegExp.$1))?[n]:[]:1!==t.nodeType&&9!==t.nodeType?[]:C.call(X.test(e)?t.getElementsByClassName(RegExp.$1):V.test(e)?t.getElementsByTagName(e):t.querySelectorAll(e))},S.contains=function(t,e){return t!==e&&t.contains(e)},S.type=t,S.isFunction=e,S.isWindow=n,S.isArray=a,S.isPlainObject=o,S.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},S.inArray=function(t,e,n){return M.indexOf.call(e,t,n)},S.camelCase=j,S.trim=function(t){return t.trim()},S.uuid=0,S.support={},S.expr={},S.map=function(t,e){var n,i,r,o=[];if(s(t))for(i=0;i<t.length;i++)n=e(t[i],i),null!=n&&o.push(n);else for(r in t)n=e(t[r],r),null!=n&&o.push(n);return c(o)},S.each=function(t,e){var n,i;if(s(t)){for(n=0;n<t.length;n++)if(e.call(t[n],n,t[n])===!1)return t}else for(i in t)if(e.call(t[i],i,t[i])===!1)return t;return t},S.grep=function(t,e){return O.call(t,e)},window.JSON&&(S.parseJSON=JSON.parse),S.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Y["[object "+e+"]"]=e.toLowerCase()}),S.fn={forEach:M.forEach,reduce:M.reduce,push:M.push,sort:M.sort,indexOf:M.indexOf,concat:M.concat,map:function(t){return S(S.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return S(C.apply(this,arguments))},ready:function(t){return I.test(A.readyState)?t(S):A.addEventListener("DOMContentLoaded",function(){t(S)},!1),this},get:function(t){return t===E?C.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return M.every.call(this,function(e,n){return t.call(e,n,e)!==!1}),this},filter:function(t){return e(t)?this.not(this.not(t)):S(O.call(this,function(e){return G.matches(e,t)}))},add:function(t,e){return S(N(this.concat(S(t,e))))},is:function(t){return this.length>0&&G.matches(this[0],t)},not:function(t){var n=[];if(e(t)&&t.call!==E)this.each(function(e){t.call(this,e)||n.push(this)});else{var i="string"==typeof t?this.filter(t):s(t)&&e(t.item)?C.call(t):S(t);this.forEach(function(t){i.indexOf(t)<0&&n.push(t)})}return S(n)},has:function(t){return this.filter(function(){return r(t)?S.contains(this,t):S(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!r(t)?t:S(t)},last:function(){var t=this[this.length-1];return t&&!r(t)?t:S(t)},find:function(t){var e,n=this;return e="object"==typeof t?S(t).filter(function(){var t=this;return M.some.call(n,function(e){return S.contains(e,t)})}):1==this.length?S(G.qsa(this[0],t)):this.map(function(){return G.qsa(this,t)})},closest:function(t,e){var n=this[0],r=!1;for("object"==typeof t&&(r=S(t));n&&!(r?r.indexOf(n)>=0:G.matches(n,t));)n=n!==e&&!i(n)&&n.parentNode;return S(n)},parents:function(t){for(var e=[],n=this;n.length>0;)n=S.map(n,function(t){return(t=t.parentNode)&&!i(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return v(e,t)},parent:function(t){return v(N(this.pluck("parentNode")),t)},children:function(t){return v(this.map(function(){return d(this)}),t)},contents:function(){return this.map(function(){return C.call(this.childNodes)})},siblings:function(t){return v(this.map(function(t,e){return O.call(d(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return S.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=null),"none"==_(this,"").getPropertyValue("display")&&(this.style.display=p(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var n=e(t);if(this[0]&&!n)var i=S(t).get(0),r=i.parentNode||this.length>1;return this.each(function(e){S(this).wrapAll(n?t.call(this,e):r?i.cloneNode(!0):i)})},wrapAll:function(t){if(this[0]){S(this[0]).before(t=S(t));for(var e;(e=t.children()).length;)t=e.first();S(t).append(this)}return this},wrapInner:function(t){var n=e(t);return this.each(function(e){var i=S(this),r=i.contents(),o=n?t.call(this,e):t;r.length?r.wrapAll(o):i.append(o)})},unwrap:function(){return this.parent().each(function(){S(this).replaceWith(S(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=S(this);(t===E?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return S(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return S(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return t===E?this.length>0?this[0].innerHTML:null:this.each(function(e){var n=this.innerHTML;S(this).empty().append(g(this,t,e,n))})},text:function(t){return t===E?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=t})},attr:function(t,e){var n;return"string"==typeof t&&e===E?0==this.length||1!==this[0].nodeType?E:"value"==t&&"INPUT"==this[0].nodeName?this.val():!(n=this[0].getAttribute(t))&&t in this[0]?this[0][t]:n:this.each(function(n){if(1===this.nodeType)if(r(t))for(T in t)y(this,T,t[T]);else y(this,t,g(this,e,n,this.getAttribute(t)))})},removeAttr:function(t){return this.each(function(){1===this.nodeType&&y(this,t)})},prop:function(t,e){return e===E?this[0]&&this[0][t]:this.each(function(n){this[t]=g(this,e,n,this[t])})},data:function(t,e){var n=this.attr("data-"+l(t),e);return null!==n?w(n):E},val:function(t){return t===E?this[0]&&(this[0].multiple?S(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(e){this.value=g(this,t,e,this.value)})},offset:function(t){if(t)return this.each(function(e){var n=S(this),i=g(this,t,e,n.offset()),r=n.offsetParent().offset(),o={top:i.top-r.top,left:i.left-r.left};"static"==n.css("position")&&(o.position="relative"),n.css(o)});if(0==this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,n){if(arguments.length<2&&"string"==typeof e)return this[0]&&(this[0].style[j(e)]||_(this[0],"").getPropertyValue(e));var i="";if("string"==t(e))n||0===n?i=l(e)+":"+h(e,n):this.each(function(){this.style.removeProperty(l(e))});else for(T in e)e[T]||0===e[T]?i+=l(T)+":"+h(T,e[T])+";":this.each(function(){this.style.removeProperty(l(T))});return this.each(function(){this.style.cssText+=";"+i})},index:function(t){return t?this.indexOf(S(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return M.some.call(this,function(t){return this.test(b(t))},f(t))},addClass:function(t){return this.each(function(e){P=[];var n=b(this),i=g(this,t,e,n);i.split(/\s+/g).forEach(function(t){S(this).hasClass(t)||P.push(t)},this),P.length&&b(this,n+(n?" ":"")+P.join(" "))})},removeClass:function(t){return this.each(function(e){return t===E?b(this,""):(P=b(this),g(this,t,e,P).split(/\s+/g).forEach(function(t){P=P.replace(f(t)," ")}),b(this,P.trim()),void 0)})},toggleClass:function(t,e){return this.each(function(n){var i=S(this),r=g(this,t,n,b(this));r.split(/\s+/g).forEach(function(t){(e===E?!i.hasClass(t):e)?i.addClass(t):i.removeClass(t)})})},scrollTop:function(){return this.length?"scrollTop"in this[0]?this[0].scrollTop:this[0].scrollY:void 0},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),n=this.offset(),i=z.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(S(t).css("margin-top"))||0,n.left-=parseFloat(S(t).css("margin-left"))||0,i.top+=parseFloat(S(e[0]).css("border-top-width"))||0,i.left+=parseFloat(S(e[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||A.body;t&&!z.test(t.nodeName)&&"static"==S(t).css("position");)t=t.offsetParent;return t})}},S.fn.detach=S.fn.remove,["width","height"].forEach(function(t){S.fn[t]=function(e){var r,o=this[0],a=t.replace(/./,function(t){return t[0].toUpperCase()});return e===E?n(o)?o["inner"+a]:i(o)?o.documentElement["offset"+a]:(r=this.offset())&&r[t]:this.each(function(n){o=S(this),o.css(t,g(this,e,n,o[t]()))})}}),U.forEach(function(e,n){var i=n%2;S.fn[e]=function(){var e,r,o=S.map(arguments,function(n){return e=t(n),"object"==e||"array"==e||null==n?n:G.fragment(n)}),a=this.length>1;return o.length<1?this:this.each(function(t,e){r=i?e:e.parentNode,e=0==n?e.nextSibling:1==n?e.firstChild:2==n?e:null,o.forEach(function(t){if(a)t=t.cloneNode(!0);else if(!r)return S(t).remove();x(r.insertBefore(t,e),function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},S.fn[i?e+"To":"insert"+(n?"Before":"After")]=function(t){return S(t)[e](this),this}}),G.Z.prototype=S.fn,G.uniq=N,G.deserializeValue=w,S.zepto=G,S}();window.Zepto=Zepto,"$"in window||(window.$=Zepto),function(t){function e(t){var e=this.os={},n=this.browser={},i=t.match(/WebKit\/([\d.]+)/),r=t.match(/(Android)\s+([\d.]+)/),o=t.match(/(iPad).*OS\s([\d_]+)/),a=!o&&t.match(/(iPhone\sOS)\s([\d_]+)/),s=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),u=s&&t.match(/TouchPad/),c=t.match(/Kindle\/([\d.]+)/),l=t.match(/Silk\/([\d._]+)/),f=t.match(/(BlackBerry).*Version\/([\d.]+)/),h=t.match(/(BB10).*Version\/([\d.]+)/),p=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),d=t.match(/PlayBook/),m=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),v=t.match(/Firefox\/([\d.]+)/);(n.webkit=!!i)&&(n.version=i[1]),r&&(e.android=!0,e.version=r[2]),a&&(e.ios=e.iphone=!0,e.version=a[2].replace(/_/g,".")),o&&(e.ios=e.ipad=!0,e.version=o[2].replace(/_/g,".")),s&&(e.webos=!0,e.version=s[2]),u&&(e.touchpad=!0),f&&(e.blackberry=!0,e.version=f[2]),h&&(e.bb10=!0,e.version=h[2]),p&&(e.rimtabletos=!0,e.version=p[2]),d&&(n.playbook=!0),c&&(e.kindle=!0,e.version=c[1]),l&&(n.silk=!0,n.version=l[1]),!l&&e.android&&t.match(/Kindle Fire/)&&(n.silk=!0),m&&(n.chrome=!0,n.version=m[1]),v&&(n.firefox=!0,n.version=v[1]),e.tablet=!!(o||d||r&&!t.match(/Mobile/)||v&&t.match(/Tablet/)),e.phone=!(e.tablet||!(r||a||s||f||h||m&&t.match(/Android/)||m&&t.match(/CriOS\/([\d.]+)/)||v&&t.match(/Mobile/)))}e.call(t,navigator.userAgent),t.__detect=e}(Zepto),function(t){function e(t){return t._zid||(t._zid=p++)}function n(t,n,o,a){if(n=i(n),n.ns)var s=r(n.ns);return(h[e(t)]||[]).filter(function(t){return!(!t||n.e&&t.e!=n.e||n.ns&&!s.test(t.ns)||o&&e(t.fn)!==e(o)||a&&t.sel!=a)})}function i(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function r(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function o(e,n,i){"string"!=t.type(e)?t.each(e,i):e.split(/\s/).forEach(function(t){i(t,n)})}function a(t,e){return t.del&&("focus"==t.e||"blur"==t.e)||!!e}function s(t){return m[t]||t}function u(n,r,u,c,l,f){var p=e(n),d=h[p]||(h[p]=[]);o(r,u,function(e,r){var o=i(e);o.fn=r,o.sel=c,o.e in m&&(r=function(e){var n=e.relatedTarget;return!n||n!==this&&!t.contains(this,n)?o.fn.apply(this,arguments):void 0}),o.del=l&&l(r,e);var u=o.del||r;o.proxy=function(t){var e=u.apply(n,[t].concat(t.data));return e===!1&&(t.preventDefault(),t.stopPropagation()),e},o.i=d.length,d.push(o),n.addEventListener(s(o.e),o.proxy,a(o,f))})}function c(t,i,r,u,c){var l=e(t);o(i||"",r,function(e,i){n(t,e,i,u).forEach(function(e){delete h[l][e.i],t.removeEventListener(s(e.e),e.proxy,a(e,c))})})}function l(e){var n,i={originalEvent:e};for(n in e)y.test(n)||void 0===e[n]||(i[n]=e[n]);return t.each(b,function(t,n){i[t]=function(){return this[n]=v,e[t].apply(e,arguments)},i[n]=g}),i}function f(t){if(!("defaultPrevented"in t)){t.defaultPrevented=!1;var e=t.preventDefault;t.preventDefault=function(){this.defaultPrevented=!0,e.call(this)}}}var h=(t.zepto.qsa,{}),p=1,d={},m={mouseenter:"mouseover",mouseleave:"mouseout"};d.click=d.mousedown=d.mouseup=d.mousemove="MouseEvents",t.event={add:u,remove:c},t.proxy=function(n,i){if(t.isFunction(n)){var r=function(){return n.apply(i,arguments)};return r._zid=e(n),r}if("string"==typeof i)return t.proxy(n[i],n);throw new TypeError("expected function")},t.fn.bind=function(t,e){return this.each(function(){u(this,t,e)})},t.fn.unbind=function(t,e){return this.each(function(){c(this,t,e)})},t.fn.one=function(t,e){return this.each(function(n,i){u(this,t,e,null,function(t,e){return function(){var n=t.apply(i,arguments);return c(i,e,t),n}})})};var v=function(){return!0},g=function(){return!1},y=/^([A-Z]|layer[XY]$)/,b={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(e,n,i){return this.each(function(r,o){u(o,n,i,e,function(n){return function(i){var r,a=t(i.target).closest(e,o).get(0);return a?(r=t.extend(l(i),{currentTarget:a,liveFired:o}),n.apply(a,[r].concat([].slice.call(arguments,1)))):void 0}})})},t.fn.undelegate=function(t,e,n){return this.each(function(){c(this,e,n,t)})},t.fn.live=function(e,n){return t(document.body).delegate(this.selector,e,n),this},t.fn.die=function(e,n){return t(document.body).undelegate(this.selector,e,n),this},t.fn.on=function(e,n,i){return!n||t.isFunction(n)?this.bind(e,n||i):this.delegate(n,e,i)},t.fn.off=function(e,n,i){return!n||t.isFunction(n)?this.unbind(e,n||i):this.undelegate(n,e,i)},t.fn.trigger=function(e,n){return("string"==typeof e||t.isPlainObject(e))&&(e=t.Event(e)),f(e),e.data=n,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(e)})},t.fn.triggerHandler=function(e,i){var r,o;return this.each(function(a,s){r=l("string"==typeof e?t.Event(e):e),r.data=i,r.target=s,t.each(n(s,e.type||e),function(t,e){return o=e.proxy(r),r.isImmediatePropagationStopped()?!1:void 0})}),o},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.trigger(e)}}),["focus","blur"].forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.each(function(){try{this[e]()}catch(t){}}),this}}),t.Event=function(t,e){"string"!=typeof t&&(e=t,t=e.type);var n=document.createEvent(d[t]||"Events"),i=!0;if(e)for(var r in e)"bubbles"==r?i=!!e[r]:n[r]=e[r];return n.initEvent(t,i,!0,null,null,null,null,null,null,null,null,null,null,null,null),n.isDefaultPrevented=function(){return this.defaultPrevented},n}}(Zepto),function(t){function e(e,n,i){var r=t.Event(n);return t(e).trigger(r,i),!r.defaultPrevented}function n(t,n,i,r){return t.global?e(n||y,i,r):void 0}function i(e){e.global&&0===t.active++&&n(e,null,"ajaxStart")}function r(e){e.global&&!--t.active&&n(e,null,"ajaxStop")}function o(t,e){var i=e.context;return e.beforeSend.call(i,t,e)===!1||n(e,i,"ajaxBeforeSend",[t,e])===!1?!1:(n(e,i,"ajaxSend",[t,e]),void 0)}function a(t,e,i){var r=i.context,o="success";i.success.call(r,t,o,e),n(i,r,"ajaxSuccess",[e,i,t]),u(o,e,i)}function s(t,e,i,r){var o=r.context;r.error.call(o,i,e,t),n(r,o,"ajaxError",[i,r,t]),u(e,i,r)}function u(t,e,i){var o=i.context;i.complete.call(o,e,t),n(i,o,"ajaxComplete",[e,i]),r(i)}function c(){}function l(t){return t&&(t=t.split(";",2)[0]),t&&(t==T?"html":t==E?"json":w.test(t)?"script":x.test(t)&&"xml")||"text"}function f(t,e){return(t+"&"+e).replace(/[&?]{1,2}/,"?")}function h(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=f(e.url,e.data))}function p(e,n,i,r){var o=!t.isFunction(n);return{url:e,data:o?n:void 0,success:o?t.isFunction(i)?i:void 0:n,dataType:o?r||i:i}}function d(e,n,i,r){var o,a=t.isArray(n);t.each(n,function(n,s){o=t.type(s),r&&(n=i?r:r+"["+(a?"":n)+"]"),!r&&a?e.add(s.name,s.value):"array"==o||!i&&"object"==o?d(e,s,i,n):e.add(n,s)})}var m,v,g=0,y=window.document,b=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,w=/^(?:text|application)\/javascript/i,x=/^(?:text|application)\/xml/i,E="application/json",T="text/html",S=/^\s*$/;t.active=0,t.ajaxJSONP=function(e){if(!("type"in e))return t.ajax(e);var n,i="jsonp"+ ++g,r=y.createElement("script"),u=function(){clearTimeout(n),t(r).remove(),delete window[i]},l=function(t){u(),t&&"timeout"!=t||(window[i]=c),s(null,t||"abort",f,e)},f={abort:l};return o(f,e)===!1?(l("abort"),!1):(window[i]=function(t){u(),a(t,f,e)},r.onerror=function(){l("error")},r.src=e.url.replace(/=\?/,"="+i),t("head").append(r),e.timeout>0&&(n=setTimeout(function(){l("timeout")},e.timeout)),f)},t.ajaxSettings={type:"GET",beforeSend:c,success:c,error:c,complete:c,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:E,xml:"application/xml, text/xml",html:T,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.ajax=function(e){var n=t.extend({},e||{});for(m in t.ajaxSettings)void 0===n[m]&&(n[m]=t.ajaxSettings[m]);i(n),n.crossDomain||(n.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(n.url)&&RegExp.$2!=window.location.host),n.url||(n.url=window.location.toString()),h(n),n.cache===!1&&(n.url=f(n.url,"_="+Date.now()));var r=n.dataType,u=/=\?/.test(n.url);if("jsonp"==r||u)return u||(n.url=f(n.url,"callback=?")),t.ajaxJSONP(n);var p,d=n.accepts[r],g={},y=/^([\w-]+:)\/\//.test(n.url)?RegExp.$1:window.location.protocol,b=n.xhr();n.crossDomain||(g["X-Requested-With"]="XMLHttpRequest"),d&&(g.Accept=d,d.indexOf(",")>-1&&(d=d.split(",",2)[0]),b.overrideMimeType&&b.overrideMimeType(d)),(n.contentType||n.contentType!==!1&&n.data&&"GET"!=n.type.toUpperCase())&&(g["Content-Type"]=n.contentType||"application/x-www-form-urlencoded"),n.headers=t.extend(g,n.headers||{}),b.onreadystatechange=function(){if(4==b.readyState){b.onreadystatechange=c,clearTimeout(p);var e,i=!1;if(b.status>=200&&b.status<300||304==b.status||0==b.status&&"file:"==y){r=r||l(b.getResponseHeader("content-type")),e=b.responseText;try{"script"==r?(1,eval)(e):"xml"==r?e=b.responseXML:"json"==r&&(e=S.test(e)?null:t.parseJSON(e))}catch(o){i=o}i?s(i,"parsererror",b,n):a(e,b,n)}else s(null,b.status?"error":"abort",b,n)}};var w="async"in n?n.async:!0;b.open(n.type,n.url,w);for(v in n.headers)b.setRequestHeader(v,n.headers[v]);return o(b,n)===!1?(b.abort(),!1):(n.timeout>0&&(p=setTimeout(function(){b.onreadystatechange=c,b.abort(),s(null,"timeout",b,n)},n.timeout)),b.send(n.data?n.data:null),b)},t.get=function(){return t.ajax(p.apply(null,arguments))},t.post=function(){var e=p.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=p.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,n,i){if(!this.length)return this;var r,o=this,a=e.split(/\s/),s=p(e,n,i),u=s.success;return a.length>1&&(s.url=a[0],r=a[1]),s.success=function(e){o.html(r?t("<div>").html(e.replace(b,"")).find(r):e),u&&u.apply(o,arguments)},t.ajax(s),this};var P=encodeURIComponent;t.param=function(t,e){var n=[];return n.add=function(t,e){this.push(P(t)+"="+P(e))},d(n,t,e),n.join("&").replace(/%20/g,"+")}}(Zepto),function(t){t.fn.serializeArray=function(){var e,n=[];return t(Array.prototype.slice.call(this.get(0).elements)).each(function(){e=t(this);var i=e.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&("radio"!=i&&"checkbox"!=i||this.checked)&&n.push({name:e.attr("name"),value:e.val()})}),n},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(e)this.bind("submit",e);else if(this.length){var n=t.Event("submit");this.eq(0).trigger(n),n.defaultPrevented||this.get(0).submit()}return this}}(Zepto),function(t,e){function n(t){return i(t.replace(/([a-z])([A-Z])/,"$1-$2"))}function i(t){return t.toLowerCase()}function r(t){return o?o+t:i(t)}var o,a,s,u,c,l,f,h,p="",d={Webkit:"webkit",Moz:"",O:"o",ms:"MS"},m=window.document,v=m.createElement("div"),g=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,y={};t.each(d,function(t,n){return v.style[t+"TransitionProperty"]!==e?(p="-"+i(t)+"-",o=n,!1):void 0}),a=p+"transform",y[s=p+"transition-property"]=y[u=p+"transition-duration"]=y[c=p+"transition-timing-function"]=y[l=p+"animation-name"]=y[f=p+"animation-duration"]=y[h=p+"animation-timing-function"]="",t.fx={off:o===e&&v.style.transitionProperty===e,speeds:{_default:400,fast:200,slow:600},cssPrefix:p,transitionEnd:r("TransitionEnd"),animationEnd:r("AnimationEnd")},t.fn.animate=function(e,n,i,r){return t.isPlainObject(n)&&(i=n.easing,r=n.complete,n=n.duration),n&&(n=("number"==typeof n?n:t.fx.speeds[n]||t.fx.speeds._default)/1e3),this.anim(e,n,i,r)},t.fn.anim=function(i,r,o,p){var d,m,v,b={},w="",x=this,E=t.fx.transitionEnd;if(r===e&&(r=.4),t.fx.off&&(r=0),"string"==typeof i)b[l]=i,b[f]=r+"s",b[h]=o||"linear",E=t.fx.animationEnd;else{m=[];for(d in i)g.test(d)?w+=d+"("+i[d]+") ":(b[d]=i[d],m.push(n(d)));w&&(b[a]=w,m.push(a)),r>0&&"object"==typeof i&&(b[s]=m.join(", "),b[u]=r+"s",b[c]=o||"linear")}return v=function(e){if("undefined"!=typeof e){if(e.target!==e.currentTarget)return;t(e.target).unbind(E,v)}t(this).css(y),p&&p.call(this)},r>0&&this.bind(E,v),this.size()&&this.get(0).clientLeft,this.css(b),0>=r&&setTimeout(function(){x.each(function(){v.call(this)})},0),this},v=null}(Zepto),function(t){function e(t,e,n,i){return Math.abs(t-e)>=Math.abs(n-i)?t-e>0?"Left":"Right":n-i>0?"Up":"Down"}function n(){c=null,f.last&&(f.el.trigger("longTap"),f={})}function i(){c&&clearTimeout(c),c=null}function r(){a&&clearTimeout(a),s&&clearTimeout(s),u&&clearTimeout(u),c&&clearTimeout(c),a=s=u=c=null,f={}}function o(t){return t.pointerType==t.MSPOINTER_TYPE_TOUCH&&t.isPrimary}var a,s,u,c,l,f={},h=750;t(document).ready(function(){var p,d,m,v=0,g=0;"MSGesture"in window&&(l=new MSGesture,l.target=document.body),t(document).bind("MSGestureEnd",function(t){var e=t.velocityX>1?"Right":t.velocityX<-1?"Left":t.velocityY>1?"Down":t.velocityY<-1?"Up":null;e&&(f.el.trigger("swipe"),f.el.trigger("swipe"+e))}).on("touchstart MSPointerDown",function(e){("MSPointerDown"!=e.type||o(e))&&(m="MSPointerDown"==e.type?e:e.touches[0],p=Date.now(),d=p-(f.last||p),f.el=t("tagName"in m.target?m.target:m.target.parentNode),a&&clearTimeout(a),f.x1=m.pageX,f.y1=m.pageY,d>0&&250>=d&&(f.isDoubleTap=!0),f.last=p,c=setTimeout(n,h),l&&"MSPointerDown"==e.type&&l.addPointer(e.pointerId))}).on("touchmove MSPointerMove",function(t){("MSPointerMove"!=t.type||o(t))&&(m="MSPointerMove"==t.type?t:t.touches[0],i(),f.x2=m.pageX,f.y2=m.pageY,v+=Math.abs(f.x1-f.x2),g+=Math.abs(f.y1-f.y2))}).on("touchend MSPointerUp",function(n){("MSPointerUp"!=n.type||o(n))&&(i(),f.x2&&Math.abs(f.x1-f.x2)>30||f.y2&&Math.abs(f.y1-f.y2)>30?u=setTimeout(function(){f.el.trigger("swipe"),f.el.trigger("swipe"+e(f.x1,f.x2,f.y1,f.y2)),f={}},0):"last"in f&&(30>v&&30>g?s=setTimeout(function(){var e=t.Event("tap");e.cancelTouch=r,f.el.trigger(e),f.isDoubleTap?(f.el.trigger("doubleTap"),f={}):a=setTimeout(function(){a=null,f.el.trigger("singleTap"),f={}},250)},0):f={}),v=g=0)}).on("touchcancel MSPointerCancel",r),t(window).on("scroll",r)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(e){t.fn[e]=function(t){return this.on(e,t)}})}(Zepto);
;window.listener=window.listener||function(){var n=50,t=25,e={},r=[].slice,a={},c=function(n,t,r,c){var o=a[n];o||(o=a[n]={}),o[t]=o[t]||[],o[t].push({func:r,context:c||e})},o=function(n,t,r,a){var o=function(){return e.off(n,t,o),r.apply(a||e,arguments)};c(n,t,o,a)},f=function(e,c){if(a[e]&&a[e][c]&&a[e][c].length){for(var o=a[e][c],f=[],i=o.length;i--;)f.push({handler:o[i],args:r.call(arguments,1)});!function(){var e=+new Date;do{var r=f.shift(),a=r.handler;try{a.func.apply(a.context,r.args)}catch(c){}}while(f.length&&+new Date-e<n);f.length>0&&setTimeout(arguments.callee,t)}()}},i=function(n,t,r,c){if(c=c||e,a[n]&&a[n][t]&&a[n][t].length)for(var o,f=a[n][t],i=f.length;i--;)o=f[i],o.func===r&&o.context===c&&f.splice(i,1)};return e.on=c,e.once=o,e.trigger=f,e.off=i,e}();
;window.baidu=window.baidu||{},baidu.template=baidu.template||{},baidu.template._encodeHTML=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"&#92;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},baidu.template._encodeEventHTML=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\\\\/g,"\\").replace(/\\\//g,"/").replace(/\\n/g,"\n").replace(/\\r/g,"\r")};
;define("common:static/js/gmu/src/core/gmu.js",function(){window.gmu=window.gmu||{version:"2.1.2",$:window.Zepto,staticCall:function(n){var t=n.fn,o=[].slice,e=n();return e.length=1,function(n,i){return e[0]=n,t[i].apply(e,o.call(arguments,2))}}(Zepto)}});
;define("common:static/js/gmu/src/core/event.js",function(t){t("common:static/js/gmu/src/core/gmu.js"),function(t,n){function e(t,n,e){(t||"").split(c).forEach(function(t){e(t,n)})}function i(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function s(t){var n=(""+t).split(".");return{e:n[0],ns:n.slice(1).sort().join(" ")}}function r(t,n,e,r){var o,u;return u=s(n),u.ns&&(o=i(u.ns)),t.filter(function(t){return!(!t||u.e&&t.e!==u.e||u.ns&&!o.test(t.ns)||e&&t.cb!==e&&t.cb._cb!==e||r&&t.ctx!==r)})}function o(t,e){return this instanceof o?(e&&n.extend(this,e),this.type=t,this):new o(t,e)}var u=[].slice,c=/\s+/,f=function(){return!1},a=function(){return!0};o.prototype={isDefaultPrevented:f,isPropagationStopped:f,preventDefault:function(){this.isDefaultPrevented=a},stopPropagation:function(){this.isPropagationStopped=a}},t.event={on:function(t,n,i){var r,o=this;return n?(r=this._events||(this._events=[]),e(t,n,function(t,n){var e=s(t);e.cb=n,e.ctx=i,e.ctx2=i||o,e.id=r.length,r.push(e)}),this):this},one:function(t,n,i){var s=this;return n?(e(t,n,function(t,n){var e=function(){return s.off(t,e),n.apply(i||s,arguments)};e._cb=n,s.on(t,e,i)}),this):this},off:function(t,n,i){var s=this._events;return s?t||n||i?(e(t,n,function(t,n){r(s,t,n,i).forEach(function(t){delete s[t.id]})}),this):(this._events=[],this):this},trigger:function(t){var n,e,i,s,c,f=-1;if(!this._events||!t)return this;if("string"==typeof t&&(t=new o(t)),n=u.call(arguments,1),t.args=n,n.unshift(t),e=r(this._events,t.type))for(s=e.length;++f<s;)if((i=t.isPropagationStopped())||!1===(c=e[f]).cb.apply(c.ctx2,n)){i||(t.stopPropagation(),t.preventDefault());break}return this}},t.Event=o}(gmu,gmu.$)});
;define("common:static/js/gmu/src/extend/parseTpl.js",function(){!function(e){e.parseTpl=function(e,r){var n="var __p=[];with(obj||{}){__p.push('"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/<%=([\s\S]+?)%>/g,function(e,r){return"',"+r.replace(/\\'/,"'")+",'"}).replace(/<%([\s\S]+?)%>/g,function(e,r){return"');"+r.replace(/\\'/,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+'\');}return __p.join("");',p=new Function("obj",n);return r?p(r):p}}(Zepto)});
;define("common:static/js/gmu/src/core/widget.js",function(t){t("common:static/js/gmu/src/core/gmu.js"),t("common:static/js/gmu/src/core/event.js"),t("common:static/js/gmu/src/extend/parseTpl.js"),function(t,n,e){function r(t){return"[object Object]"===h.call(t)}function i(t,n){t&&Object.keys(t).forEach(function(e){n(e,t[e])})}function o(t){try{t="true"===t?!0:"false"===t?!1:"null"===t?null:+t+""===t?+t:/(?:\{[\s\S]*\}|\[[\s\S]*\])$/.test(t)?JSON.parse(t):t}catch(n){t=e}return t}function s(t){for(var n,r,i={},s=t&&t.attributes,u=s&&s.length;u--;)r=s[u],n=r.name,"data-"===n.substring(0,5)&&(n=n.substring(5),r=o(r.value),r===e||(i[n]=r));return i}function u(i){var o=i.substring(0,1).toLowerCase()+i.substring(1),s=n.fn[o];n.fn[o]=function(o){var s,u,a=g.call(arguments,1),c="string"==typeof o&&o;return n.each(this,function(l,f){if(u=y(f,i)||new t[i](f,r(o)?o:e),"this"===c)return s=u,!1;if(c){if(!n.isFunction(u[c]))throw new Error("组件没有此方法："+c);if(s=u[c].apply(u,a),s!==e&&s!==u)return!1;s=e}}),s!==e?s:this},n.fn[o].noConflict=function(){return n.fn[o]=s,this}}function a(t,e){var r=this;t.superClass&&a.call(r,t.superClass,e),i(y(t,"options"),function(t,i){i.forEach(function(i){var o=i[0],s=i[1];("*"===o||n.isFunction(o)&&o.call(r,e[t])||o===e[t])&&s.call(r)})})}function c(t,r){var o=this;t.superClass&&c.call(o,t.superClass,r),i(y(t,"plugins"),function(t,s){r[t]!==!1&&(i(s,function(t,r){var i;o[t]=n.isFunction(r)&&(i=o[t])?function(){var t,n=o.origin;return o.origin=i,t=r.apply(o,arguments),n===e?delete o.origin:o.origin=n,t}:r}),s._init.call(o))})}function l(){for(var t,e=g.call(arguments),i=e.length;i--;)t=t||e[i],r(e[i])||e.splice(i,1);return e.length?n.extend.apply(null,[!0,{}].concat(e)):t}function f(t,i,o,u,f){var p,g=this;return r(u)&&(f=u,u=e),f&&f.el&&(u=n(f.el)),u&&(g.$el=n(u),u=g.$el[0]),p=g._options=l(i.options,s(u),f),g.template=l(i.template,p.template),g.tpl2html=l(i.tpl2html,p.tpl2html),g.widgetName=t.toLowerCase(),g.eventNs="."+g.widgetName+o,g._init(p),g._options.setup=g.$el&&g.$el.parent()[0]?!0:!1,a.call(g,i,p),c.call(g,i,p),g._create(),g.trigger("ready"),u&&y(u,t,g)&&g.on("destroy",function(){y(u,t,null)}),g}function p(r,o,s){function u(t,n){if("Base"===r)throw new Error("Base类不能直接实例化");return this instanceof u?f.call(this,r,u,a++,t,n):new u(t,n)}"function"!=typeof s&&(s=t.Base);var a=1,c=1;return n.extend(u,{register:function(t,n){var e=y(u,"plugins")||y(u,"plugins",{});return n._init=n._init||m,e[t]=n,u},option:function(t,n,e){var r=y(u,"options")||y(u,"options",{});return r[t]||(r[t]=[]),r[t].push([n,e]),u},inherits:function(t){return p(r+"Sub"+c++,t,u)},extend:function(t){var n=u.prototype,r=s.prototype;v.forEach(function(n){t[n]=l(s[n],t[n]),t[n]&&(u[n]=t[n]),delete t[n]}),i(t,function(t,i){n[t]="function"==typeof i&&r[t]?function(){var n,o=this.$super;return this.$super=function(){var n=g.call(arguments,1);return r[t].apply(this,n)},n=i.apply(this,arguments),o===e?delete this.$super:this.$super=o,n}:i})}}),u.superClass=s,u.prototype=Object.create(s.prototype),u.extend(o),u}var g=[].slice,h=Object.prototype.toString,m=function(){},v=["options","template","tpl2html"],y=function(){var t={},n=0,r="_gid";return function(i,o,s){var u=i[r]||(i[r]=++n),a=t[u]||(t[u]={});return s!==e&&(a[o]=s),null===s&&delete a[o],a[o]}}(),d=t.event;t.define=function(n,e,r){t[n]=p(n,e,r),u(n)},t.isWidget=function(n,e){return e="string"==typeof e?t[e]||m:e,e=e||t.Base,n instanceof e},t.Base=p("Base",{_init:m,_create:m,getEl:function(){return this.$el},on:d.on,one:d.one,off:d.off,trigger:function(e){var r="string"==typeof e?new t.Event(e):e,i=[r].concat(g.call(arguments,1)),o=this._options[r.type],s=this.getEl();return o&&n.isFunction(o)&&!1===o.apply(this,i)&&(r.stopPropagation(),r.preventDefault()),d.trigger.apply(this,i),s&&s.triggerHandler(r,(i.shift(),i)),this},tpl2html:function(t,e){var r=this.template;return r="string"==typeof t?r[t]:(e=t,r),e||~r.indexOf("<%")?n.parseTpl(r,e):r},destroy:function(){this.$el&&this.$el.off(this.eventNs),this.trigger("destroy"),this.off(),this.destroyed=!0}},Object),n.ui=t}(gmu,gmu.$)});
;define("common:static/js/gmu/src/extend/detect.js",function(){!function(e,r){var i,t=r.userAgent,n=e.browser,o={qq:/MQQBrowser\/([\d.]+)/i,uc:/UCBrowser\/([\d.]+)/i,baidu:/baidubrowser\/.*?([\d.]+)/i};e.each(o,function(e,r){return(i=t.match(r))?(n[e]=!0,n.version=i[1],!1):void 0}),!n.uc&&/Uc/i.test(r.appVersion)&&(n.uc=!0)}(Zepto,navigator)});
;define("common:static/js/gmu/src/extend/matchMedia.js",function(){!function(n){n.matchMedia=function(){var i=0,t="gmu-media-detect",e=n.fx.transitionEnd,d=n.fx.cssPrefix,a=n("<style></style>").append("."+t+"{"+d+"transition: width 0.001ms; width: 0; position: absolute; top: -10000px;}\n").appendTo("head");return function(d){var o,c,s=t+i++,r=[];return a.append("@media "+d+" { #"+s+" { width: 1px; } }\n"),"matchMedia"in window?window.matchMedia(d):(o=n('<div class="'+t+'" id="'+s+'"></div>').appendTo("body").on(e,function(){c.matches=1===o.width(),n.each(r,function(i,t){n.isFunction(t)&&t.call(c,c)})}),c={matches:1===o.width(),media:d,addListener:function(n){return r.push(n),this},removeListener:function(n){var i=r.indexOf(n);return~i&&r.splice(i,1),this}})}}()}(Zepto)});
;define("common:static/js/gmu/src/extend/event.ortchange.js",function(e){e("common:static/js/gmu/src/extend/matchMedia.js"),$(function(){$.mediaQuery={ortchange:"screen and (width: "+window.innerWidth+"px)"},$.matchMedia($.mediaQuery.ortchange).addListener(function(){$(window).trigger("ortchange")})})});
;define("common:static/js/gmu/src/extend/throttle.js",function(){!function(t){t.extend(t,{throttle:function(o,n,e){function i(){function t(){r=Date.now(),n.apply(c,f)}function i(){u=void 0}var c=this,d=Date.now()-r,f=arguments;e&&!u&&t(),u&&clearTimeout(u),void 0===e&&d>o?t():u=setTimeout(e?i:t,void 0===e?o-d:o)}var u,r=0;return"function"!=typeof n&&(e=n,n=o,o=250),i._zid=n._zid=n._zid||t.proxy(n)._zid,i},debounce:function(o,n,e){return void 0===n?t.throttle(250,o,!1):t.throttle(o,n,void 0===e?!1:e!==!1)}})}(Zepto)});
;define("common:static/js/gmu/src/extend/event.scrollStop.js",function(o){o("common:static/js/gmu/src/extend/throttle.js"),function(o,t){function n(){o(t).on("scroll",o.debounce(80,function(){o(t).trigger("scrollStop")},!1))}function c(){o(t).off("scroll"),n()}n(),o(t).on("pageshow",function(n){n.persisted&&o(t).off("touchstart",c).one("touchstart",c)})}(Zepto,window)});
;define("common:static/js/gmu/src/extend/fix.js",function(t){t("common:static/js/gmu/src/extend/event.scrollStop.js"),t("common:static/js/gmu/src/extend/event.ortchange.js"),function(t,o){t.extend(t.fn,{fix:function(n){var i=this;if(i.attr("isFixed"))return i;i.css(n).css("position","fixed").attr("isFixed",!0);var e=t('<div style="position:fixed;top:10px;"></div>').appendTo("body"),s=e[0].getBoundingClientRect().top,d=function(){window.pageYOffset>0&&(e[0].getBoundingClientRect().top!==s&&(i.css("position","absolute"),c(),t(window).on("scrollStop",c),t(window).on("ortchange",c)),t(window).off("scrollStop",d),e.remove())},c=function(){i.css({top:window.pageYOffset+(n.bottom!==o?window.innerHeight-i.height()-n.bottom:n.top||0),left:n.right!==o?document.body.offsetWidth-i.width()-n.right:n.left||0}),"100%"==n.width&&i.css("width",document.body.offsetWidth)};return t(window).on("scrollStop",d),i}})}(Zepto)});
;define("common:static/js/gmu/src/extend/highlight.js",function(){!function(t){function o(){var t=c.attr("hl-cls");clearTimeout(n),c.removeClass(t).removeAttr("hl-cls"),c=null,h.off("touchend touchmove touchcancel",o)}var c,n,h=t(document);t.fn.highlight=function(e,i){return this.each(function(){var l=t(this);l.css("-webkit-tap-highlight-color","rgba(255,255,255,0)").off("touchstart.hl"),e&&l.on("touchstart.hl",function(s){var u;c=i?(u=t(s.target).closest(i,this))&&u.length&&u:l,c&&(c.attr("hl-cls",e),n=setTimeout(function(){c.addClass(e)},100),h.on("touchend touchmove touchcancel",o))})})}}(Zepto)});
;define("common:static/js/gmu/src/extend/imglazyload.js",function(e){e("common:static/js/gmu/src/extend/event.scrollStop.js"),e("common:static/js/gmu/src/extend/event.ortchange.js"),function(e){var t=[];e.fn.imglazyload=function(n){function r(e){var t=d?window:c.offset(),r=t[m.win[0]],i=t[m.win[1]];return r>=e[m.img[0]]-n.threshold-i&&r<=e[m.img[0]]+e[m.img[1]]}function i(r){var i=e(r),o={},a=i;g||(e.each(i.get(0).attributes,function(){~this.name.indexOf("data-")&&(o[this.name]=this.value)}),a=e("<img />").attr(o)),i.trigger("startload"),a.on("load",function(){!g&&i.replaceWith(a),i.trigger("loadcomplete"),a.off("load")}).on("error",function(){var n=e.Event("error");i.trigger(n),n.defaultPrevented||t.push(r),a.off("error").remove()}).attr("src",i.attr(n.urlName))}function o(){var n,o,a,c;for(n=t.length;n--;)o=e(c=t[n]),a=o.offset(),r(a)&&(l.call(t,n,1),i(c))}function a(){!g&&f&&e(t).append(f)}var l=Array.prototype.splice,n=e.extend({threshold:0,container:window,urlName:"data-url",placeHolder:"",eventName:"scrollStop",innerScroll:!1,isVertical:!0},n),c=e(n.container),s=n.isVertical,d=e.isWindow(c.get(0)),m={win:[s?"scrollY":"scrollX",s?"innerHeight":"innerWidth"],img:[s?"top":"left",s?"height":"width"]},f=e(n.placeHolder).length?e(n.placeHolder):null,g=e(this).is("img");return!d&&(m.win=m.img),t=Array.prototype.slice.call(e(t.reverse()).add(this),0).reverse(),e.isFunction(e.fn.imglazyload.detect)?(a(),this):(e(document).ready(function(){a(),o()}),!n.innerScroll&&e(window).on(n.eventName+" ortchange",function(){o()}),e.fn.imglazyload.detect=o,this)}}(Zepto)});
;define("common:static/js/gmu/src/extend/offset.js",function(){!function(t){function s(s){return this.each(function(o){var f=t(this),n=t.isFunction(s)?s.call(this,o,f.offset()):s,i=f.css("position"),a="absolute"===i||"fixed"===i||f.position();"relative"===i&&(a.top-=parseFloat(f.css("top"))||-1*parseFloat(f.css("bottom"))||0,a.left-=parseFloat(f.css("left"))||-1*parseFloat(f.css("right"))||0),parentOffset=f.offsetParent().offset(),props={top:e(n.top-(a.top||0)-parentOffset.top),left:e(n.left-(a.left||0)-parentOffset.left)},"static"==i&&(props.position="relative"),n.using?n.using.call(this,props,o):f.css(props)})}var o=t.fn.offset,e=Math.round;t.fn.offset=function(t){return t?s.call(this,t):o.call(this)}}(Zepto)});
;define("common:static/js/gmu/src/extend/position.js",function(t){t("common:static/js/gmu/src/extend/offset.js"),function(t){function e(t,e){return(parseInt(t,10)||0)*(p.test(t)?e/100:1)}function n(t,n,o,i){return["right"===t[0]?o:"center"===t[0]?o/2:0,"bottom"===t[1]?i:"center"===t[1]?i/2:0,e(n[0],o),e(n[1],i)]}function o(t){var e=t[0],n=e.preventDefault;return e=e.touches&&e.touches[0]||e,9===e.nodeType||e===window||n?{width:n?0:t.width(),height:n?0:t.height(),top:e.pageYOffset||e.pageY||0,left:e.pageXOffset||e.pageX||0}:t.offset()}function i(e){var n=t(e=e||window),i=o(n);return e=n[0],{$el:n,width:i.width,height:i.height,scrollLeft:e.pageXOffset||e.scrollLeft,scrollTop:e.pageYOffset||e.scrollTop}}function f(t,e){["my","at"].forEach(function(n){var o=(t[n]||"").split(" "),i=t[n]=["center","center"],f=e[n]=[0,0];1===o.length&&o[h.test(o[0])?"unshift":"push"]("center"),c.test(o[0])&&(i[0]=RegExp.$1)&&(f[0]=RegExp.$2),h.test(o[1])&&(i[1]=RegExp.$1)&&(f[1]=RegExp.$2)})}var s=t.fn.position,r=Math.round,c=/^(left|center|right)([\+\-]\d+%?)?$/,h=/^(top|center|bottom)([\+\-]\d+%?)?$/,p=/%$/;t.fn.position=function(e){if(!e||!e.of)return s.call(this);e=t.extend({},e);var c,h=t(e.of),p=e.collision,a=p&&i(e.within),l={},u=o(h),g={left:u.left,top:u.top};return h[0].preventDefault&&(e.at="left top"),f(e,l),c=n(e.at,l.at,u.width,u.height),g.left+=c[0]+c[2],g.top+=c[1]+c[3],this.each(function(){var o=t(this),i=o.offset(),f=t.extend({},g),s=n(e.my,l.my,i.width,i.height);f.left=r(f.left+s[2]-s[0]),f.top=r(f.top+s[3]-s[1]),p&&p.call(this,f,{of:u,offset:i,my:e.my,at:e.at,within:a,$el:o}),f.using=e.using,o.offset(f)})}}(Zepto)});
;define("common:static/js/gmu/src/extend/support.js",function(){!function(n){var i=n.browser;n.support=n.extend(n.support||{},{orientation:!(i.uc||parseFloat(n.os.version)<5&&(i.qq||i.chrome))&&!(n.os.android&&parseFloat(n.os.version)>3)&&"orientation"in window&&"onorientationchange"in window,touch:"ontouchend"in document,cssTransitions:"WebKitTransitionEvent"in window,has3d:"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,pushState:"pushState"in history&&"replaceState"in history,scrolling:"",requestAnimationFrame:"webkitRequestAnimationFrame"in window})}(Zepto)});
;define("common:static/js/gmu/src/extend/touch.js",function(){!function(e){function t(e){return"tagName"in e?e:e.parentNode}function n(e,t,n,i){var o=Math.abs(e-t),u=Math.abs(n-i);return o>=u?e-t>0?"Left":"Right":n-i>0?"Up":"Down"}function i(){r=null,s.last&&(s.el.trigger("longTap"),s={})}function o(){r&&clearTimeout(r),r=null}function u(){a&&clearTimeout(a),c&&clearTimeout(c),l&&clearTimeout(l),r&&clearTimeout(r),a=c=l=r=null,s={}}var a,c,l,r,s={},p=750;e(document).ready(function(){var g,f;e(document.body).bind("touchstart",function(n){g=Date.now(),f=g-(s.last||g),s.el=e(t(n.touches[0].target)),a&&clearTimeout(a),s.x1=n.touches[0].pageX,s.y1=n.touches[0].pageY,f>0&&250>=f&&(s.isDoubleTap=!0),s.last=g,r=setTimeout(i,p)}).bind("touchmove",function(e){o(),s.x2=e.touches[0].pageX,s.y2=e.touches[0].pageY,Math.abs(s.x1-s.x2)>10&&e.preventDefault()}).bind("touchend",function(){o(),s.x2&&Math.abs(s.x1-s.x2)>30||s.y2&&Math.abs(s.y1-s.y2)>30?l=setTimeout(function(){s.el.trigger("swipe"),s.el.trigger("swipe"+n(s.x1,s.x2,s.y1,s.y2)),s={}},0):"last"in s&&(c=setTimeout(function(){var t=e.Event("tap");t.cancelTouch=u,s.el.trigger(t),s.isDoubleTap?(s.el.trigger("doubleTap"),s={}):a=setTimeout(function(){a=null,s.el.trigger("singleTap"),s={}},250)},0))}).bind("touchcancel",u),e(window).bind("scroll",u)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.bind(t,e)}})}(Zepto)});
;define("common:static/js/gmu/src/widget/slider/$lazyloadimg.js",function(){!function(i){i.Slider.template.item='<div class="ui-slider-item"><a href="<%= href %>"><img lazyload="<%= pic %>" alt="" /></a><% if( title ) { %><p><%= title %></p><% } %></div>',i.Slider.register("lazyloadimg",{_init:function(){this.on("ready slide",this._loadItems)},_loadItems:function(){var i,t,e=this._options,l=e.loop,a=e.viewNum||1,s=this.index;for(i=s-a,t=s+2*a;t>i;i++)this.loadImage(l?this._circle(i):i)},loadImage:function(t){var e,l=this._items[t];return l&&(e=i.staticCall(l,"find","img[lazyload]"),e.length)?(e.each(function(){this.src=this.getAttribute("lazyload"),this.removeAttribute("lazyload")}),void 0):this}})}(gmu)});
;define("common:static/js/gmu/src/widget/slider/$touch.js",function(){!function(e,t,n){var o,i,s,h,c={touchstart:"_onStart",touchmove:"_onMove",touchend:"_onEnd",touchcancel:"_onEnd",click:"_onClick"};t.extend(e.Slider.options,{stopPropagation:!1,disableScroll:!1}),e.Slider.register("touch",{_init:function(){var e=this,t=e.getEl();e._handler=function(t){return e._options.stopPropagation&&t.stopPropagation(),c[t.type]&&e[c[t.type]].call(e,t)},e.on("ready",function(){t.on("touchstart"+e.eventNs,e._handler),e._container.on("click"+e.eventNs,e._handler)})},_onClick:function(){return!h},_onStart:function(e){if(e.touches.length>1)return!1;var t,c=this,a=e.touches[0],l=c._options,r=c.eventNs;i={x:a.pageX,y:a.pageY,time:+new Date},s={},h=!1,o=n,t=l.viewNum||1,c._move(l.loop?c._circle(c.index-t):c.index-t,-c.width,0,!0),c._move(l.loop?c._circle(c.index+t):c.index+t,c.width,0,!0),c.$el.on("touchmove"+r+" touchend"+r+" touchcancel"+r,c._handler)},_onMove:function(e){if(e.touches.length>1||e.scale&&1!==e.scale)return!1;var t,n,c,a,l=this._options,r=l.viewNum||1,d=e.touches[0],u=this.index;if(l.disableScroll&&e.preventDefault(),s.x=d.pageX-i.x,s.y=d.pageY-i.y,"undefined"==typeof o&&(o=Math.abs(s.x)<Math.abs(s.y)),!o){for(e.preventDefault(),l.loop||(s.x/=!u&&s.x>0||u===this._items.length-1&&s.x<0?Math.abs(s.x)/this.width+1:1),a=this._slidePos,t=u-r,n=u+2*r;n>t;t++)c=l.loop?this._circle(t):t,this._translate(c,s.x+a[c],0);h=!0}},_onEnd:function(){if(this.$el.off("touchmove"+this.eventNs+" touchend"+this.eventNs+" touchcancel"+this.eventNs,this._handler),h){var e,t,n,o,c,a=this,l=a._options,r=l.viewNum||1,d=a.index,u=a._slidePos,_=+new Date-i.time,p=Math.abs(s.x),v=!l.loop&&(!d&&s.x>0||d===u.length-r&&s.x<0),f=s.x>0?1:-1;if(250>_?(e=p/_,t=Math.min(Math.round(1.2*e*r),r)):t=Math.round(p/(a.perWidth||a.width)),t&&!v)a._slide(d,t,f,a.width,l.speed,l,!0),r>1&&_>=250&&Math.ceil(p/a.perWidth)!==t&&(a.index<d?a._move(a.index-1,-a.perWidth,l.speed):a._move(a.index+r,a.width,l.speed));else for(n=d-r,o=d+2*r;o>n;n++)c=l.loop?a._circle(n):n,a._translate(c,u[c],l.speed)}}})}(gmu,gmu.$)});
;define("common:static/js/gmu/src/widget/slider/slider.js",function(t){t("common:static/js/gmu/src/extend/touch.js"),t("common:static/js/gmu/src/extend/matchMedia.js"),t("common:static/js/gmu/src/extend/event.ortchange.js"),t("common:static/js/gmu/src/extend/parseTpl.js"),function(t,i){var e=i.fx.cssPrefix,n=i.fx.transitionEnd,s=" translateZ(0)";t.define("Slider",{options:{loop:!1,speed:400,index:0,selector:{container:".ui-slider-group"}},template:{item:'<div class="ui-slider-item"><a href="<%= href %>"><img src="<%= pic %>" alt="" /></a><% if( title ) { %><p><%= title %></p><% } %></div>'},_create:function(){var t=this,e=t.getEl(),s=t._options;t.index=s.index,t._initDom(e,s),t._initWidth(e,t.index),t._container.on(n+t.eventNs,i.proxy(t._tansitionEnd,t)),i(window).on("ortchange"+t.eventNs,function(){t._initWidth(e,t.index)})},_initDom:function(t,e){var n,s,r=e.selector,o=e.viewNum||1;for(s=t.find(r.container),s.length||(s=i("<div></div>"),e.content?this._createItems(s,e.content):t.is("ul")?(this.$el=s.insertAfter(t),s=t,t=this.$el):s.append(t.children()),s.appendTo(t)),(n=s.children()).length<o+1&&(e.loop=!1);e.loop&&s.children().length<3*o;)s.append(n.clone());this.length=s.children().length,this._items=(this._container=s).addClass("ui-slider-group").children().addClass("ui-slider-item").toArray(),this.trigger("done.dom",t.addClass("ui-slider"),e)},_createItems:function(t,i){for(var e=0,n=i.length;n>e;e++)t.append(this.tpl2html("item",i[e]))},_initWidth:function(t,i,e){var n,s=this;(e||(n=t.width())!==s.width)&&(s.width=n,s._arrange(n,i),s.height=t.height(),s.trigger("width.change"))},_arrange:function(t,i){var e,n,s=this._items,r=0;for(this._slidePos=new Array(s.length),n=s.length;n>r;r++)e=s[r],e.style.cssText+="width:"+t+"px;"+"left:"+r*-t+"px;",e.setAttribute("data-index",r),this._move(r,i>r?-t:r>i?t:0,0);this._container.css("width",t*n)},_move:function(t,i,e,n){var s=this._slidePos,r=this._items;s[t]!==i&&r[t]&&(this._translate(t,i,e),s[t]=i,n&&r[t].clientLeft)},_translate:function(t,i,n){var r=this._items[t],o=r&&r.style;return o?(o.cssText+=e+"transition-duration:"+n+"ms;"+e+"transform: translate("+i+"px, 0)"+s+";",void 0):!1},_circle:function(t,i){var e;return i=i||this._items,e=i.length,(t%e+e)%i.length},_tansitionEnd:function(t){~~t.target.getAttribute("data-index")===this.index&&this.trigger("slideend",this.index)},_slide:function(t,i,e,n,s,r){var o,h=this;return o=h._circle(t-e*i),r.loop||(e=Math.abs(t-o)/(t-o)),this._move(o,-e*n,0,!0),this._move(t,n*e,s),this._move(o,0,s),this.index=o,this.trigger("slide",o,t)},slideTo:function(t,i){if(this.index===t||this.index===this._circle(t))return this;var e=this._options,n=this.index,s=Math.abs(n-t),r=s/(n-t),o=this.width;return i=i||e.speed,this._slide(n,s,r,o,i,e)},prev:function(){return(this._options.loop||this.index>0)&&this.slideTo(this.index-1),this},next:function(){return(this._options.loop||this.index+1<this.length)&&this.slideTo(this.index+1),this},getIndex:function(){return this.index},destroy:function(){return this._container.off(this.eventNs),i(window).off("ortchange"+this.eventNs),this.$super("destroy")}})}(gmu,gmu.$)});
;define("common:widget/cookie/cookie.js",function(e,n,t){var i={};i._isValidKey=function(e){return new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(e)},i.getRaw=function(e){if(i._isValidKey(e)){var n=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),t=n.exec(document.cookie);if(t)return t[2]||null}return null},i.get=function(e){var n=i.getRaw(e);return"string"==typeof n?n=decodeURIComponent(n):null},i.setRaw=function(e,n,t){if(i._isValidKey(e)){t=t||{};var o=t.expires;"number"==typeof t.expires&&(o=new Date,o.setTime(o.getTime()+t.expires)),document.cookie=e+"="+n+(t.path?"; path="+t.path:"")+(o?"; expires="+o.toGMTString():"")+(t.domain?"; domain="+t.domain:"")+(t.secure?"; secure":"")}},i.remove=function(e,n){n=n||{},n.expires=new Date(0),i.setRaw(e,"",n)},i.set=function(e,n,t){i.setRaw(e,encodeURIComponent(n),t)},t.exports=i});
;define("common:widget/stat/metrics-stat.js",function(n,t,e){function r(n,t){if(!n)return!1;f(n,N.suspend,1);var e={};if(e.type="ms0",e.target=n,e.ts=Date.now(),g[n]=e,t){var r=t.expire;r>0&&i(n,r);var u=t.callback;u&&u instanceof Function&&(b[n]=u)}return!0}function i(n,t){x[n]=setTimeout(function(){s(n)},1e3*t)}function u(n,t,e,r){if(!n||!t)return!1;e||(e=1);var i=g[n];if(!i)return!1;if($.isPlainObject(e)){for(var u in e){var o=t+"_"+u;i[o]=e[u]}i[t]=a(i[t],1,r)}else i[t]=a(i[t],e,r);return!0}function a(n,t,e){return e?isNaN(n)?t:isNaN(t)?t:n+t:t}function o(n){return f(n,N.success,1)}function s(n){return f(n,N.expire,1)}function c(){if(!p(g))for(var n in g)f(n,N.suspend,1)}function f(n,t,e){if(!n)return!1;var r=g[n];if(!r)return!1;r.status=t;var i=v(T,r);l(i,e),r.url=i,delete g[n];var u=x[n];u&&(delete x[n],clearTimeout(u));var a=b[n];return a&&a instanceof Function&&(d(a,r,50),delete b[n]),!0}function d(n,t,e){setTimeout(function(){n(t)},e)}function v(n,t){var e=n.split("?"),r=e[0],i=e[1];i?i+="&":i="",i+=$.param(t);var u=r+"?"+i;return u}function l(n){(new Image).src=n}function p(n){for(var t in n)if(n.hasOwnProperty(t))return!1;return!0}function m(n){return n?g[n]:void 0}function w(n,t){var e={t:Date.now(),code:n};$.extend(e,t);var r=v(T,e);l(r,1)}var g={},b={},x={},N={success:0,expire:1,suspend:2},T="/mobile/img/transparent.gif?newmap=1";$.each(["blur","pagehide","beforeunload","unload"],function(n,t){var e="on"+t;void 0!==window[e]&&$(window).bind(t,c)}),e.exports={start:r,addStat:u,submit:o,getTarget:m,sendOldStat:w}});
;define("common:widget/geolocation/html5geolocation.js",function(t,e,o){"use strict";var i=(t("common:widget/geolocation/location.js"),t("common:widget/stat/metrics-stat.js")),a={host:"http://loc.map.baidu.com/wloc?",param:{x:"",y:"",r:"",prod:"maponline"},getReqQuery:function(t,e,o){var i={x:t||"",y:e||"",r:o||""},a=[],n=this;return $.extend(n.param,i),$.each(n.param,function(t){a.push(t+"="+n.param[t])}),a.join("&")},request:function(t,e){var o={};o._callback=function(t){e&&e(t)},window.baidu=o;var i=this.host+t+"&addr=city|district|street|city_code&fn=_callback&t="+(new Date).getTime();$.ajax({url:i,dataType:"jsonp"}),this._delay=window.setTimeout(function(){listener.trigger("common.geomethod","fail",{message:"html5 geolocation fail"})},15e3)}},n={getCurrentPosition:function(t,e,o){return navigator.geolocation.getCurrentPosition(t,e,o)},watchPosition:function(t,e,o){return navigator.geolocation.watchPosition(t,e,o)},clearWatch:function(t){navigator.geolocation.clearWatch(t)}},c={init:function(t){this._data=t||{},this._config={enableHighAccuracy:!0,maximumAge:6e4,timeout:this._data.par||3e4,accuracy:2e8},this._getCurrentPosition(n)},_getCurrentPosition:function(t){i.addStat("geo","html5_geo_all",1,!0),t.getCurrentPosition(this._onSuccess,this._onFailure,this._config)},_onSuccess:function(t){var e,o,a=c;e=t.coords,o=e.accuracy,o<a._config.accuracy&&0!=e.longitude&&0!=e.latitude?a._getPosSuccess(t,{success:a.onWlocSuccess}):listener.trigger("common.geomethod","fail",{}),i.addStat("geo","wlan_geo_radius",parseInt(o,10))},_onFailure:function(t){i.addStat("geo","html5_geo_fail",{error:t.code,messgae:t.message},!0),listener.trigger("common.geomethod","fail",t)},_isUserDeny:function(t){return t&&1==t.code?util.isIOS()&&"user denied geolocation"==t.message.toLowerCase()||util.isAndroid()?!0:!1:void 0},_getPosSuccess:function(t){if(t){var e=this,o=t.coords;if(o){var n=a.getReqQuery(o.longitude,o.latitude,o.accuracy);e._isFirstSetLoc=!0;var c=e._data.id;a.request(n,function(t){if(a._delay&&window.clearTimeout(a._delay),"object"==typeof t){var e={},n=t.addr;if(!t.point)return listener.trigger("common.geomethod","fail",{message:"has no point"}),void 0;e={addr:{city:n.city,cityCode:n.city_code,district:n.district,street:n.street,accuracy:o.accuracy},point:t.point},$.extend(e,{type:"html5",isExactPoi:t.point?!0:!1,isSaveLocInCookie:!0}),i.addStat("geo","html5_get_geo_suc",{id:c},!0),listener.trigger("common.geomethod","success",e)}})}}}};o.exports=c});
;define("common:widget/geolocation/nativegeolocation.js",function(i,t,o){"use strict";var e=i("common:widget/stat/metrics-stat.js"),a="http://127.0.0.1:6259/",c={lochost:"http://map.baidu.com",apnUrl:a+"getapn?callback=getApnCallback",apinfoUrl:a+"getlocstring?timeout=0&callback=getapinfo",locSdkUrl:a+"geolocation?timeout=12000&callback=getGeoByNative",init:function(i){this._isApnTimeout=!1,this._isNativeAvailable=!1,this._isNativeTimeout=!1,this._isLocsdkTimeout=!1,this._isApinfoTimeout=!1,this._isGeoSuc=!1,this._isApinfoSuc=!1,this._isLocsdkSuc=!1,this._isLocsdkFail=!0,this._isApinfoFail=!0,this.outofdate=!1,this._data=i||{},this.checkApn()},checkApn:function(){var i=this;$.ajax({url:i.apnUrl,dataType:"jsonp",success:function(t){i._isApnTimeout===!1&&t&&0===t.error&&(i._isNativeAvailable=!0,i.nativeGeo&&i.nativeGeo())}}),i.checkApnTimeout(2)},checkApnTimeout:function(i){var t=this;setTimeout(function(){t._isNativeAvailable===!1&&(t._isApnTimeout=!0,listener.trigger("common.geomethod","fail",{}))},1e3*i)},nativeGeo:function(){this.geobyApinfo(),this.geobyLocsdk(),e.addStat("geo","native_geo_all",1,!0)},nativeGeofailed:function(i){var t=this;"locsdk"==i?t._isLocsdkFail=!0:"apinfo"==i&&(t._isApinfoFail=!0),t._isLocsdkFail&&t._isApinfoFail&&!t.outofdate&&(t.outofdate=!0,listener.trigger("common.geomethod","fail",{}),e.addStat("geo","native_geo_fail",1,!0))},geobyApinfo:function(){var i=this;$.ajax({url:i.apinfoUrl,dataType:"jsonp",success:function(t){0===t.error&&i._isApinfoTimeout===!1?i.getLocation(t):(e.addStat("geo","native_geo_apinfo_fail",{id:t.error},!0),i.nativeGeofailed("apinfo")),e.addStat("geo","native_get_geo_suc",{id:"apinfo"},!0)}}),i.checkApinfoTimeout(12)},geobyLocsdk:function(){var i=this;$.ajax({url:locSdkUrl,dataType:"jsonp",success:function(t){0===t.error&&i._isLocsdkTimeout===!1?i.getDetailLoc(t):i.nativeGeofailed("locsdk"),e.addStat("geo","native_get_geo_suc",{id:"locsdk"},!0)}}),i.checkLocsdkTimeout(12)},checkLocsdkTimeout:function(i){var t=this;setTimeout(function(){t._isLocsdkSuc!==!1&&t._isGeoSuc||(t._isLocsdkTimeout=!0,t.nativeGeofailed("locsdk"))},1e3*i)},checkApinfoTimeout:function(i){var t=this;setTimeout(function(){t._isApinfoSuc!==!1&&t._isGeoSuc||(t._isApinfoTimeout=!0,t.nativeGeofailed("apinfo"))},1e3*i)},getLocbyUrl:function(i){var t=this,o=t._data.id;$.ajax({url:i,dataType:"jsonp",success:function(i){var a,c=i&&i.content,s=c&&c.address_detail,n=c&&c.point;if(!t.outofdate){if(0!=i.error||""==c.address)return"apinfo"==i.reqtype||"locsdk"==i.reqtype?t.nativeGeofailed(i.reqtype):(t.outofdate=!0,listener.trigger("common.geomethod","fail",{})),void 0;0==i.error&&"apinfo"==i.reqtype&&e.addStat("geo","url_geo_apinfo_suc_back",1,!0),t._isGeoSuc||(t._isGeoSuc=!0,a={addr:{address:c.address||null,city:s.city||null,cityCode:s.city_code||1,district:s.district||null,street:s.street||null,accuracy:s.accuracy},point:{x:n.x||null,y:n.y||null},isGeoSuc:!0,isExactPoi:!0,type:"native",isUserDeny:!1,isSaveLocInCookie:!0},listener.trigger("common.geomethod","success",a),e.addStat("geo","native_geo_getinfo_suc",{type:i.reqtype,id:o},!0))}}})},getLocation:function(i){var t=this,o=i.locstring.split("&"),e=o[0]+"|"+o[1],a=t.lochost+"/mobile/?qt=geo&apinfo="+e+"&type=apinfo&callback=";t._isApinfoSuc=!0,t.getLocbyUrl(a)},getDetailLoc:function(i){var t=this,o=t.getRgcUrl(i);t._isLocsdkSuc=!0,t.getLocbyUrl(o)},getRgcUrl:function(i){var t,o=i.coords.longitude,e=i.coords.latitude,a=i.coords.accuracy,c=this;return t=o&&e?c.lochost+"/mobile/?qt=geo&x="+o+"&y="+e+"&radius="+a+"&type=locsdk&callback=":""}};o.exports=c});
;define("common:widget/geolocation/myposition.js",function(t,e,o){"use strict";var a=t("common:widget/cookie/cookie.js");o.exports={domain:".baidu.com",path:"/",webCookie:"H_LOC_MI",nativeCookie:"H_LOC_APP",baiduLoc:"BAIDULOC",expires:1728e5,get:function(i){if("baiduLoc"==i){var t=a.get(this.baiduLoc);if(!t)return;var e={};try{var o=t.split("_");e={crd:{x:o[0],y:o[1],r:o[2]},cc:o[3],t:o[4]}}catch(r){}return e}if(i&&("web"==i||"native"==i)){var s="web"===i?this.webCookie:this.nativeCookie,t=a.get(s);if(t){var o=JSON.parse(t);if(t&&o){if(o.crd){var n=o.crd.split("_");n[0]&&n[1]&&n[2]&&(o.crd={x:n[0],y:n[1],r:n[2]})}return o}}}},save:function(i){"object"!=typeof i&&i.x&&i.y&&i.cityCode&&i.accuracy||this._save(i)},_save:function(i){var t=Date.now();i.t=t+"";var e=i.join("_");a.set(this.baiduLoc,e,{domain:this.domain,path:this.path,expires:this.expires})},remove:function(t){if(!t)return a.remove(this.webCookie,{domain:this.domain,path:this.path}),void 0;var e=a.get(this.webCookie),o=JSON.parse(e),r={};for(i in o)t!=i&&(r[i]=o[i]);var s=JSON.stringify(r);a.set(this.webCookie,s,{domain:this.domain,path:this.path})}}});
;define("common:static/js/localstorage.js",function(e,t,s){var a=window.localStorage,r="<#lsvalid#>",c="</#lsvalid#>",o=new RegExp("^(<#lsvalid#>)(.*)(</#lsvalid#>)$"),d=function(){},i=d.prototype;i.deleteData=function(e,t){if(a){t=t||{};try{a.removeItem(e),t.success&&t.success()}catch(s){t.error&&t.error()}}},i.addData=function(e,t,s){if(a){s=s||{};try{a.setItem(e,r+JSON.stringify(t)+c),s.success&&s.success()}catch(o){s.error&&s.error(),n.addStat(20155,{message:o.message,key:e,type:"ad"})}}},i.getData=function(e){if(a){var t=a.getItem(e),s=null;return(s=t.match(o))?t=s[2]:void 0}};var n=e("common:static/js/util.js");i.selectData=function(e,t){if(a){var s,r=a.getItem(e);if(t=t||{},null===r)return t.success&&t.success(r),void 0;var c=null;if(c=r.match(o)){r=c[2];try{s=JSON.parse(r),t.success&&t.success(s)}catch(d){t.error&&t.error(),n.addStat&&n.addStat(20155,{key:e,type:"sd",message:d.message})}}else t.error&&t.error(),n.addStat&&n.addStat(20155,{key:e,type:"sd",message:"data not valid"})}},s.exports=new d});
;define("common:widget/geolocation/sharegeolocation.js",function(t,e,i){"use strict";var r=t("common:widget/geolocation/myposition.js"),o=t("common:static/js/localstorage.js"),a=t("common:widget/stat/metrics-stat.js");i.exports={_MINUTES:5,init:function(t){t=t||{},this._MINUTES=parseInt(t.par)||this._MINUTES,this._data=t,this._startGeo()},_startGeo:function(){if("number"==typeof this._MINUTES){var t=r.get("baiduLoc")||r.get("native")||r.get("web");null!=t?this._setCookieLoc(t):this._geoFailHandler()}else this._geoFailHandler()},_isInMinutes:function(t){if(!t)return!1;var e=parseInt(Date.now()),i=e-6e4*this._MINUTES;return t>i?!0:!1},_formatLoc:function(t){var e=t&&t.crd;if(e)return{addr:{address:t.addr,city:t.city,district:t.district,street:t.street,cityCode:t&&t.cc,accuracy:e&&e.r},point:{x:e&&e.x,y:e&&e.y},t:t&&t.t,isUserInput:t&&"ui"==t.tp?!0:!1,type:"share",isExactPoi:!0,isGeoSuc:!0,minutes:this._MINUTES}},_setCookieLoc:function(t){var e=this,i=e._isInMinutes(t.t);t&&t.crd&&i?t.addr?e._addStatAndTriggerEvent(t):e._checkLocFromStorage(t.crd)?e._getLocFromStorage(t):e._getRgcLoc(t):e._geoFailHandler()},_getRgcLoc:function(t){var e=this;if(t.crd.x&&t.crd.y){var i="http://api.map.baidu.com/?qt=rgc_standard&x="+t.crd.x+"&y="+t.crd.y+"&dis_poi="+t.crd.r+"&poi_num=10&ie=utf-8&oue=1&res=api&callback=";$.ajax({url:i,dataType:"jsonp",success:function(i){var r=i.content.address,a=i.content.address_detail;$.extend(t,{addr:r,city:a.city,district:a.district,street:a.street}),o.addData("webapp-location-cookie",t),e._addStatAndTriggerEvent(t)}})}},_checkLocFromStorage:function(t){var e,i;if(void 0==t)return!1;try{var e=o.getData("webapp-location-cookie");if(void 0==e)return!1;i=JSON.parse(JSON.parse(e))}catch(r){return!1}return i.x==t.x&&i.y==t.y?(this._locAddress=i,!0):!1},_getLocFromStorage:function(t){var e=this._locAddress;$.extend(t,{addr:e.address?e.address:e.city+e.district+e.street,city:e.city,district:e.district,street:e.street}),this._addStatAndTriggerEvent(t)},_addStatAndTriggerEvent:function(t){var t=this._formatLoc(t);a.addStat("geo","share_geo_suc",1,!0),listener.trigger("common.geomethod","success",t)},_geoFailHandler:function(){return this._MINUTES<=5?(listener.trigger("common.geomethod","fail",{}),void 0):this._MINUTES>=30?(listener.trigger("common.geomethod","fail",this._data),void 0):void 0}}});
;define("common:widget/geolocation/preciseipgeolocation.js",function(require,exports,module){"use strict";var PreciseIPGeoLocation={init:function(){this._startGeo()},_startGeo:function(){var addrbyip=_DEFAULT_CITY.addrbyip;addrbyip?this._getDetailLoc(eval("("+addrbyip+")")):listener.trigger("common.geomethod","fail",{})},_getDetailLoc:function(e){var i,t=e&&e.content,o=t&&t.address_detail,r=t&&t.point;return 0!=e.error||""==t.address?(listener.trigger("common.geomethod","fail",{}),void 0):(i={addr:{address:t.address||null,city:o.city||null,cityCode:o.city_code||1,district:o.district||null,street:o.street||null,accuracy:o.accuracy||null},point:{x:r.x||null,y:r.y||null},isGeoSuc:!0,isExactPoi:!0,type:"preciseip",isUserDeny:!1,isSaveLocInCookie:!0},listener.trigger("common.geomethod","success",i),void 0)}};module.exports=PreciseIPGeoLocation});
;define("common:widget/geolocation/urlgeolocation.js",function(t,e,o){"use strict";var i=t("common:widget/stat/metrics-stat.js");o.exports={lochost:"http://map.baidu.com",init:function(){this._startGeo()},_startGeo:function(){var t=this,e=t.getContainLoc();e?t.getDetailLoc(e):listener.trigger("common.geomethod","fail",{})},getDetailLoc:function(t){var e=this,o=t||[],r=e.lochost+"/mobile/?qt=geo&x="+o[0]+"&y="+o[1]+"&type=url&callback=";return o[0]&&o[1]?(i.addStat("geo","url_geo_startget"),$.ajax({url:r,dataType:"jsonp",success:function(t){var e,o=t&&t.content,i=o&&o.address_detail,r=o&&o.point;return 0!=t.error||""==o.address?(listener.trigger("common.geomethod","fail",{}),void 0):(e={addr:{address:o.address||null,city:i.city||null,cityCode:i.city_code||1,district:i.district||null,street:i.street||null},point:{x:r.x||null,y:r.y||null},isGeoSuc:!0,isExactPoi:!0,type:"url",isSaveLocInCookie:!0,isUserDeny:!1},listener.trigger("common.geomethod","success",e),void 0)},error:function(){listener.trigger("common.geomethod","fail",{})}}),void 0):(listener.trigger("common.geomethod","fail",{}),void 0)},getContainLoc:function(){var t=decodeURI(window.location.href),e=t.indexOf("locMC="),o="",i="",r=[];return 0>e?void 0:(e+=6,o=t.substr(e,t.length),i=o.indexOf("|"),i>0?(r=[],r[0]=o.substr(0,i),r[1]=o.substr(i+1,o.length),r):void 0)}}});
;define("common:widget/url/url.js",function(e,t,a){var r=e("common:static/js/util.js"),o="_lastPageUrl";a.exports={host:"http://"+location.host,update:function(e,t){var a,r=t||{},o=this._get(e,r),n=window.location.pathname;o!==n&&(a=this.host+o,this.navigate(a,t))},navigate:function(e,t){if("string"==typeof e){var a=window.location.pathname,r=t||{};if(r.trigger=r.trigger===!1?!1:!0,r.replace===!0&&r.storageKey!==!1){try{window.localStorage.setItem(o,a)}catch(n){}appPage.redirect(e,r)}else appPage.redirect(e,r)}},get:function(){var e=window.location.pathname.slice(1),t=e.split("/"),a=t[0],o=t[1],n=t[2],i=t[3],c=t[4],p=t[5]||"",s={seachbox:function(e){var t={place:function(e){var t=p.split("from=place&"+e+"=");p="from=place&"+e+"="+encodeURIComponent(t[1])},loc:function(e){var t=p.split(e+"=");p=e+"="+encodeURIComponent(t[1])}};e&&t[e[1]](e[0])}};if(!/%3d|%26/gi.test(p)&&p.indexOf("=")>-1){var l={DictionaryName:"seachbox",DictionaryData:""},d=!/^(from=place&start=word%3d|from=place&end=word%3d)/gi.test(p),u=!/^(start=word%3d|end=word%3d)/gi.test(p);if(d||u){if(-1!==p.indexOf("start")){var f=/^start=word=/gi.test(p);!f&&d&&(l.DictionaryData=["start","place"]),f&&u&&(l.DictionaryData=["start","loc"])}else if(-1!==p.indexOf("end")){var g=/^end=word=/gi.test(p);!g&&d&&(l.DictionaryData=["end","place"]),g&&u&&(l.DictionaryData=["end","loc"])}s[l.DictionaryName](l.DictionaryData)}p.indexOf("refer_query")>-1&&p.indexOf("refer_pagestate")>-1&&(p="refer_query="+encodeURIComponent(p.match(/refer_query=(.*?)($|&refer_pagestate)/)[1])+"&refer_pagestate="+encodeURIComponent(p.match(/refer_pagestate=(.*?)($|&list_type)/)[1]))}return{product:a,style:o,module:n,action:i,query:r.urlToJSON(c||""),pageState:r.urlToJSON(p||"")}},toIndex:function(e){var e=$.extend({queryReplace:!0,pageStateReplace:!0},e);this.update({module:"index",action:"index"},e)},_get:function(e,t){var a=window.location.pathname.slice(1),o=a.split("/"),n=o[0]||"mobile",i=o[1]||"webapp",c=o[2]||"index",p=o[3]||"index",s=o[4]||"foo=bar",l=o[5]||"",d=t&&t.queryReplace||!1,u=t&&t.pageStateReplace||!1,f=[];if(f.push(e.product||n),f.push(e.style||i),f.push(e.module||c),f.push(e.action||p),d)e.query&&f.push(r.jsonToUrl(e.query));else{var g=r.urlToJSON(s);e.query=e.query||{};for(var y in e.query)""!==e.query[y]?g[y]=e.query[y]:delete g[y];f.push(r.jsonToUrl(g))}if(u)e.pageState&&f.push(r.jsonToUrl(e.pageState));else{e.pageState=e.pageState||{};var h=r.urlToJSON(l);for(var y in e.pageState)""!==e.pageState[y]?h[y]=e.pageState[y]:delete h[y];f.push(r.jsonToUrl(h))}return"/"+f.join("/")}}});
;define("common:widget/geolocation/geolocation.js",function(t,o,e){t("common:static/js/gmu/src/core/widget.js");var i=t("common:widget/geolocation/html5geolocation.js"),a=t("common:widget/geolocation/nativegeolocation.js"),s=t("common:widget/geolocation/sharegeolocation.js"),n=t("common:widget/geolocation/preciseipgeolocation.js"),c=t("common:widget/geolocation/urlgeolocation.js"),r=t("common:widget/geolocation/myposition.js"),m=(t("common:widget/geolocation/location.js"),t("common:widget/stat/metrics-stat.js")),_=t("common:static/js/util.js"),g=t("common:static/js/localstorage.js");t("common:widget/url/url.js"),e.exports={_IS_LAST_GEO_FAIL:!1,_GEO_METHOD_INDEX:0,_GEO_ARRAY:[],init:function(){this._bindEvent(),this.startGeo({isInitGeo:!0,isNoCoverLoc:window._NO_COVER_LOC})},_bindEvent:function(){var t=this;t._hasBindEvent!==!0&&(t._hasBindEvent=!0,listener.on("common.html5Geolocation","start",function(t,o){i.init(o)}),listener.on("common.nativeGeolocation","start",function(t,o){a.init(o)}),listener.on("common.shareGeo","start",function(t,o){setTimeout(function(){s.init(o)},0)}),listener.on("common.preciseipGeo","start",function(t,o){setTimeout(function(){n.init(o)},0)}),listener.on("common.urlgeolocation","start",function(t,o){setTimeout(function(){c.init(o)},0)}),listener.on("common.geolocation","success",function(o,e){t._geoSuccess(e)}),listener.on("common.geolocation","fail",function(o,e){t._geoFail(e)}),listener.on("common.geomethod","fail",function(o,e){t._geoMethodFail(e)}),listener.on("common.geomethod","success",function(o,e){t._geoMethodSuccess(e)}))},startGeo:function(t){var o=t||{};this._IS_LAST_GEO_FAIL=!1,this._time=Date.now(),this._isInitGeo=o.isInitGeo||!1,this.sucCallback=o.success||function(){},m.start("geo",{expire:50}),m.addStat("geo","start_geo_loc"),window._NO_COVER_LOC=o.isNoCoverLoc||!1,o.isInitGeo===!0?this._checkStorageGeoStatus()&&this._checkStorageMyLocStatus()||this._startGeo({isInitGeo:!0}):this._startGeo()},_startGeo:function(){this._initGeoData(),this._GEO_METHOD_INDEX=0,this._useNextMethod()},_checkStorageGeoStatus:function(){if(window._INIT_LOC_SUC===!0){var o=t("common:widget/geolocation/location.js");return setTimeout(function(){listener.trigger("common.geolocation","success",o._location)},0),!0}return!1},_checkStorageMyLocStatus:function(){if(window._INIT_MYLOC_SUC===!0){var o=t("common:widget/geolocation/location.js");return setTimeout(function(){listener.trigger("common.geolocation","mylocsuc",o._mylocation)},0),!0}return!1},_formatToCookie:function(t){var o=t.addr||{},e=t.point||{},i=(new Date).getTime()+"",a=[];return o.accuracy=o.accuracy||1e3,o.cityCode=o.cityCode||1,e.x&&e.y&&o.cityCode?(a.push(parseInt(e.x)),a.push(parseInt(e.y)),a.push(o.accuracy),a.push(o.cityCode),a.push(i),a):void 0},_saveAddressInStorage:function(t){var o=t.addr||{},e=t.point||{},i={address:o.address,city:o.city,district:o.district,street:o.street,x:parseInt(e.x),y:parseInt(e.y)};g.addData("webapp-location-cookie",JSON.stringify(i))},_geoSuccess:function(t){var o,e=this,i=t.type,a=t.isExactPoi,s=t.isSaveLocInCookie;if(e._addStatGeoSuc(t),a&&"share"!==i&&"storage"!==i){if(s===!1)return;o=this._formatToCookie(t),this._saveAddressInStorage(t),r.save(o)}a===!0&&(e._IS_LAST_GEO_FAIL=!1),e.sucCallback&&e.sucCallback(t),e.sucCallback=null},_geoFail:function(t){var o=this;o._IS_LAST_GEO_FAIL=!0,o._addStatGeoFail(t),o.sucCallback&&(o.sucCallback=null)},_getStatTime:function(){var t=Date.now();return t=Math.ceil((t-this._time)/1e3)},_addStatGeoSuc:function(t){var o,e=this;switch(o=e._getStatTime(),t.isExactPoi&&null!=t.type&&m.addStat("geo","geo_suc_all"),t.type){case"share":5==t.minutes&&m.addStat("geo","share_geo_five_suc",{time:o}),30==t.minutes&&m.addStat("geo","share_geo_thirty_suc",{time:o});break;case"native":m.addStat("geo","native_geo_suc",{time:o});break;case"html5":m.addStat("geo","wlan_geo_success",{time:o});break;case"preciseip":m.addStat("geo","preciseip_geo_sucess",{time:o});break;case"url":m.addStat("geo","url_geo_sucess",{time:o});break;case"storage":t.isExactPoi&&m.addStat("geo","storage_geo_success",{time:o})}m.submit("geo")},_addStatGeoFail:function(t){m.addStat("geo","wlan_geo_error",{error:t.code,messgae:t.message}),m.submit("geo")},_geoMethodSuccess:function(o){var e=t("common:widget/geolocation/location.js");e.setAddress(o,this._isInitGeo),this._geoindex=0},_geoMethodFail:function(t){var o=this;o._useNextMethod(t)},_initGeoData:function(){var t={geostr:"common.nativeGeolocation",type:"start",param:{id:"first"}},o={geostr:"common.nativeGeolocation",type:"start",param:{id:"second"}},e={geostr:"common.shareGeo",type:"start",param:{par:5,id:"5min"}},i={geostr:"common.shareGeo",type:"start",param:{par:30,id:"30min"}},a={geostr:"common.preciseipGeo",type:"start",param:{}},s={geostr:"common.html5Geolocation",type:"start",param:{id:"first",par:3e4}},n={geostr:"common.html5Geolocation",type:"start",param:{id:"second",par:3e4}},c={geostr:"common.urlgeolocation",type:"start",param:{}};this._GEO_ARRAY=_.isAndroid()===!0?[c,e,t,a,s,o,i,n]:[c,e,s,a,i,n]},_useNextMethod:function(t){var o=this._GEO_ARRAY[this._GEO_METHOD_INDEX];o?(o.geostr=o.geostr||"",o.param=o.param||{},o.type=o.type||"",this._GEO_METHOD_INDEX++,listener.trigger(o.geostr,o.type,o.param)):listener.trigger("common.geolocation","fail",t)}}});
;define("common:widget/geolocation/location.js",function(t,i,o){"use strict";var n=t("common:widget/cookie/cookie.js"),e=t("common:widget/geolocation/geolocation.js");o.exports={_location:null,_mylocation:null,_getAddr:function(){return this._location&&this._location.addr||{}},_getPoint:function(){return this._location&&this._location.point||{}},_getMyAddr:function(){return this._mylocation&&this._mylocation.addr||{}},_getMyPoint:function(){return this._mylocation&&this._mylocation.point||{}},getMyPointX:function(){var t=this._getMyPoint();return t.x?t.x:""},getMyPointY:function(){var t=this._getMyPoint();return t.y?t.y:""},getMyCityCode:function(){var t=this._getMyAddr();return t.cityCode?t.cityCode:null},getMyLocation:function(){return this._mylocation},getMyCenterPoi:function(){var t=this;return{x:t.getMyPointX(),y:t.getMyPointY()}},isGeoEnd:function(){return this._location.isGeoEnd},waitForLoc:function(t){function i(){r._isInitSuc===!1&&(r._isInitSuc=!0,e())}function o(){r._isInitSuc===!1&&(r._isInitSuc=!0,c())}var n,e,c,r=this,s=!1;r._isInitSuc=!1,"object"==typeof t&&(n=t.seconds||8,e=t.successCallback||function(){},c=t.errorCallback||function(){},s===!1&&(listener.on("common.geolocation","success",function(){i()}),listener.on("common.geolocation","fail",function(){o()}),s=!0),r.isGeoEnd()&&(r.hasExactPoi()?i():o()),setTimeout(function(){o()},1e3*n))},startGeo:function(){this._isInitSuc=!1,e.startGeo()},getUpCityCode:function(){var t=this,i=t._getAddr();return i.upCityCode},getAddress:function(){var t,i=this;return t=i._getAddr(),null!=t.address?t.address:i.getCity()+i.getDistrict()+i.getStreet()},getCity:function(){var t=this._getAddr();return t.city?t.city:""},getCityCode:function(){var t=this._getAddr();return t.cityCode?t.cityCode:""},getDistrict:function(){var t=this._getAddr();return t.district?t.district:""},getStreet:function(){var t=this._getAddr();return t.street?t.street:""},getPointX:function(){var t=this._getPoint();return t.x?t.x:""},getPointY:function(){var t=this._getPoint();return t.y?t.y:""},getCenterPoi:function(){var t=this;return{x:t.getPointX(),y:t.getPointY()}},hasExactPoi:function(){return!!this._location.isExactPoi},getLocation:function(){return this._location},getLevel:function(){var t,i=this,o=i.getCityCode();return t=this._location.level,1==o?4:(i.hasExactPoi()&&n.get("ab")&&(this._location.level=t>16?t:16),this._location.level?this._location.level:this._location.isExactPoi?15:12)},getType:function(){return this._location.type},getCityType:function(){var t,i=this;return t=i._getAddr(),t.cityType},hasGeoSuc:function(){return null!==this._location.isGeoSuc?this._location.isGeoSuc:null},getAccuracy:function(){var t=this._getAddr();return t.accuracy},isUserDeny:function(){return!!app.isUserDeny},isLocFailed:function(){return!!this._location.isGeoSuc},isUserInput:function(){return this._location.isUserInput},_isUserInput:function(t){var i=t||{};return i.isUserInput?!0:null==i.type?!0:!1},_saveLocInStorage:function(){var t=this,i=window.localStorage;if(i){if(t._location){var o=t._location.isInitGeo;delete t._location.isInitGeo;try{i.setItem("webapp-loc",JSON.stringify(t._location))}catch(n){}t._location.isInitGeo=o}if(t._mylocation){var o=t._mylocation.isInitGeo;delete t._mylocation.isInitGeo;try{i.setItem("webapp-myloc",JSON.stringify(t._mylocation))}catch(n){}t._mylocation.isInitGeo=o}}},setAddress:function(t,i){var o,n=this,e=t||{},c=e.addr||{},r=e.point||{},i=i||!1;"中国"==c.city&&(c.city="全国");var s={addr:{city:c.city?c.city:"",cityCode:c.cityCode?c.cityCode:1,district:c.district?c.district:"",street:c.street?c.street:"",accuracy:c.accuracy?c.accuracy:null,address:c.address?c.address:null,cityType:c.cityType?c.cityType:null,upCityCode:c.upCityCode?c.upCityCode:null},point:{x:r.x?r.x:null,y:r.y?r.y:null},type:e.type?e.type:null,t:e.t?e.t:(new Date).getTime(),isGeoSuc:e.isGeoSuc?!!e.isGeoSuc:null,isExactPoi:e.isExactPoi?e.isExactPoi:!1,level:e.level?e.level:!1,isSaveLocInCookie:e.isSaveLocInCookie||!1,isSaveInStorage:e.isSaveInStorage===!1?!1:!0,minutes:e.minutes?e.minutes:null,isInitGeo:i,isUserInput:this._isUserInput(e),isGeoEnd:"ip"!==e.type?!0:!1};o=s.type,0==i?n._location=s:window._NO_COVER_LOC!==!0&&(n._location=s),s.isExactPoi&&(n._mylocation=s,listener.trigger("common.geolocation","mylocsuc",s)),s.isSaveInStorage&&n._saveLocInStorage(),"ip"!==o&&listener.trigger("common.geolocation","success",n._location)}}});
;define("common:static/js/mapconst.js",function(_,o,T){var t=_("common:static/js/util.js");T.exports={TILE_FOMAT:"jpeg",TILE_QUALITY:"40",TILE_URL:["http://online0.map.bdimg.com/it/","http://online1.map.bdimg.com/it/","http://online2.map.bdimg.com/it/","http://online3.map.bdimg.com/it/"],FORMAT:".jpg",GEO_TYPE_AREA:0,GEO_TYPE_LINE:1,GEO_TYPE_POINT:2,POI_TYPE_NORMAL:0,POI_TYPE_BUSSTOP:1,POI_TYPE_BUSLINE:2,POI_TYPE_SUBSTOP:3,POI_TYPE_SUBLINE:4,ROUTE_TYPE_DEFAULT:0,ROUTE_TYPE_BUS:1,ROUTE_TYPE_WALK:2,ROUTE_TYPE_DRIVE:3,ROUTE_TYPE_UNSURE:6,TRANS_TYPE_BUS:0,TRANS_TYPE_SUB:1,DEST_START:0,DEST_END:1,DEST_MIDDLE:2,DEST_SEC:3,INPUT_SUG:"输入一个位置，如：西单",MY_GEO:"我的位置",ViewMargins:t.isAndroid()?[60,50,50,50]:[60,50,50,0],ROUTE_MARGINS:t.isAndroid()?[85,50,50,50]:[85,50,50,20],GRViewMargins:[60,50,60,50],SvpOpts:{enableAnimation:!1,margins:this.ViewMargins},PAGE_ID:{traffic:3},SEARCH_FOR_LOC_TIMEOUT:8e3,GLCON_TIMEOUT:3e4,BUSINESS_SPLIT:"     ",APP_ROOT:"mobile/webapp/",CITY_BY_BOUNDS_URI:"http://s0.map.baidu.com/",TRAFIIC_URI:"http://its.map.baidu.com:8001/showevents.php",MARKERS_PATH:"/mobile/simple/static/common/images/markers_d2cfab5.png",DEST_MKR_PATH:"/mobile/simple/static/common/images/dest_mkr_4dfb043.png",ROUTE_DICT:[{stroke:6,color:"#3a6bdb",opacity:.65},{stroke:6,color:"#3a6bdb",opacity:.75},{stroke:4,color:"#30a208",opacity:.65},{stroke:5,color:"#3a6bdb",opacity:.65},{stroke:6,color:"#3a6bdb",opacity:.5},{stroke:4,color:"#30a208",opacity:.5,strokeStyle:"dashed"},{stroke:4,color:"#575757",opacity:.65,strokeStyle:"dashed"}],IW_POI:0,IW_GRT:1,IW_BSL:2,IW_CNT:3,IW_BUS:4,IW_NAV:5,IW_WLK:6,IW_SHR:7,IW_TFC:10,IW_VCT:11}});
;define("common:widget/pagemgr/pagemgr.js",function(e,n,t){var i=(window._isPushState,0),a=0,r=1,o={switchstart:1,pagearrived:2,switchend:3,pageloaded:4},g=["landing","quickling","fromcache"],c="landing",s=[],d=function(){var e,n=document.referrer,t=/^.*?\/\/(.*?)(\/|\?|\#|$)/i,i=n.match(t);return i&&(e=i[1]),e},p=function(){return _isPushState?0===i:window.location.host!==d()},u=function(){return _isPushState},f=function(){return c},h=function(e){g[e]&&(c=g[e])},l=function(){return _isPushState?!0:window.location.host===d()},m=function(e){return o[e]?(("switchstart"===e||r===o.pageloaded)&&a++,r=o[e],a):void 0},w=function(){appPage.on("onpagerenderstart",function(e){var n=e||{};n.eid=m("switchstart"),listener.trigger("common.page","switchstart",n)}),appPage.on("onpagearrived",function(e){var n=e||{};n.eid=m("pagearrived"),h(e.initiator),listener.trigger("common.page","pagearrived",n)}),appPage.on("onpagerendercomplete",function(e){var n=e||{};n.eid=m("switchend"),i++,v(),listener.trigger("common.page","switchend",n)}),appPage.on("onpageloaded",function(e){var n=e||{};n.eid=m("pageloaded"),listener.trigger("common.page","pageloaded",n)})},v=function(){$.each(s,function(e,n){n()}),s=[]},P=function(e){$.isFunction(e)&&s.push(e)},S=function(){w()};t.exports={init:S,getInitiator:f,registerDestory:P,isLandingPage:p,isSinglePageApp:u,isAppNavigate:l}});
;define("common:widget/appresize/appresize.js",function(i,e,t){"use strict";var n=i("common:static/js/util.js");t.exports={init:function(){this.bind(),this.setMainHeight(),$(document.body).css("min-height",window.innerHeight)},bind:function(){listener.on("common","sizechange",$.proxy(this.update,this)),"undefined"!=typeof window.onorientationchange?(window.addEventListener("orientationchange",this.resize,!1),n.isAndroid()&&window.addEventListener("resize",this.resize,!1)):window.addEventListener("resize",this.resize,!1),listener.on("common.page","switchend",$.proxy(this.setMainHeight,this))},getAppHeight:function(){var i=window.innerHeight,e=$(".common-widget-header").height(),t=$(".index-widget-searchbox").height(),n=$(".index-widget-tabgroup").height(),o=$(".common-widget-nav").height(),h=$(".common-widget-footer").height(),s=$(".common-widget-bottom-banner").height(),g=i-(e+h+s),r=e+t+o+n,d=i-r;return{min:g,mapTop:r,mapHeight:d,header:e,footer:h,bottom:s}},setMainHeight:function(){var i=this.getAppHeight();$("#main").css({"min-height":i.min})},update:function(){var i=this.getAppHeight();$("#main").css({"min-height":i.min}),$(".common-widget-map").css({height:i.mapHeight,top:i.mapTop})},resize:function(i){function e(){setTimeout(function(){$(document.body).css("min-height",window.innerHeight)},1),listener.trigger("common","sizechange",{width:i.target.innerWidth,height:i.target.innerHeight,delay:!0})}var t=i.type,n={onorientationchange:function(){setTimeout(function(){e()},1e3)},resize:function(){e()}};t&&n[t]()}}});
;define("common:widget/map/iwcontroller.js",function(i,n,o){i("common:static/js/mapconst.js"),o.exports={_instances:{0:"PoiInfoWindow",1:"PoiInfoWindow",2:"TrsInfoWindow",3:"PoiInfoWindow",4:"TrsInfoWindow",5:"TrsInfoWindow",6:"TrsInfoWindow",7:"PoiInfoWindow",10:"TfcInfoWindow",11:"PoiInfoWindow"},_infoWindows:{},_overlay:null,init:function(i){return this._map=i,this},get:function(i){if(!this._instances[i])return this._overlay;var n,o;this._infoWindows[i]?n=this._infoWindows[i]:(o=this[this._instances[i]],n=this._infoWindows[i]=o.init(i),n._type=i);for(var t=this._map.getOverlays(),s=0,e=t.length;e>s;s++)if(n==t[s])return this._setOverlay(n);return n instanceof BMap.Overlay&&this._map.addOverlay(n),this._setOverlay(n)},_setOverlay:function(i){return this._overlay&&this._overlay!==i&&this._overlay.hide(),this._overlay=i,this._overlay.show(),i}}});
;define("common:widget/monitor/maplog.js",function(e,t,n){function o(){var e=window._APP_HASH||{},t=e.module,n=e.action,o=("MAP_"+t+"_"+n).toUpperCase();return SDC.DICT[o]?SDC.createApp(SDC.DICT[o]):u}function r(){L.mark("c_map_load"),f.removeEventListener("load",r)}function i(){D=Date.now(),f.removeEventListener("onTrafficvectorbegin",i)}function a(){D&&(E.start_event(D),E.view_time(),E.ready(1)),f.removeEventListener("onTrafficvectorloaded",a)}function c(){l=Date.now(),f.removeEventListener("onvectorbegin",c)}function d(){p=Date.now(),f.removeEventListener("ontilesbegin",d)}function v(){l&&(L.mark("c_vector_begin",l),u.mark("c_vct_st",l),g.mark("c_vct_st",l)),L.mark("c_vector_load"),L.view_time(),L.ready(1),u.mark("c_vct_lt_"+C),u.view_time(),u.ready(1),g.view_time(),g.ready(1),f.removeEventListener("onvectorloaded",v),f.removeEventListener("ontilesloaded",s)}function s(){p&&(L.mark("c_tiles_begin",p),u.mark("c_rst_st",p),A.mark("c_rst_st",p)),L.mark("c_tiles_load"),L.view_time(),L.ready(1),u.mark("c_rst_lt_"+C),u.view_time(),u.ready(1),A.view_time(),A.ready(1),f.removeEventListener("onvectorloaded",v),f.removeEventListener("ontilesloaded",s)}var m=e("common:static/js/util.js"),_=e("common:widget/pagemgr/pagemgr.js");e("common:widget/url/url.js");var l,p,D,C=(window.netspeed,_.isLandingPage()?"ild":"uld");m.isAndroid()?"and":m.isIPad()?"ipd":m.isIPhone()?"iph":"oth";var f,u=SDC.createApp(SDC.DICT.MAP_OTHER_PAGE),L=SDC.createApp(SDC.DICT.MAP_AVG),g=SDC.createApp(SDC.DICT.MAP_VCT),A=SDC.createApp(SDC.DICT.MAP_TIL),E=SDC.createApp(SDC.DICT.TRAFFIC_LAD);n.exports={init:function(){var e=function(){u=o(),L.start_event(),u.start_event(),g.start_event(),A.start_event()},t=function(){L.mark("c_js_load"),L.mark("c_js_lt_"+C)},n=function(e,t){f=t,f.addEventListener("load",r),f.addEventListener("onvectorbegin",c),f.addEventListener("ontilesbegin",d),f.addEventListener("onvectorloaded",v),f.addEventListener("ontilesloaded",s),f.addEventListener("onTrafficvectorbegin",i),f.addEventListener("onTrafficvectorloaded",a)};listener.once("common.map","start",e),listener.once("common.map","jsloaded",t),listener.once("common.map","init",n)}}});
;define("common:widget/map/map.js",function(e,t,i){var o=e("common:static/js/mapconst.js"),n=e("common:widget/pagemgr/pagemgr.js"),a=e("common:static/js/util.js"),r=e("common:widget/url/url.js"),s=e("common:widget/appresize/appresize.js"),l=e("common:widget/geolocation/location.js"),c=e("common:widget/map/iwcontroller.js"),d=e("common:widget/stat/stat.js");i.exports={MARKERS_PATH:"/mobile/simple/static/common/images/markers_d2cfab5.png",DEST_MKR_PATH:"/mobile/simple/static/common/images/dest_mkr_4dfb043.png",NAVI_MKR_PATH:"/mobile/simple/static/common/images/navigation_d11feb4.png",DRV_DIRECTION_PATH:"/mobile/simple/static/common/images/drv_dest_a021ac0.png",DRV_KEY_POI_PATH:"/mobile/simple/static/common/images/drv_pin_c99bbd5.png",BUS_DIRECTION_PATH:"/mobile/simple/static/common/images/bus_direction_d783d51.png",_initialized:!1,driveRoutes:[],destPois:[],init:function(t){var i=this;i._initialized?(i.show(),t&&t(i._BMap),i.trafficControl.update()):(e("common:widget/monitor/maplog.js").init(),listener.trigger("common.map","start"),i.getAsyncWidget(function(){var e=i._BMap=arguments[0];listener.trigger("common.map","jsloaded"),$.each(arguments,function(e,t){t._className_&&(/InfoWindow/.test(t._className_)?c[t._className_]=t:i[t._className_]=t)}),i._initMap(),t&&t(e),i._initialized=!0}))},setVector:function(){this.map.config.vectorMapLevel=12},setTiles:function(){this.config.vectorMapLevel=99,window._WISE_INFO&&window._WISE_INFO.netspeed<=300&&this.map.enableHighResolution()},setViewport:function(e,t){var i=this._map.getViewport(e,t),o=i.center,n=i.zoom;this._centerAndZoom(o,n)},_centerAndZoom:function(e,t){e&&t||(e=new BMap.Point(l.getPointX(),l.getPointY()),t=l.getLevel()),this._map.enableLoadTiles=!0,this._map.centerAndZoom(e,t)},_initMap:function(){this.DEST_MARKER_SIZE=new this._BMap.Size(29,35),this.DEST_MARKER_ANCHOR=new this._BMap.Size(15,34),this.DEST_DRIVER_DIR_SIZE=new this._BMap.Size(18,18),this.show();var e=this._map=new this._BMap.Map("map-holder",{maxZoom:18,minZoom:3,drawMargin:0,enableFulltimeSpotClick:!0,enableHigholution:!1,vectorMapLevel:12});e.enableLoadTiles=!1,e.enableInertialDragging(),this._bind(),this._initControl(),this._mapClick(),listener.trigger("common.map","init",e)},hide:function(){$(".common-widget-map").css("visibility","hidden")},show:function(){s.update(),$(".common-widget-map").css("visibility","visible"),this._fixCenterPos()},_bind:function(){var e=this,t=this._map,i=this._BMap;listener.on("common.geolocation","success",function(t,o){var s=r.get(),c=s.module,d=s.action,m=s.pageState||{},_=n.isLandingPage(),h=new i.Point(o.point.x,o.point.y);o.isExactPoi&&null!=o.type&&(o.isInitGeo===!1||1==m.showmygeo||"index"==c&&"index"==d&&_)&&!l.isUserInput()?e.addGLCenter(h):null==o.type&&void 0!=e.geolocationMarker&&l.isUserInput()&&(e._map.removeOverlay(e.geolocationMarker),e.geolocationMarker=void 0);var p=o.addr.accuracy;null!==p&&e.addGLCircle(h,p),(o.isInitGeo===!1||1==m.showmygeo||"index"==c&&"index"==d&&_)&&e._map.centerAndZoom(h,l.getLevel()),a.isIPad()&&(o.isExactPoi&&null!=o.type&&"index"==c&&"index"==d?e.addGLCenter(h):e.iwController.get().hide(),"index"==c&&"index"==d&&e._map.centerAndZoom(h,l.getLevel()))},this),t.addEventListener("ontilesloaded",function(){e._addLazyControl(),t.removeEventListener("ontilesloaded",arguments.callee)}),t.addEventListener("onvectorloaded",function(){e._addLazyControl(),t.removeEventListener("onvectorloaded",arguments.callee)}),e.addControlTimer=window.setTimeout(function(){e._addLazyControl()},3e3),listener.on("common.page","switchend",function(){}),listener.on("common.page","pageloaded",function(){/map/.test(window._APP_HASH.page)||e.hide()})},_mapClick:function(){var e=this,t=this._map;listener.on("infowindow."+o.IW_VCT,"click",function(e,t){var i=t.id,o=t.data,n=t.instance;switch(i){case"iw-l":n.nbSearch(o.name,o.geo);break;case"iw-c":n.detailSearch(o.uid);break;case"iw-r":n.lineSearch(o.name,o.geo)}}),t.addEventListener("onvectorclick",function(i){var n=e.iwController.get();if(!n||!n.skipClickHandler){var a=i.iconInfo;if(a.uid&&a.name&&a.point){d.addStat(COM_STAT_CODE.MAP_VECTOR_MARKER_CLICK);var r=t.pixelToPoint(a.point);n=e.iwController.get(o.IW_VCT),n.setData(o.IW_VCT,{json:[{uid:a.uid,name:a.name,geo:"1|"+r.lng+","+r.lat}]}).switchTo(0)}}}),t.addEventListener("click",function(){var t=e.iwController.get();t&&(t.handled?(t.handled=!1,t.skipClickHandler=!0):(t.skipClickHandler=!1,t.hide()))}),t.addEventListener("touchstart",function(){e.menuControl&&e.menuControl.hideMenuDrop(),e.geoControl&&e.geoControl.hideInfoBar()})},_addSyncControl:function(){var e=this._BMap,t=this._map;if(this.isMyCenter()){var i=l.getCenterPoi(),o=new e.Point(i.x,i.y),n=l.getAccuracy();this.addGLOverlay(o,n)}this.lineStepControl=new this.LineStepControl,t.addControl(this.lineStepControl),this.lineStepControl.hide(),this.iwController=c.init(t),t.addOverlay(this.iwController.get())},_addLazyControl:function(){if(!this._isAddControl){this._isAddControl=!0;var e=this._map;e.addControl(this.trafficControl),e.addControl(this.zoomControl),!a.isIPad()&&e.addControl(this.menuControl),e.addControl(this.geoControl),e.addControl(this.scaleControl),listener.trigger("common.map","addlazycontrol")}},_initControl:function(){var e=this,t=(this._map,this._BMap);this.trafficControl=new this.TrafficControl,this.trafficControl.addEventListener("click",function(t){d.addStat(COM_STAT_CODE.MAP_TRAFFIC_MARKER_CLICK);var i=e.iwController.get(o.IW_TFC);i.setData(o.IW_TFC,{json:[t.data]}).switchTo(0),e._singleMarker&&e._singleMarker.hide(),e.grMarker&&e.grMarker.hide()}),this.trafficControl.addEventListener("removelayer",function(){e.iwController.get(o.IW_TFC).hide()}),this.zoomControl=new this.ZoomControl,a.isIPad()||(this.menuControl=new this.MenuControl),this.geoControl=new this.GeoControl;var i=BMAP_ANCHOR_BOTTOM_LEFT,n=new t.Size(52,22);a.isIPad()&&(i=BMAP_ANCHOR_BOTTOM_RIGHT,n=new t.Size(16,16)),this.scaleControl=new t.ScaleControl({anchor:i,offset:n}),this._addSyncControl()},getAsyncWidget:function(t){e.async(["common:widget/api/api.js","common:widget/api/ext/circleoverlay.js","common:widget/api/ext/basecontrol.js","common:widget/api/ext/custommarker.js","common:widget/api/ext/geocontrol.js","common:widget/api/ext/linestepcontrol.js","common:widget/api/ext/menucontrol.js","common:widget/api/ext/zoomcontrol.js","common:widget/api/ext/trafficcontrol.js","common:widget/api/ext/userheading.js","common:widget/api/ext/poiinfowindow.js","common:widget/api/ext/trsinfowindow.js","common:widget/api/ext/tfcinfowindow.js"],t)},isMyCenter:function(){var e=l.getCenterPoi(),t=l.getMyCenterPoi();return l.hasExactPoi()&&!l.isUserInput()&&t&&t.x==e.x&&t.y==e.y?!0:!1},getBMap:function(){return this._BMap},getMap:function(){return this._map},getInfoWindow:function(e){return this.iwController.get(e)},getLineStepControl:function(){return this.lineStepControl},openGeoIw:function(){var e=l.getMyCenterPoi(),t=this.iwController.get(o.IW_CNT);t.setData(o.IW_CNT,{json:[{name:o.MY_GEO,html:"<b>{0}</b><p>{1}</p>".format(o.MY_GEO,l.getAddress()),geo:"1|"+e.x+","+e.y}]}).switchTo(0)},_bindGeoIWEvent:function(){listener.on("infowindow."+o.IW_CNT,"click",function(e,t){var i=t.id,o=t.data,n=t.instance;switch(i){case"iw-l":n.nbSearch(o.name,o.geo);break;case"iw-c":r.update({module:"index",action:"mylocation"},{trigger:!0,queryReplace:!0,pageStateReplace:!0});break;case"iw-r":n.lineSearch(o.name,o.geo)}})},_fixCenterPos:function(){var e=this;setTimeout(function(){e.geolocationMarker&&e.geolocationMarker.draw()},100)},addGLCenter:function(e){var t=this,i=this._map,o=this._BMap;if(this.geolocationMarker)this.geolocationMarker.setPoint(e);else{var n=new o.Icon(this.DEST_MKR_PATH,new o.Size(14,14),{anchor:new o.Size(7,7),imageOffset:new o.Size(80,0)}),a=new this.CustomMarker(n,e,{className:"dest_mkr",click:function(){d.addStat(COM_STAT_CODE.MAP_GEOLOCATION_MARKER_CLICK),t.openGeoIw()}});a.enableMassClear=!1,i.addOverlay(a),this.geolocationMarker=a,this.addUserHeading(a),this._bindGeoIWEvent(),this._fixCenterPos()}return listener.trigger("common.map","addcenter"),this.geolocationMarker},addUserHeading:function(e){e&&this.UserHeading.isSupport()&&!l.isUserInput()&&(e.setIcon(new BMap.Icon(this.NAVI_MKR_PATH,new BMap.Size(38,40),{anchor:new BMap.Size(19,20)})),e.setClassName("navi_mkr"),this.UserHeading.start(e.getContainer()))},addGLCircle:function(e,t){if(this.geolocationCircle)this.geolocationCircle.setInfo(e,t);else{var i=new this.CircleOverlay(e,t);this._map.addOverlay(i),this.geolocationCircle=i}return this.geolocationCircle},addGLOverlay:function(e,t){var i,o=this.addGLCenter(e);return null!==t&&this.addGLCircle(e,t),{center:o,circle:i}},clearOverlays:function(){this.grControl&&this.grControl.clearCache();var e=this.iwController.get();e&&e.hide(),this.lineStepControl&&this.lineStepControl.hide(),this._map.clearOverlays()},removeOverlayInArray:function(e){for(var t=0;t<e.length;t++)this._map.removeOverlay(e[t]);e=[]},addRoute:function(e,t){var i=o.ROUTE_DICT;if("undefined"==typeof t&&(t=0),i[t]){var n=i[t];e.length;var a={strokeWeight:n.stroke,strokeColor:n.color,strokeOpacity:n.opacity,strokeStyle:n.strokeStyle},r=new this._BMap.Polyline(e,a);if(this._map.addOverlay(r),r._routeType=t,t==o.ROUTE_TYPE_BUS){var s=new this._BMap.Polyline(e,{strokeWeight:n.stroke-2,strokeColor:"#fff",strokeOpacity:.3});r._p=s,this._map.addOverlay(s)}return r}},addDriveRoute:function(e){var t=this.addRoute(e,o.ROUTE_TYPE_DRIVE);return this.driveRoutes.push(t),t},removeDriveRoute:function(){this.removeOverlayInArray(this.driveRoutes)},removeRoute:function(e){e&&e._p instanceof this._BMap.Polyline&&(this._map.removeOverlay(e._p),e._p=null),this._map.removeOverlay(e),e=null},selectRoute:function(e){if(e instanceof this._BMap.Polyline){var t=["#ff0103","#ff0103","#ff0103","#ff0103","#ff0103","#ff0103","#ff0103"];t[e._routeType]&&(e.setStrokeColor(t[e._routeType]),e.draw())}},unselectRoute:function(e){if(e instanceof this._BMap.Polyline){var t=["#3a6bdb","#3a6bdb","#30a208","#3a6bdb","#3a6bdb","#30a208","#575757"];t[e._routeType]&&(e.setStrokeColor(t[e._routeType]),e.draw())}},addKeyPoiMarker:function(e,t,i){var o=a.getPoiPoint(e);if(o){var n=i?0:22,r=new this._BMap.Icon(this.DRV_KEY_POI_PATH,new this._BMap.Size(24,22),{anchor:new this._BMap.Size(12,22),imageOffset:new this._BMap.Size(0,n)}),s=new this.CustomMarker(r,o),l=document.createElement("div");return l.className="nplb",l.style.width=t.length+"em",l.innerHTML=t,this._map.addOverlay(s),s._div.appendChild(l),s}},addDirectionMarker:function(e,t){var i=a.getPoiPoint(e);if(i){(0>t||t>12)&&(t=0);var o=18*t,n=new this._BMap.Icon(this.DRV_DIRECTION_PATH,this.DEST_DRIVER_DIR_SIZE,{anchor:new this._BMap.Size(9,9),imageOffset:new this._BMap.Size(o,0)}),r=new this.CustomMarker(n,i,{className:"drv_dest"});return this._map.addOverlay(r),r}},addDestPoi:function(e,t){if(e=a.getPoiPoint(e)){var i=new this._BMap.Icon(this.DEST_MKR_PATH,this.DEST_MARKER_SIZE,{anchor:this.DEST_MARKER_ANCHOR,imageOffset:new this._BMap.Size(29*t,0)}),o=new this.CustomMarker(i,e,{className:"dest_mkr"});return this._map.addOverlay(o),o.setZIndex(400),this.destPois.push(o),o}},removeDestPoi:function(){this.removeOverlayInArray(this.destPois)}}});
;define("common:static/js/util.js",function(n,t,e){"use strict";Date.prototype.format=function(n){var t,e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(n)&&(n=n.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(t in e)new RegExp("("+t+")").test(n)&&(n=n.replace(RegExp.$1,1===RegExp.$1.length?e[t]:("00"+e[t]).substr((""+e[t]).length)));return n},String.prototype.format=function(){var n=[];n=Array.apply(n,arguments);var t=this.replace(/\{([0-9]+)\}/g,function(t,e){var i=n[parseInt(e,10)];return"undefined"==typeof i?"":i});return t};var i={encodeHTML:function(n){return String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&quot;").replace(/'/g,"&#39;")},urlToJSON:function(n){if(!n)return{};var t,e,i,o={},a=n.split("&");for(t=0,i=a.length;i>t;t++)e=a[t].split("="),o[e[0]]=decodeURIComponent(e[1]);return o},jsonToUrl:function(n){if(!n)return"";var t,e=[];for(t in n)n.hasOwnProperty(t)&&e.push(t+"="+encodeURIComponent(n[t]));return e.join("&")},isAndroid:function(){return/android/i.test(navigator.userAgent)},isIOS:function(){return/iphone|ipad|ipod/i.test(navigator.userAgent)},isIPhone:function(){return/iphone/i.test(navigator.userAgent)},isIPad:function(){return/ipad/i.test(navigator.userAgent)},isIPod:function(){return/ipod/i.test(navigator.userAgent)},getIosVersion:function(){return/OS 7_\d[_\d]* like Mac OS X/i.test(navigator.userAgent)},geoToPoint:function(n){if("string"==typeof n){var t,e,i=n.split("|");return 1===parseInt(i[0],10)?(t=i[1].split(","),e={lng:parseFloat(t[0]),lat:parseFloat(t[1])}):void 0}},jsonToQuery:function(n,t){var e,i,o=[];t=t||function(n){return n};for(e in n)n.hasOwnProperty(e)&&(i=n[e],i&&o.push(e+"="+t(i)));return o.join("&")},need2ShowTraffic:function(){for(var t=n("common:widget/geolocation/location.js"),e=n("common:widget/url/url.js"),i=e.get().query,o=o||i&&i.code||t.getCityCode(),a=[131,289,257,340,348,75,167,92,178,53,132,315,163,218,180,150,300,333,58,317,244,179,332,158,194,134,119,138,140,187,236,261,104,224,233,288],r=0;r<a.length;r++)if(o==a[r])return!0;return!1},ifSupportSubway:function(n){var t={131:"beijing,北京,131",289:"shanghai,上海,289",257:"guangzhou,广州,257",340:"shenzhen,深圳,340",2912:"hongkong,香港,2912",75:"chengdu,成都,75",53:"changchun,长春,53",132:"chongqing,重庆,132",167:"dalian,大连,167",138:"foshan,佛山,138",179:"hangzhou,杭州,179",104:"kunming,昆明,104",315:"nanjing,南京,315",58:"shenyang,沈阳,58",224:"suzhou,苏州,224",332:"tianjin,天津,332",218:"wuhan,武汉,218",233:"xian,西安,233",48:"haerbin,哈尔滨,48",beijing:"beijing,北京,131",shanghai:"shanghai,上海,289",guangzhou:"guangzhou,广州,257",shenzhen:"shenzhen,深圳,340",hongkong:"hongkong,香港,2912",chengdu:"chengdu,成都,75",changchun:"changchun,长春,53",chongqing:"chongqing,重庆,132",dalian:"dalian,大连,167",foshan:"foshan,佛山,138",hangzhou:"hangzhou,杭州,179",kunming:"kunming,昆明,104",nanjing:"nanjing,南京,315",shenyang:"shenyang,沈阳,58",suzhou:"suzhou,苏州,224",tianjin:"tianjin,天津,332",wuhan:"wuhan,武汉,218",xian:"xian,西安,233",haerbin:"haerbin,哈尔滨,48"},e=navigator.userAgent,i=/android((\s)*|\/)(1\.\d|2\.[12])/i,o=/FlyFlow/i,a=!(i.test(e)||o.test(e));return a?t[n]:!1},showLoading:function(n){var t=this;t.$pageLoading=i.LoadingBox,t.$pageLoading.show(n);var e=n.css("position");"static"==e&&n.css("position","relative")},hideLoading:function(n,t){var e=function(){n?n.children(".page-loading").length>0&&n.children(".page-loading").remove():$(".page-loading").remove()},i=parseInt(t,10);i&&i>-1?setTimeout(function(){e()},i):e()},create:function(n,t){var e=document.createElement(n);t=t||{};for(var i in t)if("style"!==i){if(t[i])if(e.setAttribute)e.setAttribute(i,t[i]);else try{e[i]=t[i]}catch(e){}}else e.style.cssText=t[i];return e},nativeInfo:{},getNativeInfo:function(n,t,e){var i="http://127.0.0.1:6259/getpackageinfo?packagename="+n,o=this;"object"==typeof o.nativeInfo[n]?t&&t(o.nativeInfo[n]):"number"==typeof o.nativeInfo[n]&&o.nativeInfo[n]>=2?e&&e():$.ajax({url:i,dataType:"jsonp",success:function(e){o.nativeInfo[n]=e,t&&t(e)},error:function(){o.nativeInfo[n]=o.nativeInfo[n]||0,o.nativeInfo[n]++,e&&e()}})},isInstalledClient:function(n,t,e){var i=this;i.getNativeInfo("com.baidu.BaiduMap",function(o){var a=0==o.error;a?$.isFunction(n)&&n(i.getClientUrl("open",e)):$.isFunction(t)&&t(i.getClientUrl("download",e))},function(){$.isFunction(t)&&t(i.getClientUrl("download",e))})},getClientUrl:function(n,t){var e=this,i="";if(e.os=e.isAndroid()?"android":e.isIPhone()?"iphone":e.isIPad()?"ipad":"unknown","download"===n)i="http://mo.baidu.com/map/code/?from=gw10015";else if(n="open")switch(e.os){case"android":i=t?"bdapp://map/place/detail?uid="+t+"&src=baidu|lbswebapp":"bdapp://map/";break;case"iphone":i=t?"baidumap://map/place/detail?uid="+t+"&src=baidu|lbswebapp":"baidumap://map/";break;case"ipad":i=t?"baidumap://map/place/detail?uid="+t+"&src=baidu|lbswebapp":"baidumap://map/";break;case"unknown":i=t?"bdapp://map/place/detail?uid="+t+"&src=baidu|lbswebapp":"bdapp://map/";default:i="http://mo.baidu.com/map"}return i},setHrefStat:function(n,t,e){return n&&t?(e?n.attr("href",t).attr("data-log","{code:"+e+"}"):n.attr("href",t),n):void 0},bindHrefStat:function(n,t){var e=function(e){e.stopPropagation(),e.preventDefault(),t(),setTimeout(function(){window.navigator.standalone?window.open(n.attr("data")):n.attr("data")&&(window.location.href=n.attr("data"))},200)};n.bind("click",e)},getPoiPoint:function(t){var e=n("common:widget/map/map.js").getBMap(),i=[],o=null;if("Point"===t.toString())o=t;else{if("string"==typeof t){if(i=$.trim(t).split(","),i.length<2)return;i[0]=parseFloat($.trim(i[0])),i[1]=parseFloat($.trim(i[1]))}else if(i=t.slice(0),i.length<2)return;o=new e.Point(i[0],i[1])}return o},getPointByStr:function(t){var e=n("common:widget/map/map.js").getBMap();if("string"==typeof t){var i=t.split(",");if(!(i.length<2))return new e.Point(i[0],i[1])}}};i.TelBox={bindEvent:function(){$("#telBox").on("click .ok-telbox",function(){$("#telBox").off(),$("#telBox").remove()}),$("#telBox").on("click .cancel-telbox",function(){$("#telBox").off(),$("#telBox").remove()})},showTb:function(n){if(n){$("#telBox")[0]&&$("#telBox").remove();var t=[];t.push('<div id="telBox" class="telbox">'),t.push('<div class="t"></div>'),t.push('<div  class="c">'),t.push('<div class="t1">拨打电话</div><div>'),t.push('<button class="bt qx cancel-telbox" >取消</button>'),t.push('<a href="wtai://wp/mc;'+$.trim(n)+'"><button class="bt qd ok-telbox" >确定</button></a>'),t.push("</div></div></div>"),$("body").append(t.join("")),this.bindEvent()}}},i.DownBox={bindEvent:function(){var t=$("#downBox button").eq(1),e=$("#downBox button").eq(0);t.on("click",function(){n("common:widget/stat/stat.js").addCookieStat(COM_STAT_CODE.TOP_BANNER_APP_ERROR_DOWN),$("#downBox").remove()}),e.on("click",function(){n("common:widget/stat/stat.js").addCookieStat(COM_STAT_CODE.TOP_BANNER_APP_ERROR_CANCEL),$("#downBox").remove()})},showTb:function(){$("#downBox")[0]&&$("#downBox").remove();var n=[];n.push('<div id="downBox" class="downbox">'),n.push('<div class="t"></div>'),n.push('<div  class="c">'),n.push('<div class="t1">您还未安装百度地图客户端，立即前往下载</div><div>'),n.push('<button class="bt qx cancel-downbox" >继续使用网页版</button>'),n.push('<a href="http://itunes.apple.com/cn/app/id452186370?ls=1&mt=8"><button class="bt qd cancel-downbox" >去下载</button></a>'),n.push("</div></div></div>"),$("body").append(n.join("")),this.bindEvent()}},i.LoadingBox={show:function(n){if(n.children(".page-loading").length>0)return n.children(".page-loading");var t=i.create("div",{"class":"mappic-loading page-loading slide in",id:"loadingbox"}),e='<div>                           <span class="dot-1"></span>                           <span class="dot-2"></span>                           <span class="dot-3"></span>                           <span class="dot-4"></span>                           <span class="dot-5"></span>                           <span class="dot-6"></span>                           <span class="dot-7"></span>                           <span class="dot-8"></span>                      </div>';return $(t).html(e),n&&n.append($(t)),$(t).show(),$(t)}};var o=["=",".","-","*"],a=1<<23;$.extend(i,{decode_geo_diff:function(n){for(var t=this._decode_type(n.charAt(0)),e=n.substr(1),i=0,a=e.length,r=[],s=[],u=[];a>i;)if(e.charAt(i)===o[0]){if(13>a-i)return 0;if(u=this._decode_6byte_(e.substr(i,13),r),0>u)return 0;i+=13}else if(";"===e.charAt(i))s.push(r.slice(0)),r.length=0,++i;else{if(8>a-i)return 0;if(u=this._decode_4byte_(e.substr(i,8),r),0>u)return 0;i+=8}for(var d=0,c=s.length;c>d;d++)for(var p=0,l=s[d].length;l>p;p++)s[d][p]/=100;return{geoType:t,geo:s}},_decode_type:function(n){var t=-1;return n===o[1]?t=2:n===o[2]?t=1:n===o[3]&&(t=0),t},_decode_6byte_:function(n,t){for(var e=0,i=0,o=0,a=0;6>a;a++){if(o=this._char2num_(n.substr(1+a,1)),0>o)return-1-a;if(e+=o<<6*a,o=this._char2num_(n.substr(7+a,1)),0>o)return-7-a;i+=o<<6*a}return t.push(e),t.push(i),0},_decode_4byte_:function(n,t){var e=t.length;if(2>e)return-1;for(var i=0,o=0,r=0,s=0;4>s;s++){if(r=this._char2num_(n.substr(s,1)),0>r)return-1-s;if(i+=r<<6*s,r=this._char2num_(n.substr(4+s,1)),0>r)return-5-s;o+=r<<6*s}return i>a&&(i=a-i),o>a&&(o=a-o),t.push(t[e-2]+i),t.push(t[e-1]+o),0},_char2num_:function(n){var t=n.charCodeAt(0);return n>="A"&&"Z">=n?t-"A".charCodeAt(0):n>="a"&&"z">=n?26+t-"a".charCodeAt(0):n>="0"&&"9">=n?52+t-"0".charCodeAt(0):"+"===n?62:"/"===n?63:-1},getPoiPoint:function(n){var t=[],e=null;if("Point"===n.toString())e=n;else{if("string"==typeof n){if(t=$.trim(n).split(","),t.length<2)return;t[0]=parseFloat($.trim(t[0])),t[1]=parseFloat($.trim(t[1]))}else if(t=n.slice(0),t.length<2)return;e=new BMap.Point(t[0],t[1])}return e},parseGeo:function(n){if("string"==typeof n){var t=n.split("|"),e=parseInt(t[0]),i=t[1],o=t[2],a=o.split(";"),r=[];switch(e){case 1:r.push(a[0]);break;case 2:case 3:for(var s=0;s<a.length-1;s++){var u=a[s];if(u.length>100)u=u.replace(/([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0|[1-9]\d*),([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0|[1-9]\d*)(,)/g,"$1,$2;"),r.push(u);else{for(var d=[],c=u.split(","),p=0;p<c.length;p+=2){var l=c[p],g=c[p+1];d.push(l+","+g)}r.push(d.join(";"))}}}return r.length<=1&&(r=r.toString()),{type:e,bound:i,points:r}}},parse2Geo:function(n,t){t?.25>t?t=0:t>.25&&1>t?t=1:t>32&&(t=32):t=0;var e=n.split("|");if(1===e.length){var i=this.decode_geo_diff(e[0]);return{type:i.type,bound:"",points:i.geo.join(",")}}if(e.length>1){for(var o=n.split(";.="),a=[],r=[],s=0,u=o.length,d=0;u>d;d++){var c=o[d];u>1&&(0===d&&(c+=";"),d>0&&u-1>d&&(c=".="+c+";"),d===u-1&&(c=".="+c));var p=c.split("|"),l=this.decode_geo_diff(p[0]),g=this.decode_geo_diff(p[1]);a.push(l.geo.join(",")),a.push(g.geo.join(","));var i=this.decode_geo_diff(p[2]);s=i.type;var h=i.geo.join(",");if(h=h.replace(/([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0|[1-9]\d*),([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0|[1-9]\d*)(,)/g,"$1,$2;"),t>0){var f=new RegExp("(((-?\\d+)(\\.\\d+)?),((-?\\d+)(\\.\\d+)?);)(((-?\\d+)(\\.\\d+)?),((-?\\d+)(\\.\\d+)?);){"+t+"}","ig");h=h.replace(f,"$1")}r.push(h)}return 1>=u&&(r=r.join(";")),{type:s,bound:a.join(";"),points:r}}},getBPoints:function(n){if(n&&0!==n.length){for(var t=[],e=0;e<n.length;e++)if(n[e])for(var o=n[e].split(";"),a=0;a<o.length;a++){var r=i.getPointByStr(o[a]);t.push(r)}return t}}}),e.exports=i});
;define("common:widget/stat/stat.js",function(t,e,n){var o=t("common:widget/cookie/cookie.js"),i=t("common:static/js/util.js"),a=20138,c=function(){var t=o.get("flow_ctrl")||!1;return t===!1?!1:!0}(),r=function(e,n,o){var i={expires:1e4,path:"/"},a=t("common:widget/cookie/cookie.js"),o=o||function(){},n=n||{};n=$.extend({module:window._APP_HASH.module,action:window._APP_HASH.action,page:window._APP_HASH.page,third_party:window._APP_HASH.third_party},n),e&&(n.code=e,n.trackCode=e),a.set("H_MAP_CLK",JSON.stringify(n),i),o()},d=function(t){if("object"==typeof t&&t.code)return r(t.code,t),void 0;if("string"==typeof t)try{for(var e=t.replace(/[{}"']/g,"").split(","),n={},i=0;i<e.length;i++){var a=e[i].split(":");n[$.trim(a[0])]=$.trim(a[1])}r(n.code,n)}catch(c){}else null==o.get("H_MAP_CLK")&&r("",{})},u=function(){listener&&listener.on("common.page","switchstart",function(t,e){var n,o=e.target;o&&(n=$(o).data("log")),d(n)}),$(document).on("click","a,[data-href]",function(){var t=$(this).data("log");d(t)})},s=function(){var t="/mobile/img/t.gif?newmap=1";return/(&|\?)(kehuduan=1|nostat=1)(&|$|#)/.test(location.href)&&(t="/mobile/img/nostat.gif?newmap=1"),function(){return t}}(),_=function(e,n,o){var o=o||function(){};if(e){n=n||{},c&&(n.flow_ctrl=!0),n.module=_APP_HASH.module,n.action=_APP_HASH.action,n.page=_APP_HASH.page,n.net_type=_WISE_INFO.netype;var a=i.jsonToUrl(n),r=function(t){var e=s();t&&(_._sending=!0,setTimeout(function(){$("#statImg")[0].src=e+t.src,$(document).trigger("addStat",t.code)},50),o())},d=function(){var t=_._reqQueue.shift();t&&r(t)},u=Date.now(),g=t("common:widget/geolocation/location.js"),f={src:"&t="+u+"&code="+e+"&c="+g.getCityCode()+"&"+a,code:e};_._sending?_._reqQueue.push(f):r(f),_._binded||($("#statImg").on("load",function(){_._sending=!1,d()}),$("#statImg").on("error",function(){_._sending=!1,d()}),_._binded=!0)}};_._reqQueue=[];var g=function(){var t=a,e={},n=!1,o=200,i=!1,c=[],r=function(o){if(!n){var a=o||{},r=o.pid||"unkown",u=o.page_id||"unkown",s={pid:r,page_id:u},g=e;c.push(s),a.step_len=c.length,a.time=Date.now(),a=$.extend({},a,s,g),_(t,a),e={ref_pid:s.pid,ref_page_id:s.page_id},(!window.checkLandingPage()||i)&&d(),i=!0}},d=function(){n=!0;var t=setTimeout(function(){n=!1,clearTimeout(t)},o)};return r}();n.exports={addStat:_,sendPvStat:g,initClickStat:u,addCookieStat:r}});
;define("common:static/js/gmu/src/widget/suggestion/suggestion.js",function(t){t("common:static/js/gmu/src/core/widget.js"),t("common:static/js/gmu/src/extend/highlight.js");var i=t("common:widget/stat/stat.js");!function(t,e){var n=0;gmu.define("Suggestion",{options:{historyShare:!0,confirmClearHistory:!0,autoClose:!1,appendContanier:document.body},template:{wrapper:'<div class="ui-suggestion"><div class="ui-suggestion-content"></div><div class="ui-suggestion-button"><span class="ui-suggestion-clear">清除历史记录</span><span class="ui-suggestion-close"></span></div></div>'},_initDom:function(){var i=this,e=i.getEl().attr("autocomplete","off"),o=e.parent(".ui-suggestion-mask");return o.length?i.$mask=o:e.wrap(i.$mask=t('<div class="ui-suggestion-mask"></div>')),i.$wrapper=t(i.tpl2html("wrapper")),i._options.appendContanier?t(i._options.appendContanier).append(i.$wrapper):i.$mask.append(i.$wrapper),i.$wrapper.prop("id","ui-suggestion-"+n++),i.$content=i.$wrapper.css("top",e.height()+(i.wrapperTop=parseInt(i.$wrapper.css("top"),10)||0)).find(".ui-suggestion-content"),i.$btn=i.$wrapper.find(".ui-suggestion-button"),i.$clearBtn=i.$btn.find(".ui-suggestion-clear"),i.$closeBtn=i.$btn.find(".ui-suggestion-close"),i.trigger("initdom")},_bindEvent:function(){var i=this,e=i.getEl(),n=i.eventNs;return i._options.autoClose&&t(document).on("click"+n,function(e){!t.contains(i.$mask.get(0),e.target)&&i.hide()}),e.on("focus"+n,function(){!i.isShow&&i._showList().trigger("open")}),e.on("input"+n,function(){i._showList()}),i.$clearBtn.on("click"+n,function(){i.history(null)}).highlight("ui-suggestion-highlight"),i.$closeBtn.on("click"+n,function(){i.getEl().blur(),i.hide().trigger("close")}).highlight("ui-suggestion-highlight"),i},_create:function(){var i=this,e=i._options,o=e.historyShare;return e.container&&(i.$el=t(e.container)),i.key=o?("boolean"===t.type(o)?"":o+"-")+"SUG-Sharing-History":i.getEl().attr("id")||"ui-suggestion-"+n++,i.separator=encodeURIComponent(","),i._initDom()._bindEvent(),i},_showList:function(){var i,e=this,n=e.value();if(n){if("我的位置"==n)return e;e.trigger("sendrequest",n,t.proxy(e._render,e),t.proxy(e._cacheData,e))}else(i=e._localStorage())?e._render(n,i.split(e.separator)):e.hide();return e},_render:function(i,e){this.trigger("renderlist",e,i,t.proxy(this._fillWrapper,this))},_fillWrapper:function(t){return this.$clearBtn[this.value()?"hide":"show"](),t?(this.$content.html(t),this.show()):this.hide(),this},_localStorage:function(i){var n,o,s=this,r=s.key,a=s.separator;try{if(n=e.localStorage,void 0===i)return n[r];null===i?n[r]="":i&&(o=n[r]?n[r].split(a):[],~t.inArray(i,o)&&(index=o.indexOf(i),o.splice(index,1)),o.unshift(i),window.localStorage[r]=o.join(a))}catch(c){console.log(c.message)}return s},_cacheData:function(t,i){return this.cacheData||(this.cacheData={}),void 0!==i?this.cacheData[t]=i:this.cacheData[t]},value:function(){return this.getEl().val()},history:function(t){var n=this,o=null!==t||function(){return i.addStat(COM_STAT_CODE.SUG_CLEAR_HISTORY_BTN),n._localStorage(null).hide()};return null===t?n._options.confirmClearHistory?e.confirm("清除全部查询历史记录？")&&o():o():n._localStorage(t)},show:function(){return this.isShow?this:(this.$wrapper.show(),this.isShow=!0,i.addStat(COM_STAT_CODE.SUG_ONLINE_SHOW),this.trigger("show"))},hide:function(){return this.isShow?(this.$wrapper.hide(),this.isShow=!1,i.addStat(COM_STAT_CODE.SUG_HISTORY_SHUTUP),this.trigger("hide")):this},destroy:function(){var i=this,e=i.getEl(),n=i.ns;return i.trigger("destroy"),e.off(n),i.$mask.replaceWith(e),i.$clearBtn.off(n),i.$closeBtn.off(n),i.$wrapper.children().off().remove(),i.$wrapper.remove(),i._options.autoClose&&t(document).off(n),this.destroyed=!0,i}})}(gmu.$,window)});
;define("common:static/js/gmu/src/widget/suggestion/$quickdelete.js",function(i){i("common:static/js/gmu/src/widget/suggestion/suggestion.js"),function(i,e){i.Suggestion.register("quickdelete",{_init:function(){var i,t,u=this;u.on("ready",function(){i=u.getEl(),t=u.eventNs,u.$mask.append(u.$quickDel=e('<div class="ui-suggestion-quickdel"></div>')),i.on("focus"+t+" input"+t,function(){u["_quickDel"+(e.trim(i.val())?"Show":"Hide")]()}),i.on("blur"+t,function(){u._quickDelHide()}),u.$quickDel.on("click"+t,function(e){e.preventDefault(),e.formDelete=!0,i.val(""),u.trigger("delete").trigger("input")._quickDelHide(),i.blur().focus()}),u.on("destroy",function(){u.$quickDel.off().remove()})})},_quickDelShow:function(){this.quickDelShow||(i.staticCall(this.$quickDel.get(0),"css","visibility","visible"),this.quickDelShow=!0)},_quickDelHide:function(){this.quickDelShow&&(i.staticCall(this.$quickDel.get(0),"css","visibility","hidden"),this.quickDelShow=!1)}})}(gmu,gmu.$)});
;define("common:static/js/gmu/src/widget/suggestion/renderlist.js",function(t){t("common:static/js/gmu/src/widget/suggestion/suggestion.js"),t("common:static/js/gmu/src/extend/highlight.js");var n=t("common:widget/stat/stat.js");!function(t){t.extend(gmu.Suggestion.options,{isHistory:!0,usePlus:!1,listCount:5,renderlist:null}),gmu.Suggestion.option("renderlist",function(){return"function"!==t.type(this._options.renderlist)},function(){var i=this,s=t("<div></div>"),e=function(t){return s.text(t).html()},o=function(n,s){var o=i._options,r=[];return s&&s.length?(s=s.slice(0,o.listCount),n=e(n||""),t.each(s,function(i,s){t.trim(s),s=s.split("$"),n?r.push('<li><div class="ui-suggestion-result">'+(s[3]?'<span class="query-icon"></span><span>'+(n&&t.trim(s[3]).replace(n,"<font>"+n+"</font>"))+"</span>":"")+"<span>"+s[0]+(n&&s[1])+"</span></div></li>"):r.push('<li><div class="ui-suggestion-result">'+(s[3]?"<span>"+(n&&t.trim(s[3]).replace(n,"<font>"+n+"</font>"))+"</span>":"")+'<span class="history-icon"></span><span>'+s[0]+(n&&s[1])+"</span></div></li>")}),r):(i.hide(),r)};i.on("ready",function(){var i=this,s=i.eventNs,e=t(i._options.form||i.getEl().closest("form"));e.size()&&(i.$form=e.on("submit"+s,function(t){var n=gmu.Event("submit");i._options.isHistory&&i._localStorage(i.value()),i.trigger(n),n.isDefaultPrevented()&&t.preventDefault()})),i.$content.on("click"+s,function(s){var o=i.getEl(),r=t(s.target);r.hasClass("ui-suggestion-plus")?o.val(r.attr("data-item")):t.contains(i.$content.get(0),r.get(0))&&(""===o.val()?(n.addStat(COM_STAT_CODE.SUG_HISTORY_SEARCH,{from:o.attr("id")}),n.addCookieStat(COM_STAT_CODE.SUG_HISTORY_SEARCH,{from:o.attr("id")})):(n.addStat(COM_STAT_CODE.SUG_ONLINE_SEARCH,{from:o.attr("id")}),n.addCookieStat(COM_STAT_CODE.SUG_ONLINE_SEARCH,{from:o.attr("id")})),setTimeout(function(){o.val(r.parent().find("span:nth-child(2)").text()),i.trigger("select",r).hide(),e.length&&e.submit()},400))}).highlight("ui-suggestion-highlight"),i.on("destroy",function(){e.size()&&e.off(s),i.$content.off()})}),i.on("renderlist",function(t,n,i,s){var e=o(i,n);return s(e.length?"<ul>"+e.join(" ")+"</ul>":"")})})}(gmu.$)});
;define("common:static/js/gmu/src/widget/suggestion/sendrequest.js",function(e){e("common:static/js/gmu/src/widget/suggestion/suggestion.js");var n=e("common:widget/geolocation/location.js");!function(e,t){e.extend(gmu.Suggestion.options,{isCache:!0,queryKey:"wd",cbKey:"cb",sendrequest:null,beforesendrequest:null}),gmu.Suggestion.option("sendrequest",function(){return"function"!==e.type(this._options.sendrequest)},function(){var o,i=this,s=i._options,u=s.queryKey,c=s.cbKey,g=(s.param,s.isCache);this.on("sendrequest",function(a,r,m,d){var p=n.getCityCode()||1,f={},y="";n.hasExactPoi()&&(f.minX=n.getPointX()-5e3,f.minY=n.getPointY()-5e3,f.maxX=n.getPointX()+5e3,f.maxY=n.getPointY()+5e3,y="("+f.minX+","+f.minY+";"+f.maxX+","+f.maxY+")");var l="cid="+p+"&b="+y+"&type=0&newmap=1&ie=utf-8",q=s.source,w="suggestion_"+ +new Date;return g&&(o=d(r))?(m(r,o),i):(q=(q+"&"+u+"="+encodeURIComponent(r)).replace(/[&?]{1,2}/,"?"),!~q.indexOf("&"+c)&&(q+="&"+c+"="+w),l&&(q+="&"+l),t[w]=function(e){m(r,e.s),g&&d(r,e.s),delete t[w]},e.ajax({url:q,dataType:"jsonp"}),i)})})}(gmu.$,window)});
;define("common:static/js/iscroll.js",function(o,t,e){function r(o){return""===s?o:(o=o.charAt(0).toUpperCase()+o.substr(1),s+o)}var l=document,n=Math,i=l.createElement("div").style,s=function(){for(var o,t="t,webkitT,MozT,msT,OT".split(","),e=0,r=t.length;r>e;e++)if(o=t[e]+"ransform",o in i)return t[e].substr(0,t[e].length-1);return!1}(),a=s?"-"+s.toLowerCase()+"-":"",c=r("transform"),p=r("transitionProperty"),m=r("transitionDuration"),d=r("transformOrigin"),h=r("transitionTimingFunction"),u=r("transitionDelay"),S=/android/gi.test(navigator.appVersion),b=/iphone|ipad/gi.test(navigator.appVersion),f=/hp-tablet/gi.test(navigator.appVersion),x=r("perspective")in i,g="ontouchstart"in window&&!f,v=s!==!1,y=r("transition")in i,w="onorientationchange"in window?"orientationchange":"resize",Y=g?"touchstart":"mousedown",T=g?"touchmove":"mousemove",X=g?"touchend":"mouseup",_=g?"touchcancel":"mouseup",z=function(){if(s===!1)return!1;var o={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"};return o[s]}(),k="click",M=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(o){return setTimeout(o,1)}}(),E=function(){return window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),D=x?" translateZ(0)":"",C=function(o,t){var e,r=this;r.wrapper="object"==typeof o?o:l.getElementById(o),r.wrapper.style.overflow="hidden",r.scroller=r.wrapper.children[0],r.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:S,hideScrollbar:b,fadeScrollbar:b&&x,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(o){o.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(e in t)r.options[e]=t[e];r.x=r.options.x,r.y=r.options.y,r.options.useTransform=v&&r.options.useTransform,r.options.hScrollbar=r.options.hScroll&&r.options.hScrollbar,r.options.vScrollbar=r.options.vScroll&&r.options.vScrollbar,r.options.zoom=r.options.useTransform&&r.options.zoom,r.options.useTransition=y&&r.options.useTransition,r.options.zoom&&S&&(D=""),r.scroller.style[p]=r.options.useTransform?a+"transform":"top left",r.scroller.style[m]="0",r.scroller.style[d]="0 0",r.options.useTransition&&(r.scroller.style[h]="cubic-bezier(0.33,0.66,0.66,1)"),r.options.useTransform?r.scroller.style[c]="translate("+r.x+"px,"+r.y+"px)"+D:r.scroller.style.cssText+=";position:absolute;top:"+r.y+"px;left:"+r.x+"px",r.options.useTransition&&(r.options.fixedScrollbar=!0),r.refresh(),r._bind(w,window),r._bind(Y),g||"none"!=r.options.wheelAction&&(r._bind("DOMMouseScroll"),r._bind("mousewheel")),r.options.checkDOMChanges&&(r.checkDOMTime=setInterval(function(){r._checkDOMChanges()},500)),this.options.handleClick&&(Event.prototype.stopImmediatePropagation||(document.body.removeEventListener=function(o,t,e){var r=Node.prototype.removeEventListener;"click"===o?r.call(document.body,o,t.hijacked||t,e):r.call(document.body,o,t,e)},document.body.addEventListener=function(o,t,e){var r=Node.prototype.addEventListener;"click"===o?r.call(document.body,o,t.hijacked||(t.hijacked=function(o){o.propagationStopped||t(o)}),e):r.call(document.body,o,t,e)}),r._bind(k,document.body,!0))};C.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(o){var t=this;switch(o.type){case Y:if(!g&&0!==o.button)return;t._start(o);break;case T:t._move(o);break;case X:case _:t._end(o);break;case w:t._resize();break;case"DOMMouseScroll":case"mousewheel":t._wheel(o);break;case z:t._transitionEnd(o);break;case k:t._click(o)}},_checkDOMChanges:function(){this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale||this.refresh()},_scrollbar:function(o){var t,e=this;return e[o+"Scrollbar"]?(e[o+"ScrollbarWrapper"]||(t=l.createElement("div"),e.options.scrollbarClass?t.className=e.options.scrollbarClass+o.toUpperCase():t.style.cssText="position:absolute;z-index:100;"+("h"==o?"height:7px;bottom:1px;left:2px;right:"+(e.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(e.hScrollbar?"7":"2")+"px;top:2px;right:1px"),t.style.cssText+=";pointer-events:none;"+a+"transition-property:opacity;"+a+"transition-duration:"+(e.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(e.options.hideScrollbar?"0":"1"),e.wrapper.appendChild(t),e[o+"ScrollbarWrapper"]=t,t=l.createElement("div"),e.options.scrollbarClass||(t.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+a+"background-clip:padding-box;"+a+"box-sizing:border-box;"+("h"==o?"height:100%":"width:100%")+";"+a+"border-radius:3px;border-radius:3px"),t.style.cssText+=";pointer-events:none;"+a+"transition-property:"+a+"transform;"+a+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+a+"transition-duration:0;"+a+"transform: translate(0,0)"+D,e.options.useTransition&&(t.style.cssText+=";"+a+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),e[o+"ScrollbarWrapper"].appendChild(t),e[o+"ScrollbarIndicator"]=t),"h"==o?(e.hScrollbarSize=e.hScrollbarWrapper.clientWidth,e.hScrollbarIndicatorSize=n.max(n.round(e.hScrollbarSize*e.hScrollbarSize/e.scrollerW),8),e.hScrollbarIndicator.style.width=e.hScrollbarIndicatorSize+"px",e.hScrollbarMaxScroll=e.hScrollbarSize-e.hScrollbarIndicatorSize,e.hScrollbarProp=e.hScrollbarMaxScroll/e.maxScrollX):(e.vScrollbarSize=e.vScrollbarWrapper.clientHeight,e.vScrollbarIndicatorSize=n.max(n.round(e.vScrollbarSize*e.vScrollbarSize/e.scrollerH),8),e.vScrollbarIndicator.style.height=e.vScrollbarIndicatorSize+"px",e.vScrollbarMaxScroll=e.vScrollbarSize-e.vScrollbarIndicatorSize,e.vScrollbarProp=e.vScrollbarMaxScroll/e.maxScrollY),e._scrollbarPos(o,!0),void 0):(e[o+"ScrollbarWrapper"]&&(v&&(e[o+"ScrollbarIndicator"].style[c]=""),e[o+"ScrollbarWrapper"].parentNode.removeChild(e[o+"ScrollbarWrapper"]),e[o+"ScrollbarWrapper"]=null,e[o+"ScrollbarIndicator"]=null),void 0)},_resize:function(){var o=this;setTimeout(function(){o.refresh()},S?200:0)},_pos:function(o,t){this.zoomed||(o=this.hScroll?o:0,t=this.vScroll?t:0,this.options.useTransform?this.scroller.style[c]="translate("+o+"px,"+t+"px) scale("+this.scale+")"+D:(o=n.round(o),t=n.round(t),this.scroller.style.left=o+"px",this.scroller.style.top=t+"px"),this.x=o,this.y=t,this._scrollbarPos("h"),this._scrollbarPos("v"))},_scrollbarPos:function(o,t){var e,r=this,l="h"==o?r.x:r.y;r[o+"Scrollbar"]&&(l=r[o+"ScrollbarProp"]*l,0>l?(r.options.fixedScrollbar||(e=r[o+"ScrollbarIndicatorSize"]+n.round(3*l),8>e&&(e=8),r[o+"ScrollbarIndicator"].style["h"==o?"width":"height"]=e+"px"),l=0):l>r[o+"ScrollbarMaxScroll"]&&(r.options.fixedScrollbar?l=r[o+"ScrollbarMaxScroll"]:(e=r[o+"ScrollbarIndicatorSize"]-n.round(3*(l-r[o+"ScrollbarMaxScroll"])),8>e&&(e=8),r[o+"ScrollbarIndicator"].style["h"==o?"width":"height"]=e+"px",l=r[o+"ScrollbarMaxScroll"]+(r[o+"ScrollbarIndicatorSize"]-e))),r[o+"ScrollbarWrapper"].style[u]="0",r[o+"ScrollbarWrapper"].style.opacity=t&&r.options.hideScrollbar?"0":"1",r[o+"ScrollbarIndicator"].style[c]="translate("+("h"==o?l+"px,0)":"0,"+l+"px)")+D)},_click:function(o){if(o._fake===!0)return this.actualClickElement=o.target,this.fakeClickTimeStamp=Date.now(),!0;if(this.actualClickElement&&this.fakeClickTimeStamp){var t=600,e=Date.now()-this.fakeClickTimeStamp;if(e>t)return this.actualClickElement=null,this.fakeClickTimeStamp=null,!0}else{for(var r=o.target;r!=this.scroller&&r!=document.body;)r=r.parentNode;if(r==document.body)return!0}for(var l=o.target;1!=l.nodeType;)l=l.parentNode;var n=l.tagName.toLowerCase();return"select"!=n&&"input"!=n&&"textarea"!=n?(o.stopImmediatePropagation?o.stopImmediatePropagation():o.propagationStopped=!0,o.stopPropagation(),o.preventDefault(),this.actualClickElement=null,this.fakeClickTimeStamp=null,!1):void 0},_start:function(o){var t,e,r,l,i,s=this,a=g?o.touches[0]:o;s.enabled&&(s.options.onBeforeScrollStart&&s.options.onBeforeScrollStart.call(s,o),(s.options.useTransition||s.options.zoom)&&s._transitionTime(0),s.moved=!1,s.animating=!1,s.zoomed=!1,s.distX=0,s.distY=0,s.absDistX=0,s.absDistY=0,s.dirX=0,s.dirY=0,s.options.zoom&&g&&o.touches.length>1&&(l=n.abs(o.touches[0].pageX-o.touches[1].pageX),i=n.abs(o.touches[0].pageY-o.touches[1].pageY),s.touchesDistStart=n.sqrt(l*l+i*i),s.originX=n.abs(o.touches[0].pageX+o.touches[1].pageX-2*s.wrapperOffsetLeft)/2-s.x,s.originY=n.abs(o.touches[0].pageY+o.touches[1].pageY-2*s.wrapperOffsetTop)/2-s.y,s.options.onZoomStart&&s.options.onZoomStart.call(s,o)),s.options.momentum&&(s.options.useTransform?(t=getComputedStyle(s.scroller,null)[c].replace(/[^0-9\-.,]/g,"").split(","),e=+(t[12]||t[4]),r=+(t[13]||t[5])):(e=+getComputedStyle(s.scroller,null).left.replace(/[^0-9-]/g,""),r=+getComputedStyle(s.scroller,null).top.replace(/[^0-9-]/g,"")),(e!=s.x||r!=s.y)&&(s.options.useTransition?s._unbind(z):E(s.aniTime),s.steps=[],s._pos(e,r),s.options.onScrollEnd&&s.options.onScrollEnd.call(s))),s.absStartX=s.x,s.absStartY=s.y,s.startX=s.x,s.startY=s.y,s.pointX=a.pageX,s.pointY=a.pageY,s.startTime=o.timeStamp||Date.now(),s.options.onScrollStart&&s.options.onScrollStart.call(s,o),s._bind(T,window),s._bind(X,window),s._bind(_,window))},_move:function(o){var t,e,r,l=this,i=g?o.touches[0]:o,s=i.pageX-l.pointX,a=i.pageY-l.pointY,p=l.x+s,m=l.y+a,d=o.timeStamp||Date.now();return l.options.onBeforeScrollMove&&l.options.onBeforeScrollMove.call(l,o),l.options.zoom&&g&&o.touches.length>1?(t=n.abs(o.touches[0].pageX-o.touches[1].pageX),e=n.abs(o.touches[0].pageY-o.touches[1].pageY),l.touchesDist=n.sqrt(t*t+e*e),l.zoomed=!0,r=1/l.touchesDistStart*l.touchesDist*this.scale,r<l.options.zoomMin?r=.5*l.options.zoomMin*Math.pow(2,r/l.options.zoomMin):r>l.options.zoomMax&&(r=2*l.options.zoomMax*Math.pow(.5,l.options.zoomMax/r)),l.lastScale=r/this.scale,p=this.originX-this.originX*l.lastScale+this.x,m=this.originY-this.originY*l.lastScale+this.y,this.scroller.style[c]="translate("+p+"px,"+m+"px) scale("+r+")"+D,l.options.onZoom&&l.options.onZoom.call(l,o),void 0):(l.pointX=i.pageX,l.pointY=i.pageY,(p>0||p<l.maxScrollX)&&(p=l.options.bounce?l.x+s/2:p>=0||l.maxScrollX>=0?0:l.maxScrollX),(m>l.minScrollY||m<l.maxScrollY)&&(m=l.options.bounce?l.y+a/2:m>=l.minScrollY||l.maxScrollY>=0?l.minScrollY:l.maxScrollY),l.distX+=s,l.distY+=a,l.absDistX=n.abs(l.distX),l.absDistY=n.abs(l.distY),l.absDistX<6&&l.absDistY<6||(l.options.lockDirection&&(l.absDistX>l.absDistY+5?(m=l.y,a=0):l.absDistY>l.absDistX+5&&(p=l.x,s=0)),l.moved=!0,l._pos(p,m),l.dirX=s>0?-1:0>s?1:0,l.dirY=a>0?-1:0>a?1:0,d-l.startTime>300&&(l.startTime=d,l.startX=l.x,l.startY=l.y),l.options.onScrollMove&&l.options.onScrollMove.call(l,o)),void 0)},_end:function(o){if(!g||0===o.touches.length){var t,e,r,i,s,a,p,d,h=this,u=g?o.changedTouches[0]:o,S={dist:0,time:0},b={dist:0,time:0},f=(o.timeStamp||Date.now())-h.startTime,x=h.x,v=h.y;if(h._unbind(T,window),h._unbind(X,window),h._unbind(_,window),h.options.onBeforeScrollEnd&&h.options.onBeforeScrollEnd.call(h,o),h.zoomed)return d=h.scale*h.lastScale,d=Math.max(h.options.zoomMin,d),d=Math.min(h.options.zoomMax,d),h.lastScale=d/h.scale,h.scale=d,h.x=h.originX-h.originX*h.lastScale+h.x,h.y=h.originY-h.originY*h.lastScale+h.y,h.scroller.style[m]="200ms",h.scroller.style[c]="translate("+h.x+"px,"+h.y+"px) scale("+h.scale+")"+D,h.zoomed=!1,h.refresh(),h.options.onZoomEnd&&h.options.onZoomEnd.call(h,o),void 0;if(!h.moved){if(g)if(h.doubleTapTimer&&h.options.zoom)clearTimeout(h.doubleTapTimer),h.doubleTapTimer=null,h.options.onZoomStart&&h.options.onZoomStart.call(h,o),h.zoom(h.pointX,h.pointY,1==h.scale?h.options.doubleTapZoom:1),h.options.onZoomEnd&&setTimeout(function(){h.options.onZoomEnd.call(h,o)},200);else if(this.options.handleClick){for(t=u.target;1!=t.nodeType;)t=t.parentNode;e=t.tagName.toLowerCase(),"select"!=e&&"input"!=e&&"textarea"!=e?(r=l.createEvent("MouseEvents"),r.initMouseEvent("click",!0,!0,o.view,1,u.screenX,u.screenY,u.clientX,u.clientY,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,0,null),r._fake=!0,t.dispatchEvent(r)):t.focus()}return h._resetPos(400),h.options.onTouchEnd&&h.options.onTouchEnd.call(h,o),void 0}if(300>f&&h.options.momentum&&(S=x?h._momentum(x-h.startX,f,-h.x,h.scrollerW-h.wrapperW+h.x,h.options.bounce?h.wrapperW:0):S,b=v?h._momentum(v-h.startY,f,-h.y,h.maxScrollY<0?h.scrollerH-h.wrapperH+h.y-h.minScrollY:0,h.options.bounce?h.wrapperH:0):b,x=h.x+S.dist,v=h.y+b.dist,(h.x>0&&x>0||h.x<h.maxScrollX&&x<h.maxScrollX)&&(S={dist:0,time:0}),(h.y>h.minScrollY&&v>h.minScrollY||h.y<h.maxScrollY&&v<h.maxScrollY)&&(b={dist:0,time:0})),S.dist||b.dist)return a=n.max(n.max(S.time,b.time),10),h.options.snap&&(i=x-h.absStartX,s=v-h.absStartY,n.abs(i)<h.options.snapThreshold&&n.abs(s)<h.options.snapThreshold?h.scrollTo(h.absStartX,h.absStartY,200):(p=h._snap(x,v),x=p.x,v=p.y,a=n.max(p.time,a))),h.scrollTo(n.round(x),n.round(v),a),h.options.onTouchEnd&&h.options.onTouchEnd.call(h,o),void 0;if(h.options.snap)return i=x-h.absStartX,s=v-h.absStartY,n.abs(i)<h.options.snapThreshold&&n.abs(s)<h.options.snapThreshold?h.scrollTo(h.absStartX,h.absStartY,200):(p=h._snap(h.x,h.y),(p.x!=h.x||p.y!=h.y)&&h.scrollTo(p.x,p.y,p.time)),h.options.onTouchEnd&&h.options.onTouchEnd.call(h,o),void 0;h._resetPos(200),h.options.onTouchEnd&&h.options.onTouchEnd.call(h,o)}},_resetPos:function(o){var t=this,e=t.x>=0?0:t.x<t.maxScrollX?t.maxScrollX:t.x,r=t.y>=t.minScrollY||t.maxScrollY>0?t.minScrollY:t.y<t.maxScrollY?t.maxScrollY:t.y;return e==t.x&&r==t.y?(t.moved&&(t.moved=!1,t.options.onScrollEnd&&t.options.onScrollEnd.call(t)),t.hScrollbar&&t.options.hideScrollbar&&("webkit"==s&&(t.hScrollbarWrapper.style[u]="300ms"),t.hScrollbarWrapper.style.opacity="0"),t.vScrollbar&&t.options.hideScrollbar&&("webkit"==s&&(t.vScrollbarWrapper.style[u]="300ms"),t.vScrollbarWrapper.style.opacity="0"),void 0):(t.scrollTo(e,r,o||0),void 0)},_wheel:function(o){var t,e,r,l,n,i=this;if("wheelDeltaX"in o)t=o.wheelDeltaX/12,e=o.wheelDeltaY/12;else if("wheelDelta"in o)t=e=o.wheelDelta/12;else{if(!("detail"in o))return;t=e=3*-o.detail}return"zoom"==i.options.wheelAction?(n=i.scale*Math.pow(2,1/3*(e?e/Math.abs(e):0)),n<i.options.zoomMin&&(n=i.options.zoomMin),n>i.options.zoomMax&&(n=i.options.zoomMax),n!=i.scale&&(!i.wheelZoomCount&&i.options.onZoomStart&&i.options.onZoomStart.call(i,o),i.wheelZoomCount++,i.zoom(o.pageX,o.pageY,n,400),setTimeout(function(){i.wheelZoomCount--,!i.wheelZoomCount&&i.options.onZoomEnd&&i.options.onZoomEnd.call(i,o)},400)),void 0):(r=i.x+t,l=i.y+e,r>0?r=0:r<i.maxScrollX&&(r=i.maxScrollX),l>i.minScrollY?l=i.minScrollY:l<i.maxScrollY&&(l=i.maxScrollY),i.maxScrollY<0&&i.scrollTo(r,l,0),void 0)},_transitionEnd:function(o){var t=this;o.target==t.scroller&&(t._unbind(z),t._startAni())},_startAni:function(){var o,t,e,r=this,l=r.x,i=r.y,s=Date.now();if(!r.animating){if(!r.steps.length)return r._resetPos(400),void 0;if(o=r.steps.shift(),o.x==l&&o.y==i&&(o.time=0),r.animating=!0,r.moved=!0,r.options.useTransition)return r._transitionTime(o.time),r._pos(o.x,o.y),r.animating=!1,o.time?r._bind(z):r._resetPos(0),void 0;e=function(){var a,c,p=Date.now();return p>=s+o.time?(r._pos(o.x,o.y),r.animating=!1,r.options.onAnimationEnd&&r.options.onAnimationEnd.call(r),r._startAni(),void 0):(p=(p-s)/o.time-1,t=n.sqrt(1-p*p),a=(o.x-l)*t+l,c=(o.y-i)*t+i,r._pos(a,c),r.animating&&(r.aniTime=M(e)),void 0)},e()}},_transitionTime:function(o){o+="ms",this.scroller.style[m]=o,this.hScrollbar&&(this.hScrollbarIndicator.style[m]=o),this.vScrollbar&&(this.vScrollbarIndicator.style[m]=o)},_momentum:function(o,t,e,r,l){var i=6e-4,s=n.abs(o)/t,a=s*s/(2*i),c=0,p=0;return o>0&&a>e?(p=l/(6/(a/s*i)),e+=p,s=s*e/a,a=e):0>o&&a>r&&(p=l/(6/(a/s*i)),r+=p,s=s*r/a,a=r),a*=0>o?-1:1,c=s/i,{dist:a,time:n.round(c)}},_offset:function(o){for(var t=-o.offsetLeft,e=-o.offsetTop;o=o.offsetParent;)t-=o.offsetLeft,e-=o.offsetTop;return o!=this.wrapper&&(t*=this.scale,e*=this.scale),{left:t,top:e}},_snap:function(o,t){var e,r,l,i,s,a,c=this;for(l=c.pagesX.length-1,e=0,r=c.pagesX.length;r>e;e++)if(o>=c.pagesX[e]){l=e;break}for(l==c.currPageX&&l>0&&c.dirX<0&&l--,o=c.pagesX[l],s=n.abs(o-c.pagesX[c.currPageX]),s=s?500*(n.abs(c.x-o)/s):0,c.currPageX=l,l=c.pagesY.length-1,e=0;l>e;e++)if(t>=c.pagesY[e]){l=e;break}return l==c.currPageY&&l>0&&c.dirY<0&&l--,t=c.pagesY[l],a=n.abs(t-c.pagesY[c.currPageY]),a=a?500*(n.abs(c.y-t)/a):0,c.currPageY=l,i=n.round(n.max(s,a))||200,{x:o,y:t,time:i}},_bind:function(o,t,e){(t||this.scroller).addEventListener(o,this,!!e)},_unbind:function(o,t,e){(t||this.scroller).removeEventListener(o,this,!!e)},destroy:function(){var o=this;o.scroller.style[c]="",o.hScrollbar=!1,o.vScrollbar=!1,o._scrollbar("h"),o._scrollbar("v"),o._unbind(w,window),o._unbind(Y),o._unbind(T,window),o._unbind(X,window),o._unbind(_,window),o.options.hasTouch||(o._unbind("DOMMouseScroll"),o._unbind("mousewheel")),o.options.useTransition&&o._unbind(z),o.options.checkDOMChanges&&clearInterval(o.checkDOMTime),o.options.onDestroy&&o.options.onDestroy.call(o)},refresh:function(){var o,t,e,r,l=this,i=0,s=0;if(l.scale<l.options.zoomMin&&(l.scale=l.options.zoomMin),l.wrapperW=l.wrapper.clientWidth||1,l.wrapperH=l.wrapper.clientHeight||1,l.minScrollY=-l.options.topOffset||0,l.scrollerW=n.round(l.scroller.offsetWidth*l.scale),l.scrollerH=n.round((l.scroller.offsetHeight+l.minScrollY)*l.scale),l.maxScrollX=l.wrapperW-l.scrollerW,l.maxScrollY=l.wrapperH-l.scrollerH+l.minScrollY,l.dirX=0,l.dirY=0,l.options.onRefresh&&l.options.onRefresh.call(l),l.hScroll=l.options.hScroll&&l.maxScrollX<0,l.vScroll=l.options.vScroll&&(!l.options.bounceLock&&!l.hScroll||l.scrollerH>l.wrapperH),l.hScrollbar=l.hScroll&&l.options.hScrollbar,l.vScrollbar=l.vScroll&&l.options.vScrollbar&&l.scrollerH>l.wrapperH,o=l._offset(l.wrapper),l.wrapperOffsetLeft=-o.left,l.wrapperOffsetTop=-o.top,"string"==typeof l.options.snap)for(l.pagesX=[],l.pagesY=[],r=l.scroller.querySelectorAll(l.options.snap),t=0,e=r.length;e>t;t++)i=l._offset(r[t]),i.left+=l.wrapperOffsetLeft,i.top+=l.wrapperOffsetTop,l.pagesX[t]=i.left<l.maxScrollX?l.maxScrollX:i.left*l.scale,l.pagesY[t]=i.top<l.maxScrollY?l.maxScrollY:i.top*l.scale;else if(l.options.snap){for(l.pagesX=[];i>=l.maxScrollX;)l.pagesX[s]=i,i-=l.wrapperW,s++;for(l.maxScrollX%l.wrapperW&&(l.pagesX[l.pagesX.length]=l.maxScrollX-l.pagesX[l.pagesX.length-1]+l.pagesX[l.pagesX.length-1]),i=0,s=0,l.pagesY=[];i>=l.maxScrollY;)l.pagesY[s]=i,i-=l.wrapperH,s++;l.maxScrollY%l.wrapperH&&(l.pagesY[l.pagesY.length]=l.maxScrollY-l.pagesY[l.pagesY.length-1]+l.pagesY[l.pagesY.length-1])}l._scrollbar("h"),l._scrollbar("v"),l.zoomed||(l.scroller.style[m]="0",l._resetPos(400))},scrollTo:function(o,t,e,r){var l,n,i=this,s=o;for(i.stop(),s.length||(s=[{x:o,y:t,time:e,relative:r}]),l=0,n=s.length;n>l;l++)s[l].relative&&(s[l].x=i.x-s[l].x,s[l].y=i.y-s[l].y),i.steps.push({x:s[l].x,y:s[l].y,time:s[l].time||0});i._startAni()},scrollToElement:function(o,t){var e,r=this;o=o.nodeType?o:r.scroller.querySelector(o),o&&(e=r._offset(o),e.left+=r.wrapperOffsetLeft,e.top+=r.wrapperOffsetTop,e.left=e.left>0?0:e.left<r.maxScrollX?r.maxScrollX:e.left,e.top=e.top>r.minScrollY?r.minScrollY:e.top<r.maxScrollY?r.maxScrollY:e.top,t=void 0===t?n.max(2*n.abs(e.left),2*n.abs(e.top)):t,r.scrollTo(e.left,e.top,t))},scrollToPage:function(o,t,e){var r,l,n=this;e=void 0===e?400:e,n.options.onScrollStart&&n.options.onScrollStart.call(n),n.options.snap?(o="next"==o?n.currPageX+1:"prev"==o?n.currPageX-1:o,t="next"==t?n.currPageY+1:"prev"==t?n.currPageY-1:t,o=0>o?0:o>n.pagesX.length-1?n.pagesX.length-1:o,t=0>t?0:t>n.pagesY.length-1?n.pagesY.length-1:t,n.currPageX=o,n.currPageY=t,r=n.pagesX[o],l=n.pagesY[t]):(r=-n.wrapperW*o,l=-n.wrapperH*t,r<n.maxScrollX&&(r=n.maxScrollX),l<n.maxScrollY&&(l=n.maxScrollY)),n.scrollTo(r,l,e)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(T,window),this._unbind(X,window),this._unbind(_,window)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(z):E(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1},zoom:function(o,t,e,r){var l=this,n=e/l.scale;l.options.useTransform&&(l.zoomed=!0,r=void 0===r?200:r,o=o-l.wrapperOffsetLeft-l.x,t=t-l.wrapperOffsetTop-l.y,l.x=o-o*n+l.x,l.y=t-t*n+l.y,l.scale=e,l.refresh(),l.x=l.x>0?0:l.x<l.maxScrollX?l.maxScrollX:l.x,l.y=l.y>l.minScrollY?l.minScrollY:l.y<l.maxScrollY?l.maxScrollY:l.y,l.scroller.style[m]=r+"ms",l.scroller.style[c]="translate("+l.x+"px,"+l.y+"px) scale("+e+")"+D,l.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}},i=null,e.exports=C});
;var BigPipe=function(){function parseJSON(json){return window.JSON?JSON.parse(json):eval("("+json+")")}function ajax(e,t,r){var n=new(window.XMLHttpRequest||ActiveXObject)("Microsoft.XMLHTTP");n.onreadystatechange=function(){4==this.readyState&&t(this.responseText)},n.open(r?"POST":"GET",e+"&t="+~~(1e6*Math.random()),!0),r&&n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(r)}function getCommentById(e){var t=document.getElementById(e);if(!t)return"";var r=t.firstChild.nodeValue;return r=r.substring(1,r.length-1).replace(/\\([\s\S]|$)/g,"$1"),t.parentNode.removeChild(t),r}function renderPagelet(e,t,r){if(!(e.id in r)){r[e.id]=!0,e.parent_id&&renderPagelet(t[e.parent_id],t,r);var n=document.getElementById(e.id);n||(n=document.createElement("div"),n.id=e.id,container?container.appendChild(n):document.body.appendChild(n)),n.innerHTML=e.html||getCommentById(e.html_id)}}function render(e){var t,r=pagelets.length,n={},a={},e=e||{};for(t=0;r>t;t++){var o=pagelets[t];n[o.id]=o}for(t=0;r>t;t++)renderPagelet(pagelets[t],n,a);e.trigger===!0&&trigger("pagerendercomplete",{url:pageUrl,resource:resource})}function process(e,t){function r(){var r=getNeedLoad(e.js);if(e.style){var n=document.createElement("style");n.innerHTML=e.style,document.getElementsByTagName("head")[0].appendChild(n)}t(),r?LazyLoad.js(r,function(){recordLoaded(r),e.script&&window.eval(e.script),trigger("onpageloaded")}):(e.script&&window.eval(e.script),trigger("onpageloaded"))}e.async&&require.resourceMap(e.async);var n=getNeedLoad(e.css);n?LazyLoad.css(n.reverse(),function(){recordLoaded(n),r()}):r()}function getNeedLoad(e){var t=[];if("string"==typeof e)t=[e];else if("[object Array]"===Object.prototype.toString.call(e))for(var r=0;r<e.length;r++)loadedResource[e[r]]!==LOADED&&t.push(e[r]);return 0===t.length&&(t=null),t}function recordLoaded(e){var t=e;"string"==typeof t&&(t=[t]);for(var r=0;r<t.length;r++)loadedResource[e[r]]=LOADED}function register(e){process(e,function(){render({trigger:!0}),"function"==typeof onReady&&onReady()})}function fetch(e,t,r,n){var a,o=location.href,r=r||{},i={};containerId=t;var c=function(r,a){if(o===location.href&&t==containerId){pageUrl=e;var i=parseJSON(r);resource=i,trigger("pagearrived",a),onPagelets(i,t,n)}};isCacheAvailable(e)&&r.cache!==!1?(a=getCachedResource(e),i.initiator=initiatorType.FROM_CACHE,c(a,i),statRecord(e)):ajax(e,function(t){i.initiator=initiatorType.QUICKLING,addResourceToCache(e,t),c(t,i)})}function refresh(e,t,r,n){fetch(e,t,r,n)}function asyncLoad(e,t){e instanceof Array||(e=[e]);var r,n=[],a=location.href;for(r=e.length-1;r>=0;r--){var o=e[r].id;if(!o)throw Error("[BigPipe] missing pagelet id");n.push("pagelets[]="+o)}t=t?"&"+t:"";var i=location.href.split("#")[0]+"&"+n.join("&")+"&force_mode=1&is_widget=true"+t;ajax(i,function(e){if(a===location.href){var t=parseJSON(e);resource=t,pageUrl=i,pagelets=t.pagelets,process(t.resource_map,function(){render()})}})}function statRecord(e){if("string"==typeof e){var t=-1===e.indexOf("?")?"/?":"&";e=e+t+"pagecache=1",ajax(e,function(){})}}function addResourceToCache(e,t){resourceCache[e]={data:t,time:Date.now()}}function getCachedResource(e){return resourceCache[e]?resourceCache[e].data:void 0}function isCacheAvailable(e){return!!resourceCache[e]&&Date.now()-resourceCache[e].time<=cacheMaxTime}function onPageletArrived(e){pagelets.push(e)}function onPagelets(e,t,r){e.title&&(document.title=e.title),container=document.getElementById(t),container.innerHTML="",pagelets=e.pagelets,process(e.resource_map,function(){r&&r(),render({trigger:!0})})}function onPageReady(e){onReady=e,trigger("pageready",pagelets)}function onPageChange(e){fetch(location.pathname+(location.search?location.search+"&":"?")+"pagelets="+e)}function trigger(e){var t=events[e];if(t)for(var r=SLICE.call(arguments,1),n=0,a=t.length;a>n;n++){var o=t[n];if(o.f.apply(o.o,r)===!1)break}}function on(e,t,r){var n=events[e]||(events[e]=[]);n.push({f:t,o:r})}var pagelets=[],loadedResource={},container,containerId,pageUrl=location.pathname+(location.search?"?"+location.search:""),resource,resourceCache={},onReady,initiatorType={LANDING:0,QUICKLING:1,FROM_CACHE:2},LOADED=1,cacheMaxTime=3e5,SLICE=[].slice,events={};return{asyncLoad:asyncLoad,register:register,refresh:refresh,onPageReady:onPageReady,onPageChange:onPageChange,onPageletArrived:onPageletArrived,onPagelets:onPagelets,on:on,trigger:trigger}}();
;LazyLoad=function(e){function t(t,n){var s,r=e.createElement(t);for(s in n)n.hasOwnProperty(s)&&r.setAttribute(s,n[s]);return r}function n(e){var t,n,s=i[e];s&&(t=s.callback,n=s.urls,n.shift(),u=0,n.length||(t&&t.call(s.context,s.obj),i[e]=null,f[e].length&&r(e)))}function s(){var t=navigator.userAgent;o={async:e.createElement("script").async===!0},(o.webkit=/AppleWebKit\//.test(t))||(o.ie=/MSIE|Trident/.test(t))||(o.opera=/Opera/.test(t))||(o.gecko=/Gecko\//.test(t))||(o.unknown=!0)}function r(r,u,h,g,d){var y,p,b,k,m,v,j=function(){n(r)},w="css"===r,T=[];if(o||s(),u)if(u="string"==typeof u?[u]:u.concat(),w||o.async||o.gecko||o.opera)f[r].push({urls:u,callback:h,obj:g,context:d});else for(y=0,p=u.length;p>y;++y)f[r].push({urls:[u[y]],callback:y===p-1?h:null,obj:g,context:d});if(!i[r]&&(k=i[r]=f[r].shift())){for(l||(l=e.head||e.getElementsByTagName("head")[0]),m=k.urls,y=0,p=m.length;p>y;++y){if(v=m[y],w?b=o.gecko?t("style"):t("link",{href:v,rel:"stylesheet"}):(b=t("script",{src:v}),b.async=!1),b.className="lazyload",b.setAttribute("charset","utf-8"),o.ie&&!w&&"onreadystatechange"in b&&!("draggable"in b))b.onreadystatechange=function(){/loaded|complete/.test(b.readyState)&&(b.onreadystatechange=null,j())};else if(w&&(o.gecko||o.webkit))if(o.webkit){var A;if(k.urls[y]=b.href,A=a()){y--,p=m.length;continue}}else b.innerHTML='@import "'+v+'";',c(b);else b.onload=b.onerror=j;T.push(b)}for(y=0,p=T.length;p>y;++y)l.appendChild(T[y])}}function c(e){var t;try{t=!!e.sheet.cssRules}catch(s){return u+=1,200>u?setTimeout(function(){c(e)},50):t&&n("css"),void 0}n("css")}function a(){var e,t=i.css,s=!1;if(t){for(e=h.length;--e>=0;)if(h[e].href===t.urls[0]){s=!0,n("css");break}u+=1,t&&(200>u?setTimeout(a,50):n("css"))}return s}var o,l,i={},u=0,f={css:[],js:[]},h=e.styleSheets;return{css:function(e,t,n,s){r("css",e,t,n,s)},js:function(e,t,n,s){r("js",e,t,n,s)}}}(this.document);
;!function(e){function t(e){var t={selector:"a,[data-href]",cacheMaxTime:3e5,pushState:!0,layer:document.body};A=u(t,e),P=A.cacheMaxTime,m=A.pushState,b=n(A.layer),y=g(),m===!0&&r()}function r(){window.addEventListener("popstate",o,!1),b.addEventListener("click",l,!0),BigPipe.on("pagerendercomplete",a,this),BigPipe.on("pagearrived",i,this),BigPipe.on("onpageloaded",c,this)}function n(e){return"string"==typeof e?document.querySelector(e):e&&e.nodeType?e:document.body}function o(e){var t=g();y&&t!==y&&(v("onpagerenderstart"),h(t,e.state))}function a(e){x[e.url]={resource:e.resource,time:Date.now()},v("onpagerendercomplete",{url:e.url})}function i(e){v("onpagearrived",e)}function c(){v("onpageloaded")}function u(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function l(e){for(var t=e.target,r=t,n=A.selector;r!==document.body;){if(p(r,n)){if(urlAttr="a"===r.tagName.toLowerCase()?"href":"data-href",url=r.getAttribute(urlAttr),d(url)){e.stopPropagation(),e.preventDefault();var o={replace:r.getAttribute("data-replace")||!1,containerId:r.getAttribute("data-area"),pagelets:r.getAttribute("data-area"),target:r};s(url,o)}return}r=r.parentNode}}function p(e,t){if(!e||1!==e.nodeType)return!1;var r,n,o=e.webkitMatchesSelector||e.matchesSelector;return o?n=o.call(e,t):(r=e.parentNode,n=!!r.querySelector(t)),n}function d(e){var t=A.validate,r=Object.prototype.toString.call(t);return"[object RegExp]"===r?t.test(e):"[object Function]"===r?t(e):!0}function f(e){return E.test(e)?RegExp.$5+(RegExp.$6?RegExp.$6:""):("console"in window&&console.error("[url error]:",e),void 0)}function g(){return f(window.location.href)}function s(e,t){if(e=f(e),g()!==e){var r,n={trigger:!0,forword:!0,replace:!1},o={url:e};if(t=u(n,t),o.target=t.target||null,t.trigger===!1)return m&&(r=t.replace?"replaceState":"pushState",window.history[r]({},document.title,e)),void 0;if(!m)return t.replace?location.replace(e):location.href=e,void 0;v("onpagerenderstart",o),h(e,t,function(){t.forword&&(r=t.replace?"replaceState":"pushState",window.history[r]({},document.title,e))})}}function h(e,t,r){if(e){var t=(Date.now(),t||{}),n=[],o={},a=t.containerId?t.containerId:A.containerId,i=t.pagelets?t.pagelets:A.pagelets;if("string"==typeof i&&(i=[i]),y=e,i.length>0){for(var c=0,u=i.length;u>c;c++)n.push("pagelets[]="+i[c]);e=-1===e.indexOf("?")?e+"/?"+n.join("&"):e+"&"+n.join("&")}t.cache===!1&&(o.cache=!1),BigPipe.refresh(e,a,o,function(){r&&r()})}}function v(e){var t=B[e];if(t)for(var r=j.call(arguments,1),n=0,o=t.length;o>n;n++){var a=t[n];if(a.f.apply(a.o,r)===!1)break}}function w(e,t,r){var n=B[e]||(B[e]=[]);n.push({f:t,o:r})}var y,m,b,S=e,x={},P=0,A={},E=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/i,j=[].slice,B={};S.appPage={start:t,redirect:s,on:w},"define"in window&&"undefined"!=typeof module&&(module.exports=S.appPage)}(this);
;define("common:static/js/searchdata.js",function(e,t,a){var c,n;c||(c=e("common:static/js/util.js")),n||(n=e("common:widget/geolocation/location.js"));var i={_cache:{length:0,index:0,data:{}},fetch:function(e,t,a){if(e)if(e=this._processUrl(e),this._getCacheData(e))t&&t(this._getCacheData(e));else{var c=this;$.ajax({url:"http://map.baidu.com"+e,dataType:"jsonp",success:function(n){try{var i=n;c._saveToCache(e,i),t&&t(i)}catch(o){a&&a()}},error:function(){a&&a()}})}},_processUrl:function(e){e=e.replace(/%3C/gi,encodeURIComponent(" ")).replace(/%3E/gi,encodeURIComponent(" "));var t="&from=maponline",a="&tn=m01",c="&ie=utf-8",n="&data_version=11252019",i="";return 0!=e.indexOf("/")&&(i="/mobile/?"),e=i+e+t+a+c+n},_getCacheData:function(e){return this._cache.data[e]&&this._cache.data[e].response||null},_saveToCache:function(e,t){this._cache.length>=i.MAX_CACHE&&this._removeOldData();var a=this._cache.index;this._cache.data[e]={index:a,response:t},this._cache.length++,this._cache.index++},_removeOldData:function(){var e=5,t=[];for(var a in this._cache.data)t.push({url:a,index:this._cache.data[a].index});t.sort(function(e,t){return e.index-t.index}),e=e>t.length?t.length:e;for(var c=0;e>c;c++)delete this._cache.data[t[c].url];this._cache.length-=e}};i.MAX_CACHE=10,a.exports=i});
;define("common:widget/popup/popup.js",function(e,t,o){o.exports={_defaultOptions:{autoCloseTime:2e3,isTouchHide:!1},_$el:null,_autoCloseTimeout:null,_create:function(e){var t,o;e.layer&&(o=$("<div/>").addClass("common-widget-popup-layer").appendTo(document.body)),t=$("<div></div>").addClass("common-widget-popup").text(e.text||"").hide().appendTo(document.body),this._layout(t),this._$el=t,this._$layer=o},_layout:function(e){var t,o;"none"===e.css("display")&&(o=e.css("visibility"),e.css({visibility:"visibile"}).show()),t=e.offset(),e.css({left:(innerWidth-t.width)/2,top:(innerHeight-t.height)/2,visibility:o})},open:function(e){var t=this;e=this._options=$.extend({},this._defaultOptions,"string"==typeof e?{text:e}:e),this._$el?(this._$el.text(e.text),this._layout(this._$el)):this._create(e),this._$el.show(),e.autoCloseTime&&(clearTimeout(this._autoCloseTimeout),this._autoCloseTimeout=setTimeout($.proxy(this.close,this),e.autoCloseTime)),e.isTouchHide?(this._$el.on("touchend",function(e){e.stopPropagation(),$("#bmap_pop_cover").hide(),t.close(),this._boxTouchHandle=arguments.callee,this._$el.off("touchend",arguments.callee)}),$(document.body).on("touchend",function(e){e.stopPropagation(),$("#bmap_pop_cover").hide(),t.close(),this._docTouchHandle=arguments.callee,$(document.body).off("touchend",arguments.callee)})):(this._boxTouchHandle&&this._$el.off("touchend",this._boxTouchHandle),this._docTouchHandle&&$(document.body).off("touchend",this._docTouchHandle)),listener.on("common","sizechange",function(){setTimeout(function(){t.setPos()},1e3)})},close:function(){var e;this._$layer&&(this._$layer.remove(),this._$layer=null),this._$el&&(this._$el.remove(),this._$el=null,$.isFunction(e=this._options.onClose)&&e.call(this),this._autoCloseTimeout=null)},setPos:function(){if(this._$el){var e=this._$el.offset(),t=(window.innerWidth-e.width)/2,o=(window.innerHeight-e.height)/2+window.scrollY;this._$el.css({left:t,top:o})}}}});
;define("common:widget/md5/md5.js",function(n,r,t){t.exports=function(){function n(n){return h(r(a(n),n.length*v))}function r(n,r){n[r>>5]|=128<<r%32,n[(r+64>>>9<<4)+14]=r;for(var t=1732584193,i=-271733879,a=-1732584194,h=271733878,d=0;d<n.length;d+=16){var v=t,A=i,g=a,l=h;t=u(t,i,a,h,n[d+0],7,-680876936),h=u(h,t,i,a,n[d+1],12,-389564586),a=u(a,h,t,i,n[d+2],17,606105819),i=u(i,a,h,t,n[d+3],22,-1044525330),t=u(t,i,a,h,n[d+4],7,-176418897),h=u(h,t,i,a,n[d+5],12,1200080426),a=u(a,h,t,i,n[d+6],17,-1473231341),i=u(i,a,h,t,n[d+7],22,-45705983),t=u(t,i,a,h,n[d+8],7,1770035416),h=u(h,t,i,a,n[d+9],12,-1958414417),a=u(a,h,t,i,n[d+10],17,-42063),i=u(i,a,h,t,n[d+11],22,-1990404162),t=u(t,i,a,h,n[d+12],7,1804603682),h=u(h,t,i,a,n[d+13],12,-40341101),a=u(a,h,t,i,n[d+14],17,-1502002290),i=u(i,a,h,t,n[d+15],22,1236535329),t=e(t,i,a,h,n[d+1],5,-165796510),h=e(h,t,i,a,n[d+6],9,-1069501632),a=e(a,h,t,i,n[d+11],14,643717713),i=e(i,a,h,t,n[d+0],20,-373897302),t=e(t,i,a,h,n[d+5],5,-701558691),h=e(h,t,i,a,n[d+10],9,38016083),a=e(a,h,t,i,n[d+15],14,-660478335),i=e(i,a,h,t,n[d+4],20,-405537848),t=e(t,i,a,h,n[d+9],5,568446438),h=e(h,t,i,a,n[d+14],9,-1019803690),a=e(a,h,t,i,n[d+3],14,-187363961),i=e(i,a,h,t,n[d+8],20,1163531501),t=e(t,i,a,h,n[d+13],5,-1444681467),h=e(h,t,i,a,n[d+2],9,-51403784),a=e(a,h,t,i,n[d+7],14,1735328473),i=e(i,a,h,t,n[d+12],20,-1926607734),t=o(t,i,a,h,n[d+5],4,-378558),h=o(h,t,i,a,n[d+8],11,-2022574463),a=o(a,h,t,i,n[d+11],16,1839030562),i=o(i,a,h,t,n[d+14],23,-35309556),t=o(t,i,a,h,n[d+1],4,-1530992060),h=o(h,t,i,a,n[d+4],11,1272893353),a=o(a,h,t,i,n[d+7],16,-155497632),i=o(i,a,h,t,n[d+10],23,-1094730640),t=o(t,i,a,h,n[d+13],4,681279174),h=o(h,t,i,a,n[d+0],11,-358537222),a=o(a,h,t,i,n[d+3],16,-722521979),i=o(i,a,h,t,n[d+6],23,76029189),t=o(t,i,a,h,n[d+9],4,-640364487),h=o(h,t,i,a,n[d+12],11,-421815835),a=o(a,h,t,i,n[d+15],16,530742520),i=o(i,a,h,t,n[d+2],23,-995338651),t=c(t,i,a,h,n[d+0],6,-198630844),h=c(h,t,i,a,n[d+7],10,1126891415),a=c(a,h,t,i,n[d+14],15,-1416354905),i=c(i,a,h,t,n[d+5],21,-57434055),t=c(t,i,a,h,n[d+12],6,1700485571),h=c(h,t,i,a,n[d+3],10,-1894986606),a=c(a,h,t,i,n[d+10],15,-1051523),i=c(i,a,h,t,n[d+1],21,-2054922799),t=c(t,i,a,h,n[d+8],6,1873313359),h=c(h,t,i,a,n[d+15],10,-30611744),a=c(a,h,t,i,n[d+6],15,-1560198380),i=c(i,a,h,t,n[d+13],21,1309151649),t=c(t,i,a,h,n[d+4],6,-145523070),h=c(h,t,i,a,n[d+11],10,-1120210379),a=c(a,h,t,i,n[d+2],15,718787259),i=c(i,a,h,t,n[d+9],21,-343485551),t=f(t,v),i=f(i,A),a=f(a,g),h=f(h,l)}return Array(t,i,a,h)}function t(n,r,t,u,e,o){return f(i(f(f(r,n),f(u,o)),e),t)}function u(n,r,u,e,o,c,f){return t(r&u|~r&e,n,r,o,c,f)}function e(n,r,u,e,o,c,f){return t(r&e|u&~e,n,r,o,c,f)}function o(n,r,u,e,o,c,f){return t(r^u^e,n,r,o,c,f)}function c(n,r,u,e,o,c,f){return t(u^(r|~e),n,r,o,c,f)}function f(n,r){var t=(65535&n)+(65535&r),u=(n>>16)+(r>>16)+(t>>16);return u<<16|65535&t}function i(n,r){return n<<r|n>>>32-r}function a(n){for(var r=Array(),t=(1<<v)-1,u=0;u<n.length*v;u+=v)r[u>>5]|=(n.charCodeAt(u/v)&t)<<u%32;return r}function h(n){for(var r=d?"0123456789ABCDEF":"0123456789abcdef",t="",u=0;u<4*n.length;u++)t+=r.charAt(15&n[u>>2]>>8*(u%4)+4)+r.charAt(15&n[u>>2]>>8*(u%4));return t}var d=0,v=8;return n}()});
;define("common:widget/login/login.js",function(o,n,e){o("common:static/js/util.js");var i=o("common:widget/cookie/cookie.js"),t=o("common:widget/stat/stat.js"),a=o("common:widget/url/url.js");o("common:widget/md5/md5.js"),e.exports={init:function(){_init()},checkLogin:function(o){$.ajax({type:"GET",url:"http://mc.map.baidu.com/passport/Session3.php?t="+Date.now(),dataType:"jsonp",timeout:2e3,success:function(n,e){if("success"==e&&"0"==n.bdErrCode&&""!=n.displayname){var a={domain:location.hostname,path:"/mobile",expires:6048e5};return i.set("myUserName",n.displayname,a),localStorage.loginErr&&(t.addCookieStat(COM_STAT_CODE.STAT_USER_LOGIN_SUCCESS),localStorage.removeItem("loginErr")),o&&o({status:!0,username:n.displayname}),!0}localStorage.loginErr=1,o&&o({status:!1,username:""})},error:function(){return localStorage.loginErr=1,o&&o({status:!1,username:""}),!1}})},loginAction:function(){t.addCookieStat(COM_STAT_CODE.STAT_USER_LOGIN_SHOW),location.href="http://wappass.baidu.com/passport/?authsite=1&u="+encodeURIComponent(document.location)},logoutAction:function(){t.addCookieStat(COM_STAT_CODE.STAT_USER_MYCENTER_LOGOUT_CLICK),i.remove("myUserName"),location.href="http://wappass.baidu.com/passport/?logout&u=http://"+location.host+"/mobile/webapp/index/index/force=simple"},goMycenter:function(){t.addCookieStat(COM_STAT_CODE.STAT_INDEX_HEAD_MYCENTER_CLICK),a.navigate("/mobile/webapp/user/mycenter/force=simple")},makeSysSign:function(o){var n=[],e="";for(var i in o)n.push(i);for(var t=0;t<n.length;t++)e+=n[t]+"="+encodeURIComponent(o[n[t]]);return hex_md5(e)},_init:function(){var o=location.search,n=location.search.substr(location.search.indexOf("shopId")+7);-1!=n.indexOf("&")?(window.config.shopId=n.substr(0,n.indexOf("&")),window.config.isappInstalled=n.substr(n.indexOf("isappInstalled")+15)):(window.config.shopId=n.substr(0),window.config.isappInstalled=0),/android/gi.test(navigator.appVersion)&&(window.config.platform="android"),/iphone|ipad/gi.test(navigator.appVersion)&&(window.config.platform="iphone");var e=o.substr(o.indexOf("?from=")+6);$("open").href=e.substr(0,e.indexOf("&"));var i={fields:'{"extends":{"more":1}}',sysTerminalType:window.config.platform+window.config["token_"+window.config.platform]},t=makeSysSign(i),a=window.config.dataSource+window.config.shopId+"?sysSign="+t+"&fields="+i.fields+"&sysTerminalType="+window.config.platform;scriptRequest(encodeURIComponent(a),"makeData")}}});
;define("common:widget/apphistory/apphistory.js",function(n,o,r){var t=function(){var n=i();return window.location.host===n},i=function(){var n,o=document.referrer,r=/^.*?\/\/(.*?)(\/|\?|\#|$)/i,t=o.match(r);return t&&(n=t[1]),n},a=function(){var n=i();return window.location.host!==n};r.exports={isLanding:a,isAppNavigator:t}});
;define("common:widget/backtop/backtop.js",function(o,n,i){var c=$(".common-widget-back-top");$(window).on("scroll",function(){window.scrollY<window.innerHeight/2?c.hide():c.show()}),i.exports={init:function(){c=$(".common-widget-back-top"),c.on("click",function(){window.scrollTo(0,1)})}}});
;define("common:widget/bottombanner/bottombanner.js",function(e,t,n){"use strict";var i=e("common:static/js/util.js"),a={loadCmsAdConfig:function(e){var t=(new Date).getTime(),n=document.getElementsByTagName("HEAD").item(0),i=document.createElement("script");i.type="text/javascript",i.src="http://map.baidu.com/zt/cms/ws.js?"+t,i.onload=$.proxy(e,this),n.appendChild(i)},getCurrentHash:function(){var e=window._APP_HASH,t=window.location.pathname.replace("/mobile/webapp/",""),n=t.split("/"),a=n[2],o=n[3];return{module:e.module,action:e.action,query:i.urlToJSON(a||""),pageState:i.urlToJSON(o||"")}},checkDisplayBanner:function(e){var t,n,i,a,o,r=[],s=window.bottomBannerDisplayRule,d=e.module,l=e.action,c=e.query,u=e.pageState;return s?($.each(s,function(e,s){t=[],s.module&&(n=s.module.substring(0,1),i=s.module.substring(1),t.push("!"===n?-1===i.indexOf(d):i.indexOf(d)>-1)),s.action&&(n=s.action.substring(0,1),i=s.action.substring(1),t.push("!"===n?-1===i.indexOf(l):i.indexOf(l)>-1)),s.query&&$.each(s.query,function(e,o){n=o.substring(0,1),i=o.substring(1),a=c[e]||void 0,t.push("!"===n?-1===i.indexOf(a):i.indexOf(a)>-1)}),s.pagestate&&$.each(s.pagestate,function(e,a){n=a.substring(0,1),i=a.substring(1),o=u[e]||void 0,t.push("!"===n?-1===i.indexOf(o):i.indexOf(o)>-1)}),r.push(-1===t.indexOf(!1))}),-1!==r.indexOf(!0)?!0:!1):!1},isHideBanner:function(){return this.bannerHide?(localStorage.hbt=Date.now(),!0):localStorage.hbt?Date.now()>Number(localStorage.hbt)+9e5?(localStorage.removeItem("hbt"),!1):!0:!1},getPageConfig:function(){var e,t,n,a=window.webapp_cms_bottom_download_img,o=this.getCurrentHash(),r=o.module,s=o.action,d=o.query,l=o.pageState,c={};if(this.cmsDisplayRule=window.bottomBannerDisplayRule,!a||!this.checkDisplayBanner(o)||this.isHideBanner())return null;try{e=a[r][s]}catch(u){e=null}try{a&&a.wd&&(t=new RegExp(a.wd.transitType,"g"),n=new RegExp(a.wd.driveType,"g"))}catch(u){}if(d.wd&&d.wd.search(t)>-1)try{e=a.transit.list}catch(u){}else if(d.wd&&d.wd.search(n)>-1)try{e=a.drive.list}catch(u){}else"groupon"===l.detail_part&&(e=a.groupon||e);if(!e){if(!a.other)return null;e=a.other}return e?(c.bgUrl=this.hasInstalled?e.openUrl:e.downloadImgUrl,c.srcUrl=i.isIPhone()?e.iponeSrc:i.isAndroid()?e.androidSrc:i.isIPad()?e.ipadSrc:e.androidSrc,c):null},renderAfterLoaded:function(){var e=this.getPageConfig();e?(this.$el.css("background-image","url("+e.bgUrl+")").attr("data-href",e.srcUrl).show(),listener.trigger("common","sizechange")):this.$el.hide()},init:function(e){this.bannerHide=e||!1,this.loadCmsAdConfig(function(){var e=this;this.$el=$(".common-widget-bottom-banner"),this.$el.on("click",function(){e.hasInstalled?location.href="bdapp://map/":open($(this).attr("data-href"),"_blank")}),window.webapp_cms_bottom_download_img&&(void 0===this.hasInstalled?i.getNativeInfo("com.baidu.BaiduMap",function(t){e.hasInstalled=0===t.error,e.renderAfterLoaded()},function(){e.hasInstalled=!1,e.renderAfterLoaded()}):e.renderAfterLoaded())})}};n.exports=a});
;define("common:widget/cover/cover.js",function(o,t,n){"use strict";var e=o("common:widget/cookie/cookie.js"),s=o("common:widget/stat/stat.js"),i=o("common:static/js/util.js");n.exports={netype:0,os:i.isAndroid()?"android":i.isIPhone()?"iphone":i.isIPad()?"ipad":"unknown",init:function(){this.checkCover(),this.initOpenDownload()},checkCover:function(){var o=e.get("hdCover");"1"===o&&this.closeCover()},sendStat:function(){__cover.hasClosed===!0&&(s.addStat(COM_STAT_CODE.COVER_HIDE,{os:this.os}),__cover.hasClosed=!1)},showCover:function(){s.addStat(COM_STAT_CODE.COVER_DISPLAY,{os:me.os})},showWebapp:function(){var o=this;s.addStat(COM_STAT_CODE.COVER_HIDE,{os:o.os}),$("#body-cover").css({display:"none"}),$("#wrapper").css("display","block")},initOpenDownload:function(){var o=this,t=$("#app-download"),n=$("#download_open");t.attr("data",i.getClientUrl("download")),i.isInstalledClient(function(e){n.html("打开"),t.attr("data",e),i.bindHrefStat(t,function(){s.addStat(COM_STAT_CODE.COVER_APP_OPEN,{os:o.os})})},function(e){n.html("下载"),t.attr("data",e),i.bindHrefStat(t,function(){s.addStat(COM_STAT_CODE.COVER_APP_DOWNLOAD,{os:o.os})})})},closeCover:function(){var o={path:"/mobile",expires:864e5};e.set("hdCover",1,o),this.showWebapp()}}});
;define("common:widget/datepicker/datepicker.js",function(t,e){var a=$;!function(t){var e,a,i,n=!1,r=function(){clearTimeout(a),e&&(i=e.attr("highlight-cls"))&&(e.removeClass(i).attr("highlight-cls",""),e=null)};t.extend(t.fn,{highlight:function(i){return n=n||!!t(document).on("touchend.highlight touchmove.highlight touchcancel.highlight",r),r(),this.each(function(){var n=t(this);n.css("-webkit-tap-highlight-color","rgba(255,255,255,0)").off("touchstart.highlight"),i&&n.on("touchstart.highlight",function(){a=setTimeout(function(){e=n.attr("highlight-cls",i).addClass(i)},100)})})}})}(a),function(t,e){function a(e,a){this._el=t(e),this._data=t.extend({date:null,firstDay:1,maxDate:null,minDate:null,container:null,gap:!0},a),i(e,this),this._init()}var i=function(){var t=0,a={},i="dp"+ +new Date;return function(n,r){var s=n[i]||(n[i]=t++);return r!==e&&(r?a[s]=r:delete a[s]),a[s]}}(),n=Array.prototype.slice,r=["01月","02月","03月","04月","05月","06月","07月","08月","09月","10月","11月","12月"],s=["日","一","二","三","四","五","六"],h=/^(\+|\-)?(\d+)(M|Y)$/i,o=function(t,e){return 32-new Date(t,e,32).getDate()},c=function(t,e){return new Date(t,e,1).getDay()};t.datepicker={parseDate:function(t){var e=/^(\d{4})\-(\d{1,2})\-(\d{1,2})$/;return"object"==typeof t?t:e.test(t)?new Date(parseInt(RegExp.$1,10),parseInt(RegExp.$2,10)-1,parseInt(RegExp.$3,10)):null},formatDate:function(e){var a=t.datepicker.formatNumber;return e.getFullYear()+"-"+a(e.getMonth()+1,2)+"-"+a(e.getDate(),2)},formatNumber:function(t,e){for(var a=""+t;a.length<e;)a="0"+a;return a}},t.extend(a.prototype,{root:function(t){return this._el=t||this._el},on:function(e,a){return this.root().on(e,t.proxy(a,this)),this},off:function(t,e){return this.root().off(t,e),this},trigger:function(e,a){e="string"==typeof e?t.Event(e):e;var i,n=this._data,r=n[e.type];return r&&"function"==typeof r&&(e.data=a,i=r.apply(this,[e].concat(a)),i===!1||e.defaultPrevented)?this:(this.root().trigger(e,a),this)},_init:function(){var e=this._data,a=t.proxy(this._eventHandler,this);e._container=this._el,this.date(e.date||new Date).minDate(e.minDate).maxDate(e.maxDate).refresh(),e._container.addClass("ui-datepicker").on("click",a).highlight(),e._isShow=e._inited=!0},_eventHandler:function(e){var a,i,n,r=this,s=r._data,h=s._container;i=e.target,(a=t(i).closest(".ui-datepicker-calendar tbody a",h.get(0)))&&a.length?(e.preventDefault(),n=a.parent(),this.selectedDate(new Date(n.attr("data-year"),n.attr("data-month"),a.text())),this._commit(),this.refresh()):(a=t(i).closest(".ui-datepicker-prev, .ui-datepicker-next",h.get(0)))&&a.length&&(e.preventDefault(),setTimeout(function(){r.goTo((a.is(".ui-datepicker-prev")?"-":"+")+"1M")},0))},_generateHTML:function(){var t,e,a,i,n,h,d,l,u,g,p,f,_=this._data,D="",m=_._drawYear,v=_._drawMonth,k=new Date,w=new Date(k.getFullYear(),k.getMonth(),k.getDate()),y=this.minDate(),x=this.maxDate(),b=this.selectedDate();for(n=parseInt(_.firstDay,10),n=isNaN(n)?0:n,D+='<div class="ui-datepicker-header"><a class="ui-datepicker-prev" href="#">&lt;&lt;</a><div class="ui-datepicker-title">'+_._drawYear+"年"+r[_._drawMonth]+"</div>"+'<a class="ui-datepicker-next" href="#">&gt;&gt;</a>'+"</div>",t="<thead><tr>",a=0;7>a;a++)h=(a+n)%7,t+="<th"+((a+n+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+"<span>"+s[h]+"</span></th>";for(t+="</thead></tr>",e="<tbody>",e+=_.gap?'<tr class="ui-datepicker-gap"><td colspan="7">&#xa0;</td></tr>':"",l=o(m,v),d=(c(m,v)-n+7)%7,u=Math.ceil((d+l)/7),g=new Date(m,v,1-d),a=0;u>a;a++){for(e+="<tr>",i=0;7>i;i++)p=g.getMonth()!==v,f=p||y&&y>g||x&&g>x,e+="<td class='"+((i+n+6)%7>=5?" ui-datepicker-week-end":"")+(p?" ui-datepicker-other-month":"")+(f?" ui-datepicker-unselectable ui-state-disabled":"")+(p||f?"":(g.getTime()===b.getTime()?" ui-datepicker-current-day":"")+(g.getTime()===w.getTime()?" ui-datepicker-today":""))+"'"+(f?"":" data-month='"+g.getMonth()+"' data-year='"+g.getFullYear()+"'")+">"+(p?"&#xa0;":f?"<span class='ui-state-default'>"+g.getDate()+"</span>":"<a class='ui-state-default"+(g.getTime()===w.getTime()?" ui-state-highlight":"")+(g.getTime()===b.getTime()?" ui-state-active":"")+"' href='#'>"+g.getDate()+"</a>")+"</td>",g.setDate(g.getDate()+1);e+="</tr>"}return e+="</tbody>",D+='<table  class="ui-datepicker-calendar">'+t+e+"</table>"},_commit:function(){var e,a=this._data,i=t.datepicker.formatDate(e=this.selectedDate());return a.date=e,a._inited&&this.trigger("valuecommit",[e,i,this]),this},option:function(a,i){var n=this._data;if(i!==e){switch(a){case"minDate":case"maxDate":n[a]=i?t.datepicker.parseDate(i):null;break;case"selectedDate":i=t.datepicker.parseDate(i),n._selectedYear=n._drawYear=i.getFullYear(),n._selectedMonth=n._drawMonth=i.getMonth(),n._selectedDay=i.getDate(),n._inited&&this.trigger("select",[this.selectedDate(),this]);break;case"date":this.option("selectedDate",i);break;case"gap":n[a]=i}return n._invalid=!0,this}return"selectedDate"===a?new Date(n._selectedYear,n._selectedMonth,n._selectedDay):n[a]},maxDate:function(t){return this.option("maxDate",t)},minDate:function(t){return this.option("minDate",t)},date:function(t){return this.option("date",t)},selectedDate:function(t){return this.option("selectedDate",t)},goTo:function(t,e){var a,i,n,r=this._data,s=this.minDate(),o=this.maxDate();return"string"==typeof t&&h.test(t)?(a="-"===RegExp.$1?-parseInt(RegExp.$2,10):parseInt(RegExp.$2,10),i=RegExp.$3.toLowerCase(),t=r._drawMonth+("m"===i?a:0),e=r._drawYear+("y"===i?a:0)):(t=parseInt(t,10),e=parseInt(e,10)),n=new Date(e,t,1),n=s&&s>n?s:o&&n>o?o:n,t=n.getMonth(),e=n.getFullYear(),(t!=r._drawMonth||e!=r._drawYear)&&(this.trigger("changemonthyear",[r._drawMonth=t,r._drawYear=e]),r._invalid=!0,this.refresh()),this},refresh:function(){var e=this._data;if(e._invalid)return t(".ui-datepicker-calendar td:not(.ui-state-disabled), .ui-datepicker-header a",e._container).highlight(),e._container.empty().append(this._generateHTML()),t(".ui-datepicker-calendar td:not(.ui-state-disabled), .ui-datepicker-header a",e._container).highlight("ui-state-hover"),e._invalid=!1,this},destroy:function(){var e=this._data,a=this._eventHandler;t(".ui-datepicker-calendar td:not(.ui-state-disabled)",e._container).highlight(),e._container.off("click",a).remove()}}),t.fn.datepicker=function(r){var s,h,o=n.call(arguments,1);return t.each(this,function(){if(h=i(this)||new a(this,t.isPlainObject(r)?r:null),"string"==typeof r&&r in h){if(s=h[r].apply(h,o),s!==h&&s!==e)return!1;s=e}else if("this"===r)return s=h,!1}),s!==e?s:this}}(a),e=a});
;define("common:widget/datescrollpick/datescrollpicker.js",function(t,i,s){function l(t,i){this.el=$(t),this.option=i||{},this._dateBox=null,this.init()}var e=t("common:static/js/iscroll.js"),o=function(t){return 0===t%4&&0!==t%100||0===t%400},r=function(t,i){var s=[31,28,31,30,31,30,31,31,30,31,30,31];return o(t)&&(s[1]=29),s[i-1]};l.getMday=r,$.extend(l.prototype,{lineHeight:48,_createDateBox:function(){this._bg=$('<div class="date-box-bg"></div>'),this._dateBox=$('<div class="date-box"/>'),this._dateBox.html('<div ><div class="hd">设置出发时间</div><div class="bd"></div><div class="ft"></div></div>'),this._bd=this._dateBox.find(".bd"),this._bd.html('<div class="ymd"></div><div class="h"></div><div class="m"></div><div name="hmsp">:</div><div class="l1"></div><div class="l2"></div><div class="l3"></div><div class="l4"></div><div class="l5"></div><div class="l6"></div>'),this._ymd=this._bd.find(".ymd"),this._h=this._bd.find(".h"),this._m=this._bd.find(".m"),this._fd=this._dateBox.find(".ft"),this._fd.html("<span>完成</span>"),this._bg.appendTo(document.body),this._bg.hide()},_insertDateContent:function(){this.buildYmd()},buildYmd:function(){for(var t=new Date,i=t.getFullYear(),s=t.getMonth()+1,l=t.getDate(),e=t.getHours(),o=t.getMinutes(),h=[],n=r(t.getFullYear(),s),a=l;n>=a;a++)h.push({y:i,m:s,d:a});var d=s+1,c=t.getFullYear();12==s&&(d=1,c+=1);for(var u=r(c,d),f=1;u>=f;f++)h.push({y:c,m:d,d:f});var v="<ul><li>&nbsp;</li>";h.forEach(function(t){var i=t.m+"月"+t.d+"日",s=new Date;s.setFullYear(t.y),s.setMonth(t.m-1),s.setDate(t.d);var l=s.format("yyyy-MM-dd");v=v+'<li id="date-'+l+'" data-date="'+l+'">'+i+"</li>"}),v+="<li>&nbsp;</li></ul>",this._ymd.html(v);for(var m="<ul><li>&nbsp;</li>",_=0;24>_;_++){var g=_==e?'class="cur"':"";_=_>=10?_:"0"+_,m=m+'<li id="hours-'+_+'" '+g+' data-h="'+_+'">'+_+"</li>"}m+="<li>&nbsp;</li></ul>",this._h.html(m);for(var b="<ul><li>&nbsp;</li>",p=0;60>p;p+=10){var g="";o>=p&&p+10>o&&(g='class="cur"');var y=0==p?"00":p;b=b+'<li id="minute-'+y+'" '+g+' data-m="'+y+'">'+y+"</li>"}b+="<li>&nbsp;</li></ul>",this._m.html(b),this._curHrEl=this._h.find(".cur"),this._curMtEl=this._m.find(".cur")},_complete:function(){this.option.onselect&&this.option.onselect.apply(this,[this.getSelectedDate()]),this.hide()},init:function(){this._createDateBox(),this._insertDateContent(),this.render(),$.isFunction(e)?this.initDateIscroll():app.loader.load(["common_iscroll"],$.proxy(this.initDateIscroll,this)),this.bind()},initDateIscroll:function(){var t=this._ymd[0],i=this._h[0],s=this._m[0],l=this;l.scrollerYmd=new e(t,{hScroll:!1,hScrollbar:!1,vScrollbar:!1,onScrollEnd:function(){l.scrollToElByY(this,t,this.y)}}),l.scrollerHr=new e(i,{hScroll:!1,hScrollbar:!1,vScrollbar:!1,onScrollEnd:function(){l.scrollToElByY(this,i,this.y)}}),l.scrollerMt=new e(s,{hScroll:!1,hScrollbar:!1,vScrollbar:!1,onScrollEnd:function(){l.scrollToElByY(this,s,this.y)}}),l.scrollToCurDate()},getSelectedDate:function(){var t=Math.abs(this.scrollerYmd.y),i=Math.abs(this.scrollerHr.y),s=Math.abs(this.scrollerMt.y),l=Math.round(t/this.lineHeight),e=Math.round(i/this.lineHeight),o=Math.round(s/this.lineHeight),r=this._ymd.find("li"),h=$(r.get(l+1)),n=this._h.find("li"),a=$(n.get(e+1)),d=this._m.find("li"),c=$(d.get(o+1)),u={datetime:h.attr("data-date")+" "+a.attr("data-h")+":"+c.attr("data-m")};return u},scrollToElByY:function(t,i,s){s=Math.abs(s);var l=Math.round(s/this.lineHeight);if(l!=this.last||t!=this.lastUseScroller){this.last=l,this.lastUseScroller=t;var e=$(i).find("li").get(l);t.scrollToElement(e,100)}},bind:function(){var t=function(t){t.preventDefault()};this._fd.on("click",$.proxy(this._complete,this)),this._dateBox.on("touchmove",t),this._bg.on("touchmove",t),this._bg.on("click",$.proxy(this.hide,this)),listener.on("common","sizechange",$.proxy(this._onglobalSizeChange,this))},_onglobalSizeChange:function(){this.setPos(),this.refresh(),this.scrollToCurDate()},setPos:function(){var t=(window.innerHeight-248)/2+window.scrollY;this._bg.css({height:window.innerHeight+window.scrollY}),this._dateBox.css({top:t})},applyTo:function(t){$(t).on("click",$.proxy(this.toggleHandler,this))},refresh:function(){this.scrollerYmd&&this.scrollerYmd.refresh(),this.scrollerHr&&this.scrollerHr.refresh(),this.scrollerMt&&this.scrollerMt.refresh()},scrollToCurDate:function(){var t=new Date,i=t.getDate(),s=t.getHours(),l=t.getMinutes();0!=l%10?(l=10*Math.floor(l/10)+10,l>=60&&(l="00",s+=1,t.setHours(s),s>=24&&(s="00",i+=1,t.setDate(i)))):l=0==l?"00":l;var e="date-"+t.format("yyyy-MM-dd"),o="hours-"+t.format("hh"),r="minute-"+l;this.scrollerYmd&&this.scrollerYmd.scrollToElement($("#"+e).prev().get(0),0),this.scrollerHr&&this.scrollerHr.scrollToElement($("#"+o).prev().get(0),0),this.scrollerMt&&this.scrollerMt.scrollToElement($("#"+r).prev().get(0),0)},toggleHandler:function(){this.show(),this.setPos(),this.refresh(),this.scrollToCurDate()},render:function(){this._dateBox.appendTo(document.body)},show:function(){this._dateBox.css({left:"50%"}),this._bg.show()},hide:function(){this._dateBox.css({left:-1e3}),this._bg.hide()}}),s.exports=l});
;define("common:widget/fastclick/fastclick.js",function(t,e,i){function n(t){"use strict";var e,i=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.layer=t,!t||!t.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){n.prototype.onClick.apply(i,arguments)},this.onTouchStart=function(){n.prototype.onTouchStart.apply(i,arguments)},this.onTouchMove=function(){n.prototype.onTouchMove.apply(i,arguments)},this.onTouchEnd=function(){n.prototype.onTouchEnd.apply(i,arguments)},this.onTouchCancel=function(){n.prototype.onTouchCancel.apply(i,arguments)},"undefined"!=typeof window.ontouchstart&&(t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,i,n){var o=Node.prototype.removeEventListener;"click"===e?o.call(t,e,i.hijacked||i,n):o.call(t,e,i,n)},t.addEventListener=function(e,i,n){var o=Node.prototype.addEventListener;"click"===e?o.call(t,e,i.hijacked||(i.hijacked=function(t){t.propagationStopped||i(t)}),n):o.call(t,e,i,n)}),"function"==typeof t.onclick&&(e=t.onclick,t.addEventListener("click",function(t){e(t)},!1),t.onclick=null))}n.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,n.prototype.deviceIsChrome=navigator.userAgent.indexOf("Chrome")>0,n.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),n.prototype.deviceIsIOS4=n.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),n.prototype.deviceIsIOSWithBadTarget=n.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),n.prototype.needsClick=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"button":case"input":return this.deviceIsIOS&&"file"===t.type?!0:t.disabled;case"label":case"video":return!0;default:return/\bneedsclick\b/.test(t.className)}},n.prototype.needsFocus=function(t){"use strict";switch(t.nodeName.toLowerCase()){case"textarea":case"select":return!0;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled;default:return/\bneedsfocus\b/.test(t.className)}},n.prototype.sendClick=function(t,e){"use strict";var i,n;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),n=e.changedTouches[0],i=document.createEvent("MouseEvents"),i.initMouseEvent("click",!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,t.dispatchEvent(i)},n.prototype.focus=function(t){"use strict";var e;this.deviceIsIOS&&t.setSelectionRange?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},n.prototype.updateScrollParent=function(t){"use strict";var e,i;if(e=t.fastClickScrollParent,!e||!e.contains(t)){i=t;do{if(i.scrollHeight>i.offsetHeight){e=i,t.fastClickScrollParent=i;break}i=i.parentElement}while(i)}e&&(e.fastClickLastScrollTop=e.scrollTop)},n.prototype.getTargetElementFromEventTarget=function(t){"use strict";return t.nodeType===Node.TEXT_NODE?t.parentNode:t},n.prototype.onTouchStart=function(t){"use strict";var e,i,n;if(e=this.getTargetElementFromEventTarget(t.target),i=t.targetTouches[0],this.deviceIsIOS){if(n=window.getSelection(),n.rangeCount&&!n.isCollapsed)return!0;if(!this.deviceIsIOS4){if(i.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=i.pageX,this.touchStartY=i.pageY,this.touchStartClientX=i.clientX,this.touchStartClientY=i.clientY,t.timeStamp-this.lastClickTime<200&&t.preventDefault(),!0},n.prototype.onTouchMove=function(t){"use strict";var e,i;return e=this.getTargetElementFromEventTarget(t.target),i=t.targetTouches[0],this.trackingClick?((Math.abs(i.clientX-this.touchStartClientX)>10||Math.abs(i.clientY-this.touchStartClientY)>10)&&(this.trackingClick=!1,this.targetElement=null),!0):!0},n.prototype.touchHasMoved=function(t){"use strict";var e=t.changedTouches[0];return Math.abs(e.pageX-this.touchStartX)>10||Math.abs(e.pageY-this.touchStartY)>10?!0:!1},n.prototype.findControl=function(t){"use strict";return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},n.prototype.onTouchEnd=function(t){"use strict";var e,i,n,o,c,r=this.targetElement;if(!this.trackingClick)return!0;if(this.touchHasMoved(t)&&(this.trackingClick=!1,this.targetElement=null),!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.lastClickTime=t.timeStamp,i=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(c=t.changedTouches[0],r=document.elementFromPoint(c.pageX-window.pageXOffset,c.pageY-window.pageYOffset)),n=r.tagName.toLowerCase(),"label"===n){if(e=this.findControl(r)){if(this.focus(r),this.deviceIsAndroid)return!1;r=e}}else if(this.needsFocus(r))return t.timeStamp-i>150||this.deviceIsIOS&&window.top!==window&&"input"===n?(this.targetElement=null,!1):(this.focus(r),(this.deviceIsIOS4||this.deviceIsChrome)&&"select"===n?!1:(this.targetElement=null,t.preventDefault(),!1));if(this.deviceIsIOS&&!this.deviceIsIOS4&&(o=r.fastClickScrollParent,o&&o.fastClickLastScrollTop!==o.scrollTop))return!0;if(!this.needsClick(r))if(t.preventDefault(),this.deviceIsIOS)this.sendClick(r,t);else{var s=this;setTimeout(function(){s.sendClick(r,t)},20)}return!1},n.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},n.prototype.onClick=function(t){"use strict";var e;return this.targetElement?t.forwardedTouchEvent?!0:(e=this.targetElement,this.targetElement=null,this.trackingClick?(this.trackingClick=!1,!0):t.cancelable?"submit"===t.target.type&&0===t.detail?!0:!this.needsClick(e)||this.cancelNextClick?(this.cancelNextClick=!1,t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1):!0:!0):!0},n.prototype.destroy=function(){"use strict";var t=this.layer;t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchcancel",function(t){t.preventDefault()},!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},"undefined"!=typeof define&&define.amd&&define(function(){"use strict";return n}),"undefined"!=typeof i&&i.exports&&(i.exports=function(t){"use strict";return new n(t)},i.exports.FastClick=n),i.exports=n});
;define("common:widget/footer/footer.js",function(o,n,t){var i=(o("common:widget/stat/stat.js"),o("common:static/js/util.js"),o("common:widget/login/login.js")),c=function(){e()},e=function(){$(".user").on("click",function(){s()})},s=function(){i.checkLogin(function(o){o.status?i.goMycenter():i.loginAction()})};t.exports.init=c});
;define("common:widget/geolocation/initgeo.js",function(e,t,o){"use strict";var i=e("common:widget/geolocation/location.js"),a=e("common:widget/cookie/cookie.js"),p=(e("common:static/js/localstorage.js"),e("common:widget/stat/stat.js")),n=e("common:widget/url/url.js");o.exports={init:function(){this._resetCurrentCity(),this._initGeo(),this._changeCity()},_resetCurrentCity:function(){var e=window._DEFAULT_CITY,t=window.localStorage;try{e.index?(t.setItem("_DEFAULT_CITY",JSON.stringify(window._DEFAULT_CITY)),a.set("DEFAULT_CITY","1",{expires:3e5,path:"/"})):t.getItem("_DEFAULT_CITY")?window._DEFAULT_CITY=JSON.parse(t.getItem("_DEFAULT_CITY"))||{}:(window._DEFAULT_CITY={addrbyip:'{"error":1,"content":""}',default_city:"全国",index:'{"content":{"baike":0,"city_type":0,"cname":"全国","code":1,"count_info":null,"geo":"1|11590057.96,4489812.75;11590057.96,4489812.75|11590057.96,4489812.75;","if_current":1,"level":0,"sup":0,"sup_bus":0,"sup_business_area":0,"sup_lukuang":0,"sup_subway":0,"uid":"b04c4accaab2fb7f410245f2"},"mo":{"data":{"mo_text":"下载百度手机地图","mo_color":"#ff0000","mo_layer_text":"离线使用，省90%流量！","popup_img1":"http://map.baidu.com/fwmap/upload/r/image/2013-07-15/86bd8022f311d822940c36647c0aa131_143_221.jpg","popup_img2":"http://map.baidu.com/fwmap/upload/r/image/2013-07-15/94383d365350ba776eaee9d9daaf2387_143_221.jpg","popup_img3":"http://map.baidu.com/fwmap/upload/r/image/2013-07-15/c6c9811cff704539cc97e1fa385df81d_143_221.jpg","popup_title1":"搜索周边美食、酒店、在线预定","popup_title2":"合理路线规划，免费语音导航","popup_title3":"最新团购优惠折扣信息","popup_version_iphone":"http://map.baidu.com/fwmap/upload/r/image/2013-07-15/18a9fef8f8276dedb1d8129a36ceb181_25_26.png","popup_version_andriod":"http://map.baidu.com/fwmap/upload/r/image/2013-07-15/e87051a70c258e51bb947a95789ca815_25_26.png","banner_home":"http://map.baidu.com/fwmap/upload/r/image/2013-07-15/8cf335e0d9f4c9e0f8656c1e369c7f67_316_100.jpg","banner_poi":"http://map.baidu.com/fwmap/upload/r/image/2013-07-16/6f90db9e61476f2cd8975c3fac3c70a8_316_100.jpg","banner_bus":"http://map.baidu.com/fwmap/upload/r/image/2013-07-16/b39713e7c4cbf5a27c72308d1846248f_316_100.jpg","banner_driving":"http://map.baidu.com/fwmap/upload/r/image/2013-07-16/8a512aa177b13df62758f7326f4a5682_316_100.jpg"}},"result":{"jump_back":0,"qid":"","time":0,"type":1},"current_city":{"code":1,"sup":0,"sup_bus":0,"sup_business_area":0,"sup_lukuang":0,"sup_subway":0,"type":0,"up_province_name":"中国"}}',loopindex:-1},a.set("DEFAULT_CITY","0",{expires:-1e3,path:"/"}))}catch(o){}if(!window._CURRENT_CITY){var i=JSON.parse(_DEFAULT_CITY.index)||{},p=i.content||{};window._CURRENT_CITY={code:p.code||1,geo:p.geo||"",name:p.cname||"",sup:p.sup||0,sup_bus:p.sup_bus||0,sup_business_area:p.sup_business_area||0,sup_lukuang:p.sup_lukuang||0,sup_subway:p.sup_subway||0,type:p.city_type||0,up_province_name:p.up_province_name||"",reset_cur:1}}},_initGeo:function(){try{this._hasStorageLoc()||this._initIpGeo()}catch(t){this._initIpGeo()}e("common:widget/geolocation/geolocation.js",function(e){e.init()})},getLocFromStorage:function(e){var t=window.localStorage;if(t)try{var o=t.getItem(e);return JSON.parse(o)}catch(i){return}},_hasStorageLoc:function(){var e=this,t=e.getLocFromStorage("webapp-loc"),o=e.getLocFromStorage("webapp-myloc"),a=(new Date).getTime();return o&&o.isExactPoi===!0&&parseInt(o.t)+3e5>a&&(i._mylocation=o,$.extend(i._mylocation,{type:"storage"}),window._INIT_MYLOC_SUC=!0),t&&"ip"!==t.type&&parseInt(t.t)+3e5>a?(i._location=t,$.extend(i._location,{type:"storage"}),window._NO_COVER_LOC=!0,window._INIT_LOC_SUC=!0,!0):!1},_initIpGeo:function(){var e,t,o,a,n;e=JSON.parse(_DEFAULT_CITY.index)||{},t=e&&e.content,o=t&&t.geo,n=t.level,a=o.split(";")[1].split("|")[0].split(","),1==t.code&&(t.name="全国"),1!=t.code&&p.addStat(COM_STAT_CODE.STAT_IP_GEO_IN_CITY);var _={addr:{city:t.cname,cityCode:t.code},point:{x:a[0],y:a[1]},level:n,type:"ip",isExactPoi:!1,isGeoEnd:!1,isSaveLocInStorage:!1};i.setAddress(_,!0)},_changeCity:function(){var e=window._CURRENT_CITY,t=n.get();if(t.pageState||{},t.action||{},t.module||{},e&&1!=e.reset_cur&&(e.code!=i.getCityCode()&&e.code!=i.getUpCityCode()||1==e.is_update_city)){var o=e.geo&&e.geo.split(";")[0].split("|")[1].split(",");if(void 0===o)return;1==e.code&&(e.name="全国");var a=null;3===e.type&&(a=e.up_cityid);var p=0!=e.level?e.level:4,_={addr:{city:e.name,cityCode:e.code,cityType:e.type,upCityCode:a},point:{x:o[0],y:o[1]},level:p,isSaveLocInCookie:!0};window._NO_COVER_LOC=!1,i.setAddress(_),window._NO_COVER_LOC=!0}},changeCity:function(){var e=window._CURRENT_CITY,t=n.get();if(t.pageState||{},t.action||{},t.module||{},e&&1!=e.reset_cur&&(e.code!=i.getCityCode()&&e.code!=i.getUpCityCode()||1==e.is_update_city)){var o=e.geo&&e.geo.split(";")[0].split("|")[1].split(",");if(void 0===o)return;1==e.code&&(e.name="全国");var a=null;3===e.type&&(a=e.up_cityid);var p=0!=e.level?e.level:4,_={addr:{city:e.name,cityCode:e.code,cityType:e.type,upCityCode:a},point:{x:o[0],y:o[1]},level:p};i.setAddress(_,!1)}}}});
;define("common:widget/header/header.js",function(t,n,o){var e=t("common:widget/stat/stat.js"),i=t("common:static/js/util.js");t("common:widget/appresize/appresize.js");var a=$("#header_install_button");i.isAndroid()?"android":i.isIPhone()?"iphone":i.isIPad()?"ipad":"unknown";var r=function(){s(),d()},s=function(){var t=this;i.isInstalledClient(function(n){a.attr("data",n).text("打开客户端"),i.bindHrefStat(a,function(){e.addStat(COM_STAT_CODE.HEADER_APP_OPEN,{os:t.os})})},function(n){a.attr("data",n).text("下载客户端"),i.bindHrefStat(a,function(){e.addStat(COM_STAT_CODE.HEADER_APP_DOWNLOAD,{os:t.os})})})},d=function(){var t=$(".index-widget-searchbox, .index-widget-tabgroup"),n=$(".common-widget-header"),o={},e={},i=function(t){var n,o=[],e=null,i=t.touches;if(i&&(n=i.length))for(var a=0;n>a;a++)e=i[a],o.push({x:e.pageX,y:e.pageY});return o},a=function(n){o=i(n),t.on("touchmove",r)},r=function(a){e=i(a);try{var s=Math.abs(o[0].y-e[0].y)}catch(d){s=0}s>5&&(t.off("touchmove",r),o[0].y<e[0].y?n.show():n.hide(),listener.trigger("common","sizechange"))};t.on("touchstart",a)};o.exports.init=function(){r()}});
;define("common:widget/initapp/initapp.js",function(n,i,o){var e=n("common:widget/geolocation/initgeo.js"),t=n("common:widget/appresize/appresize.js"),c=n("common:widget/popup/popup.js"),p=n("common:widget/pagemgr/pagemgr.js"),s=n("common:widget/fastclick/fastclick.js"),m=function(){e.init(),t.init(),p.init(),p.isSinglePageApp()&&new s(document.body),g()},g=function(){p.isLandingPage()&&(listener.on("common.page","switchstart",d),listener.on("common.page","switchend",w),listener.on("common.page","switchend",a))},a=function(){window.scrollTo(0,1)},d=function(){c.open({text:"正在加载中"})},w=function(){c.close()};o.exports.init=m});
;define("common:widget/map/plugin.js",function(e,t,a){function n(e,t){var a=document.createElement("script");a.src=e,a.addEventListener&&a.addEventListener("load",function(e){var a=e.target;a.parentNode.removeChild(a),t&&"app"==t.from&&t.cbk&&t.cbk&&t.cbk()},!1),document.getElementsByTagName("head")[0].appendChild(a),a=null}var o="/mobile/?qt=getMobileModules&v=2&",r={tile:"uhunrl",vector:"besg3a"},i={mainReady:!1,lazyReady:!1,isPreLoaded:!1,getVectorMdl:function(e){if(e=e||{},!this.isPreLoaded)try{var t=[],a=window.localStorage;for(var i in r){var c="async_"+i+"_"+r[i],d=i+"_"+r[i];(!a[c]||a[c].length<=0)&&t.push(d)}if(t.length>0){this.isPreLoaded=!0;var l=o+"mod="+t.join(",")+"&cbk=preLoadVec";n(l,e)}else e&&"app"==e.from&&e.cbk&&e.cbk&&e.cbk()}catch(s){}}};window.preLoadVec=function(e,t){try{if(!t)return;for(var a=window.localStorage,n="async_"+e,o="async_"+e.split("_")[0],r=a.length,i=r-1;i>=0;i--){var c=a.key(i);c.indexOf(o)>-1&&a.removeItem(c)}a.setItem(n,t)}catch(d){}},a.exports=i});
;define("common:widget/map/preloader.js",function(i,o,n){n.exports={init:function(){i.async(["common:widget/api/api.js","common:widget/api/ext/tfcinfowindow.js"]),i("common:widget/map/plugin.js").getVectorMdl()}}});
;define("common:widget/monitor/pagelog.js",function(e,n,t){function a(){var e=window._APP_HASH||{},n=e.module,t=e.action,a=e.page,i="";if(/vt=map/.test(location.href))i=(n+"_map").toLowerCase();else if(i=(n+"_"+t).toLowerCase(),"index"===n&&"index"===t&&"index"!==a)return"";return i}function i(){var e=a();return PDC.DICT[e]?PDC.DICT[e]:""}function o(){var e=a();return SDC.DICT[e]?SDC.DICT[e]:""}var r=e("common:widget/pagemgr/pagemgr.js");t.exports={init:function(){var e=i();e&&PDC&&PDC.init({sample:1,product_id:16,page_id:e});var n={};listener.on("common.page","switchstart",function(e,t){n[t.eid]={start:Date.now()}}),listener.on("common.page","pagearrived",function(e,t){n[t.eid]&&(n[t.eid].wait=Date.now())}),listener.on("common.page","switchend",function(e,t){n[t.eid]&&(n[t.eid].end=Date.now())}),listener.on("common.page","pageloaded",function(e,t){if(!r||!r.isLandingPage()){var a=n[t.eid];if(a&&a.start&&a.end&&a.end-a.start>100){a.loaded=Date.now();var i=o();if(i){var d=SDC.createApp(o());d.start_event(a.start),d.view_time(a.end),a.wait&&d.mark("c_wt",a.wait),a.loaded&&d.mark("c_ld",a.loaded),d.ready()}}}})}}});
;define("common:widget/monitor/monitor.js",function(i,t,_){SDC.DICT={MAP_INDEX_INDEX:77,MAP_PLACE_LIST:78,MAP_PLACE_DETAIL:79,MAP_TRANSIT_DETAIL:80,MAP_DRIVE_LIST:81,MAP_SEARCH_SEARCH:82,MAP_OTHER_PAGE:83,MAP_AVG:205,MAP_VCT:206,MAP_TIL:207,TRAFFIC_LAD:220,index_index:180,place_list:181,place_detail:182,transit_list:183,transit_detail:184,drive_list:185,walk_list:186},PDC.DICT={index_index:10,place_list:11,place_detail:12,transit_list:13,transit_detail:14,drive_list:15,walk_list:16,transit_crosslist:17,transit_crossdetail:18,index_map:19,place_map:20,transit_map:21,drive_map:22},_.exports={init:function(){SDC&&SDC.init({sample:1,product_id:16,max:5}),i("common:widget/monitor/pagelog.js").init()}}});
;define("common:widget/nav/nav.js",function(o,n,t){var e=o("common:widget/url/url.js"),a=o("common:widget/pagemgr/pagemgr.js"),i=!1,r=function(){var o=$(".common-widget-nav .back-btn");o.on("click",function(){d()})},c="_lastPageUrl",w=function(){var o=window.localStorage.getItem(c);"string"==typeof o?(window.localStorage.removeItem(c),e.navigate(o,{replace:!0,storageKey:!1})):history.back()},d=function(){a.isLandingPage()&&"aladdin"!==window._APP_HASH.third_party?"third"!==window._APP_HASH.module||"transit"!==window._APP_HASH.action&&"weather"!==window._APP_HASH.action&&"traffic"!==window._APP_HASH.action?(window.localStorage.removeItem(c),e.toIndex()):(window.localStorage.removeItem(c),history.back()):i===!0?w():(window.localStorage.removeItem(c),history.back())},g=function(o){i=!!o,r()};t.exports.init=g});
;define("common:widget/search/poisearch.js",function(e,t,o){var a=e("common:widget/geolocation/location.js"),c=e("common:widget/url/url.js");o.exports.search=function(e,t){if(e){t=t||{};var o={qt:"s",wd:e||"",c:a.getCityCode()||1,searchFlag:t.from||"bigBox",version:"5",exptype:"dep"};a.hasExactPoi()&&(o.nb_x=a.getPointX(),o.nb_y=a.getPointY(),o.center_rank=1),c.update({module:"search",action:"search",query:o,pageState:{vt:""}},{queryReplace:!0,pageStateReplace:!0})}}});
;define("common:widget/setcity/setcity.js",function(e,t,o){var a=e("common:widget/cookie/cookie.js"),i=e("common:widget/url/url.js"),c=(e("common:widget/pagemgr/pagemgr.js"),e("common:static/js/util.js"));e("common:widget/geolocation/location.js");var r={path:"/mobile/",expires:86400},n="     ",d={cityName:"",cityId:""},u=function(e,t){d.cityName=e,d.cityId=t},s=function(e,t,o){return"string"==typeof e?("setsubwaycity"==window._APP_HASH.page?g(o):(u(e,t),a.set("setCityName",e,r),m()),e):void 0},m=function(){var e,t,o=i.get(),a=(o.query,o.pageState);a.refer_query?(e=c.urlToJSON(a.refer_query),referPageState=c.urlToJSON(a.refer_pagestate),e.wd&&e.wd.split(n)[1]&&(e.wd=e.wd.split(n)[1]),t="wm"===e.qt||"takeout"==referPageState.search?l(e,referPageState):y(e,referPageState),p(t)):i.toIndex({cache:!1})},y=function(e){var t=e||{};return t.c=d.cityId||t.c,delete t.nb_x,delete t.nb_y,opts={module:"place",action:"list",query:t,pageState:{dist_name:d.cityName}}},l=function(e,t){var o=e||{},a=t||{};return o.cityId=d.cityId||o.c,o.c=o.cityId,o.pageNum=1,o.m="searchBrands",delete o.nb_x,delete o.nb_y,delete o.pointX1,delete o.pointY1,delete o.radius,delete o.sortType,delete o.orderType,a=$.extend(a,{citysearch:1,center_name:d.cityName}),opts={module:"place",action:"takeout",query:o,pageState:a}},p=function(e){e&&e.module&&e.action?i.update(e):i.toIndex()},g=function(e){i.update({module:"subway",action:"show",query:{city:e}})};o.exports.setAndRedirect=s});
;define("common:widget/sharefriends/sharefriends.js",function(e,t,n){var s=e("common:static/js/util.js"),r=e("common:widget/url/url.js"),i=e("common:widget/stat/stat.js");ShareToFriends={init:function(e){this.type=e,this.bindEvent()},bindEvent:function(){$(".send-phone").on("click",$.proxy(this.shareToFriends,this))},shareToFriends:function(e){var t=this,n=$("#share-to-friends"),s=n.attr("href");if(!(s&&s.indexOf("body")>-1)){if("transit"==this.type)var r=t.getTransitSmsUrl();else var r=t.getSmsUrl();var o=function(e){if(e&&e.sms_content){var s=e.sms_content;n.attr("href","sms:?body="+s),t.fireEvent(n[0],"click")}},a=function(){};$.ajax({url:r,dataType:"jsonp",success:o,error:a}),e.preventDefault(),i.addStat(COM_STAT_CODE.SHARESMS_CLICK)}},getTransitSmsUrl:function(){var e=r.get(),t=e.query||{},n=e.pageState||{},i=n.i+",1,1",o="http://map.baidu.com/ag/sms/ready?url=",a="http://map.baidu.com/?i="+i+"&s="+t.qt,c=encodeURIComponent("&"+s.jsonToQuery(t)),m=o+encodeURIComponent(a+c+"&sc=0&smsf=1")+"&t="+(new Date).getTime();return m},getSmsUrl:function(){var e=r.get(),t=e.query||{},n="http://map.baidu.com/ag/sms/ready?url=",i="http://map.baidu.com/?s="+t.qt;delete t.version;var o=encodeURIComponent("&"+s.jsonToQuery(t)),a=n+encodeURIComponent(i+o+"&sc=0&smsf=1")+"&t="+(new Date).getTime();return a},fireEvent:function(e,t){var n=e;if(document.createEvent){var s=document.createEvent("MouseEvents");s.initEvent(t,!0,!1),n.dispatchEvent(s)}}},n.exports=ShareToFriends});
;define("common:widget/statistics/statistics.js",function(t,i,o){var s=t("common:widget/stat/stat.js");o.exports={init:function(){var t=this;t.addestop()},addestop:function(){window.navigator.standalone&&s.addCookieStat(COM_STAT_CODE.STAT_FROMDESKTOP_OPEN)}}});
;define("common:widget/streetview/streetview.js",function(e,t,i){var s,n,o=e("common:static/js/util.js"),a=e("common:widget/popup/popup.js"),r=e("common:widget/url/url.js"),d=e("common:widget/pagemgr/pagemgr.js"),h=e("common:widget/cookie/cookie.js"),c=e("common:static/js/localstorage.js");i.exports={Str:{DAY:"day",NIGHT:"night",BANNER_ID:"app-banner-for-stv",STREETVIEW_CONTAINER_ID:"streetview-container",MAP_CONTAINER_ID:"eagleeye-container",MAP_ID:"eagleeye-map",NORESULT:"未找到街景数据"},os:o.isAndroid()?"android":o.isIPhone()?"iphone":o.isIPad()?"ipad":"unknown",init:function(e){e=e||{},s=e.BMap,n=e.CustomMarker,this.show(),this._updated=!1,this.initStreetView(),this.initMap(),this.updateStreetView(),this.bind(),this.onSizeChange()},initStreetView:function(){var e;this.streetView=e=new s.StreetView(this.Str.STREETVIEW_CONTAINER_ID),e.addEventListener("position_changed",$.proxy(this.onPositionChanged,this)),e.addEventListener("links_changed",$.proxy(this.onPositionChanged,this)),e.addEventListener("dataload",$.proxy(this.onStreetDataLoaded,this)),e.addEventListener("tilesloaded",$.proxy(this.onTilesLoaded,this))},onStreetDataLoaded:function(){},initMap:function(){var e={maxZoom:14,minZoom:14,drawMargin:0,enableFulltimeSpotClick:!1,vectorMapLevel:99,drawer:BMAP_CANVAS_DRAWER};this.eyeMap=new s.Map(this.Str.MAP_ID,e),this.eyeMap.disableHighResolution(),this.eyeMap.disableDoubleClickZoom(),this.eyeMap.disablePinchToZoom(),this.eyeMap.addTileLayer(new s.StreetViewCoverageLayer),this.eyeMap.addEventListener("click",$.proxy(this.onEyeMapClick,this))},onEyeMapClick:function(){$("#"+this.Str.MAP_CONTAINER_ID).toggleClass("exp");var e=this.streetView.getPosition();this.eyeMap.checkResize(),this.eyeMap.centerAndZoom(e,15)},checkEyeMapDirection:function(){var e=window.innerWidth,t=window.innerHeight;return t>e?!0:!1},toMax:function(){var e=$("#back_nav");$("#uniscroll-wrapper"),e.height(),$("#"+this.Str.MAP_CONTAINER_ID).css({visibility:"hidden",left:-1e3}),$("#street-holder").find(".addr").show(),listener.trigger("common","sizechange")},recovery:function(){r.get(),$("#"+this.Str.MAP_CONTAINER_ID).css({visibility:"visible",left:5}),this.eyeMap.checkResize(),this.eyeMap.centerAndZoom(this.streetView.getPosition(),this.eyeMap.getZoom()),$("#street-holder").find(".addr").hide(),listener.trigger("common","sizechange")},bind:function(){var e=this;this.streetView.addEventListener("click",$.proxy(this.onStreetViewClick,this)),this.streetView.addEventListener("noresult",$.proxy(this.onNoResult,this)),$("#eagleeye-container, #street-holder .mode").on("touchstart touchend",function(e){e.stopPropagation()}),$("#street-holder").find(".mode").on("click",$.proxy(this.onToggleMode,this)),listener.on("common","sizechange",this._onSizeChange),d.registerDestory($.proxy(e.destory,this))},_onSizeChange:function(){return $.proxy(this.onSizeChange,this)},onSizeChange:function(){if(r.get(),!this.hasAlertDisabled()&&!this.checkEyeMapDirection()&&!o.isIPad()){if(this.alertDsabeld)return;a.open({text:"街景在横屏下体验较差，建议在竖屏下使用。",autoCloseTime:3e3}),this.alertDsabeld=!0,c.addData("alertDisabled","true",{error:function(){var e={domain:"map.baidu.com",path:"/",expires:31536e6};h.set("alertDisabled","true",e)}}),$(".common-widget-popup").on("touchstart",function(){$(".common-widget-popup").remove()})}setTimeout(function(){window.scrollTo(0,0)},100)},hasAlertDisabled:function(){var e;return c.selectData("alertDisabled",{success:function(t){e=t,e||(e=h.get("alertDisabled"),"true"==""+e&&c.addData("alertDisabled","true",{success:function(){h.remove("alertDisabled")}}))},error:function(){e=h.get("alertDisabled")}}),"true"==""+e},onNoResult:function(){r.get(),a.open({text:this.Str.NORESULT,autoCloseTime:1500}),this.onPositionChanged()},onStreetViewClick:function(){this.maxStatus=!this.maxStatus,this.maxStatus?this.toMax():this.recovery(),this.setDayAndNigthMode()},onToggleMode:function(){var e=this.streetView.getMode(),t=this.streetView.getRelevants();if(t[0]&&t[0].mode){var i="day"===t[0].mode?"night":"day";i&&$("#street-holder").find(".mode").show().removeClass("night day").addClass("day"===e?"night":"day"),this.streetView.setId(t[0].id)}},update:function(){this.show(),this.updateStreetView()},hide:function(){$("#street-holder").css("visibility","hidden"),$("#"+this.Str.MAP_CONTAINER_ID).css("visibility","hidden"),o.isIOS()&&this.streetView&&this.streetView._linksContainer&&(this.streetView._linksContainer.style.display="none"),$("#"+this.Str.BANNER_ID).hide(),$("#iscroll-container").removeClass("hide")},show:function(){$("#"+this.Str.BANNER_ID).show(),$("#street-holder").css("visibility","visible"),o.isIOS()&&this.streetView&&this.streetView._linksContainer&&(this.streetView._linksContainer.style.display=""),this.maxStatus||$("#"+this.Str.MAP_CONTAINER_ID).css("visibility","visible"),o.isIPad()&&$("#iscroll-container").addClass("hide")},setEye:function(e){if(this._mkr)this._mkr.setPoint(e);else{var t=new s.Icon("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAoCAYAAADpE0oSAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RUY1NDYwQjhGNTIxMTFFMkIzREZGQURENzdCRDY5ODMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RUY1NDYwQjlGNTIxMTFFMkIzREZGQURENzdCRDY5ODMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFRjU0NjBCNkY1MjExMUUyQjNERkZBREQ3N0JENjk4MyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFRjU0NjBCN0Y1MjExMUUyQjNERkZBREQ3N0JENjk4MyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgIQMF8AAAeYSURBVHjapJh7bFt3Fce/9r1+23EcJ3bc5tWm7VqWLVWrpkRk6/4goqWoIwO2qhKPUQQCiQ4qsU4ggTQJCRiaGOqYqJCYVvZHWLds06ptjLWjW7vRdIM2SV/O+107LzuOH/faDufc+t7YjZ045Sed+7v3+t7f53fO75zzO9e6xcVFFNN+86dXKqj7OskDJFtIaknKSXpJQiQfkbxH8s5TP/pGarXxdKuBCdhM3S9I9qO4djUziSdpAqE1gwlopu4Fku/wtdEgoq7ai631VSgrdaDEboXVYsJsKIKEJGNw5Bb6hycxPB5UhxgmeZbgzxUNJmgddSdJWkRRwM6GTWjeuRUmo2FVdadmw/jg4y70DU2ot14k+OOrgglaz+tEsqnC7UTbl5rhctqx1najbxRvnelEMqksdwfBHykIJqiNujMkTXVVHnyVoGziZbPV6XKuCy1XcCaEv7/1ERai8WWa3wl+ibpveitKcejAHrCZs5ter1egZz7pw9D4HL/OWLTsqMWmWrcygTsnEZwJ428dZ1XNDxK8nU/ELGgLQwUa/MAXd0MQ9NogDGPoqXd78NTxcwjHF6ETRMLq6Jk00skL2F7vwnPHWrFtYwXS6bQGLnc5sGd3A94/f5kvf0jSnqMxgd+g7kBT42a07PpcjpbzCzKO/PZd/OPTSXi9ZXjisUbUeO2YjybROxbG8692Q04koJPj+OnB+3D0W82kYTJnKV569Sym5+b58ifs6foMtJKhokAefF+9ZjKW9KIOjx7rwPtdMzCXuuCrLIPNaoKv3Ib1HjvcLivctDQmRwkEuxO/b+/BH1++SBYTckzfvOMedR77s03dxocN1R4lZNSHRVHE8fZLuDaRgLnECcFgxMBUAr882bPMkQwmI0RyRL2oJ/gV7H9wM2p9Ds3sdTQ2K5ZMpVpZUX3mPU6D2FhTqTyoikz+8HxHD8wOB0xWizZ4XqEJ8+8mqw0GmwPPvnxJWSZ1LD35CcMzrUXVuFF1BFVbNtW5z4Yh64ywWCw0sJG9bNX41Yts4hQ+uBKATi/keLmX8kLvoJJYmlRwDR947VTTsJn7x8MwmM0wEFQoImtpLZ2k2NWTM0VhNS6tM6fYTKtSwUpqErNCiNvMfJw0FSCaRFpfoXhuip43ipiai6HGY9bG1Os1ixlV8CyJK56QtHzMmvvK7WQuPYwEdrttRUFTyTQCUkJZU1eJOcezJVkLsYgK7ifZORdeQEVZiXJDlmV8vsEHvO6nSSyidr0dNsvqWo9MLCAYANa5LfCWWREKLe2MIRo/0/wquJPBgemQ4mDcOAFsqS5FlduEmVQKt6bjeGBH+YrQeCKFS13TpLWMtgdrkKCkkr10PH6mXVTD6UM+DIwEc8IpHo/j6CP3QorHMBlYgH8kigqXEZ6y5WK3Cui8GkKMNgSbkMLj+7YhFotpY8XiCUwG51TweRXcwYfxwCxm5iLaukSjUey534Ov7fIiFpnHlevTeONftzA0EafNP00eoqN0mkRXbwSn/jmJickQpGgEz3x3B0RdEimylDrWtb5xSh5KxLxJKTOanav/TN33q31utH6hQTMPhxXH8Qun/Tj54QQsDjuFmAkC3efNg7VJkdMkSDtDMobffbsR2zeWIBKJaGMkpCReefvfqnN9hcCns8FO6q5wTD+0exvq1i+tJycTm82GgUAcJ97242J/CPKioIFdFh32Nlbge/vuoRws50C5neu8gf6RgKrtw/n24yeo+wNviV/e04gyZ24IGSmR8ARMJhOuDs0q3l5GIVPpMivryUvD5s1u3f5RfNo9iEwlej+BhwuVPn/lAs9iNuKhpq0UXo68HmwwLMX7nTANenMU/7k2rHr2wwR9c7Vi7zXesTjT7GrYgC0bKtdUb8m0u1zs6ifzahXnCYL+oNjy9i/UHb69edhx7+YqVHld2WkvTxzL6B8Nosc/ppxzhsqUO6fXVNAT/BB1Rzm53PZwAb4KJ9xUdZpMS0Xg/EIc07MRSjLh7NcZ9mOCDhRdV4+OjmrnF/7rb5gLR8/F4rKLZEUTc71mNouwmo2XDx/ct33NnzCkqXZe4yvlrNbi87hRvc6DWcq3EdIwFpe0Zxx2C5wOKhTIIv6BUfo9xrefOdTW+mQhsLjSrHzl1hpZllqsFjOatt+umXwe14pa22jPPXvhM6XKWOm5FcGSJKdUE0ajMdjtNi2MOHlwYsmuJjmOOZ7pPcXX7ho8HZbHHObF9yRJar3mH0B97Totk3E9pTaGq0t2ucdPYEnbeNYENukTWVrjBHWt3df74S13KtoX/GCjr4axSSV2b5D8es1gSUpkX57iD26613qjd4gqUV/Bwbqv96nvth87cli6C/Cyd/g7ufU6gT1UoXAuX7Ys9JUwEZhSP8yfXi275QXL0rJ45f36Hbq/t29wDLVVnuV/A9wcVN879fTPj6TuDizntRKv9d6bAyP0vWyFmYp3tU0GZxGcmuHTLpJfFZPPC4CT+W6z1h30W9v5zh5s21RNWcpIFcs8JY1x1atPFLuR5AUnU8lCz/P/IUIyljxwqetmPosc/7/AhfZXarwLcAXxs8z3VnXmH54zat1WbPufAAMAFBGLprc91/gAAAAASUVORK5CYII=",new s.Size(40,40),{anchor:new s.Size(20,40),imageOffset:new s.Size(-5,0)});this._mkr=new n(t,e,{className:"eye_mrk",click:function(){}}),this._mkr.setDraggingEnabled(!0),this.eyeMap.addOverlay(this._mkr),this._mkr.addEventListener("dragend",$.proxy(this.markerDragEnd,this))}},markerDragEnd:function(){var e=this.eyeMap.getCenter();this.streetView.setPosition(e)},onPositionChanged:function(){var e=this.streetView,t=e.getPosition(),i=e.getDescription();this.eyeMap&&(this.setEye(t),this.eyeMap.centerAndZoom(t,15)),this.setDayAndNigthMode(),i=i||"未命名路段";var s=i.match(/[^\x00-\xff]/gi),n=s?s.length:i.length;n>14&&(i=i.substring(0,13)+"..."),$("#street-holder").find(".addr").text(i)},onTilesLoaded:function(){},unbind:function(){listener.off("common","sizechange",this._onSizeChange)},destory:function(){this.unbind()},setDayAndNigthMode:function(){var e=this.streetView.getRelevants(),t=e&&e[0],i=$("#street-holder").find(".mode");if(t&&t.mode&&!this.maxStatus){var s=t.mode===this.Str.DAY?"day":"night";i.removeClass("night day"),s?i.show().addClass(s):i.hide()}else i.hide()},updateStreetView:function(){var e=r.get(),t=null,i=null,n={},o=e.query||{};this._updated=!0,this.streetView.clear(),o.ss_id?(t=o.ss_id,o.ss_panoType&&"undefined"!=o.ss_panoType&&"inter"===o.ss_panoType?this.streetView.setInnerId(t):this.streetView.setId(t)):o.nb_x&&o.nb_y&&(i=new s.Point(o.nb_x,o.nb_y),this.streetView.setPosition(i)),n=this.streetView.getPov(),o.ss_heading&&"undefined"!==o.ss_heading&&(n.heading=parseFloat(o.ss_heading)),o.ss_pitch&&"undefined"!==o.ss_pitch&&(n.pitch=parseFloat(o.ss_pitch)),this.streetView.setPov(n)},sendStats:function(){}}});
;define("common:widget/topbanner/topbanner.js",function(n,t,o){var a=n("common:widget/cookie/cookie.js"),e=n("common:static/js/util.js"),i=n("common:widget/stat/stat.js"),d=n("common:widget/url/url.js");o.exports={init:function(n){this.bannerHide=n||!1,this.bind(),this.render()},bind:function(){var n=this;n.closeBtn=$("#banner_close_button"),n.bannerCon=$("#common-widget-top-banner"),n.appbutton=$("#banner_install_button")},render:function(){var n=this,t=d.get();n.os=e.isAndroid()?"android":e.isIPhone()?"iphone":e.isIPad()?"ipad":"unknown",n.action=t.action,n.module=t.module,n.pageState=t.pageState,n.a=window.a,$(window).on("pageshow",function(){$("#downBox").length>0&&$("#downBox").hide(),clearTimeout(window.a)}),n.closeBtn.on("click",$.proxy(n._onClose,this)),n.displayBanner()},displayBanner:function(){var n=this,t=navigator.userAgent,o="点击下载手机地图，省90%流量";return a.get("hdBanner")||n.isHideBanner()?(n.hideBanner(),void 0):(n.showBanner(),e.isIPhone()&&t.indexOf("Safari")>0?(n.appbutton.html("点击打开手机地图，省90%流量"),e.bindHrefStat(n.appbutton,function(){return alert("将打开百度地图客户端"),$(document.body).append("<iframe src= 'baidumap://map/' id='callapp' width='0' height='0' style='border: 0;display: none;'/>"),window.a=setTimeout(function(){e.DownBox.showTb(),i.addStat(COM_STAT_CODE.TOP_BANNER_APP_ERROR_OPEN)},1500),!1})):(n.appbutton.attr("data",e.getClientUrl("download")),e.isInstalledClient(function(t){n.appbutton.html("点击打开手机地图，省90%流量").attr("data",t),n.appbutton.addClass("open"),e.bindHrefStat(n.appbutton,function(){i.addStat(COM_STAT_CODE.TOP_BANNER_APP_OPEN,{os:n.os})})},function(t){n.appbutton.html(o).attr("data",t),e.bindHrefStat(n.appbutton,function(){i.addStat(COM_STAT_CODE.TOP_BANNER_APP_DOWNLOAD,{os:n.os})})},n.appbutton.attr("uid"))),void 0)},_onClose:function(){var n=this;n.hideBanner();var t={domain:location.hostname,path:"/mobile",expires:2592e5};a.set("hdBanner","true",t),i.addStat(COM_STAT_CODE.INDEX_TOP_BANNER_CLICK)},hideBanner:function(){var n=this;n.bannerCon.hide()},showBanner:function(){var n=this;n.bannerCon.show(),i.addStat(COM_STAT_CODE.INDEX_TOP_BANNER_SHOW)},isHideBanner:function(){return this.bannerHide?(localStorage.hbt=Date.now(),!0):localStorage.hbt?Date.now()>Number(localStorage.hbt)+9e5?(localStorage.removeItem("hbt"),!1):!0:!1}}});