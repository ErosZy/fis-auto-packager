define("common:widget/datepicker/datepicker.js",function(t,e){var a=$;!function(t){var e,a,i,n=!1,r=function(){clearTimeout(a),e&&(i=e.attr("highlight-cls"))&&(e.removeClass(i).attr("highlight-cls",""),e=null)};t.extend(t.fn,{highlight:function(i){return n=n||!!t(document).on("touchend.highlight touchmove.highlight touchcancel.highlight",r),r(),this.each(function(){var n=t(this);n.css("-webkit-tap-highlight-color","rgba(255,255,255,0)").off("touchstart.highlight"),i&&n.on("touchstart.highlight",function(){a=setTimeout(function(){e=n.attr("highlight-cls",i).addClass(i)},100)})})}})}(a),function(t,e){function a(e,a){this._el=t(e),this._data=t.extend({date:null,firstDay:1,maxDate:null,minDate:null,container:null,gap:!0},a),i(e,this),this._init()}var i=function(){var t=0,a={},i="dp"+ +new Date;return function(n,r){var s=n[i]||(n[i]=t++);return r!==e&&(r?a[s]=r:delete a[s]),a[s]}}(),n=Array.prototype.slice,r=["01月","02月","03月","04月","05月","06月","07月","08月","09月","10月","11月","12月"],s=["日","一","二","三","四","五","六"],h=/^(\+|\-)?(\d+)(M|Y)$/i,o=function(t,e){return 32-new Date(t,e,32).getDate()},c=function(t,e){return new Date(t,e,1).getDay()};t.datepicker={parseDate:function(t){var e=/^(\d{4})\-(\d{1,2})\-(\d{1,2})$/;return"object"==typeof t?t:e.test(t)?new Date(parseInt(RegExp.$1,10),parseInt(RegExp.$2,10)-1,parseInt(RegExp.$3,10)):null},formatDate:function(e){var a=t.datepicker.formatNumber;return e.getFullYear()+"-"+a(e.getMonth()+1,2)+"-"+a(e.getDate(),2)},formatNumber:function(t,e){for(var a=""+t;a.length<e;)a="0"+a;return a}},t.extend(a.prototype,{root:function(t){return this._el=t||this._el},on:function(e,a){return this.root().on(e,t.proxy(a,this)),this},off:function(t,e){return this.root().off(t,e),this},trigger:function(e,a){e="string"==typeof e?t.Event(e):e;var i,n=this._data,r=n[e.type];return r&&"function"==typeof r&&(e.data=a,i=r.apply(this,[e].concat(a)),i===!1||e.defaultPrevented)?this:(this.root().trigger(e,a),this)},_init:function(){var e=this._data,a=t.proxy(this._eventHandler,this);e._container=this._el,this.date(e.date||new Date).minDate(e.minDate).maxDate(e.maxDate).refresh(),e._container.addClass("ui-datepicker").on("click",a).highlight(),e._isShow=e._inited=!0},_eventHandler:function(e){var a,i,n,r=this,s=r._data,h=s._container;i=e.target,(a=t(i).closest(".ui-datepicker-calendar tbody a",h.get(0)))&&a.length?(e.preventDefault(),n=a.parent(),this.selectedDate(new Date(n.attr("data-year"),n.attr("data-month"),a.text())),this._commit(),this.refresh()):(a=t(i).closest(".ui-datepicker-prev, .ui-datepicker-next",h.get(0)))&&a.length&&(e.preventDefault(),setTimeout(function(){r.goTo((a.is(".ui-datepicker-prev")?"-":"+")+"1M")},0))},_generateHTML:function(){var t,e,a,i,n,h,d,l,u,g,p,f,_=this._data,D="",m=_._drawYear,v=_._drawMonth,k=new Date,w=new Date(k.getFullYear(),k.getMonth(),k.getDate()),y=this.minDate(),x=this.maxDate(),b=this.selectedDate();for(n=parseInt(_.firstDay,10),n=isNaN(n)?0:n,D+='<div class="ui-datepicker-header"><a class="ui-datepicker-prev" href="#">&lt;&lt;</a><div class="ui-datepicker-title">'+_._drawYear+"年"+r[_._drawMonth]+"</div>"+'<a class="ui-datepicker-next" href="#">&gt;&gt;</a>'+"</div>",t="<thead><tr>",a=0;7>a;a++)h=(a+n)%7,t+="<th"+((a+n+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+"<span>"+s[h]+"</span></th>";for(t+="</thead></tr>",e="<tbody>",e+=_.gap?'<tr class="ui-datepicker-gap"><td colspan="7">&#xa0;</td></tr>':"",l=o(m,v),d=(c(m,v)-n+7)%7,u=Math.ceil((d+l)/7),g=new Date(m,v,1-d),a=0;u>a;a++){for(e+="<tr>",i=0;7>i;i++)p=g.getMonth()!==v,f=p||y&&y>g||x&&g>x,e+="<td class='"+((i+n+6)%7>=5?" ui-datepicker-week-end":"")+(p?" ui-datepicker-other-month":"")+(f?" ui-datepicker-unselectable ui-state-disabled":"")+(p||f?"":(g.getTime()===b.getTime()?" ui-datepicker-current-day":"")+(g.getTime()===w.getTime()?" ui-datepicker-today":""))+"'"+(f?"":" data-month='"+g.getMonth()+"' data-year='"+g.getFullYear()+"'")+">"+(p?"&#xa0;":f?"<span class='ui-state-default'>"+g.getDate()+"</span>":"<a class='ui-state-default"+(g.getTime()===w.getTime()?" ui-state-highlight":"")+(g.getTime()===b.getTime()?" ui-state-active":"")+"' href='#'>"+g.getDate()+"</a>")+"</td>",g.setDate(g.getDate()+1);e+="</tr>"}return e+="</tbody>",D+='<table  class="ui-datepicker-calendar">'+t+e+"</table>"},_commit:function(){var e,a=this._data,i=t.datepicker.formatDate(e=this.selectedDate());return a.date=e,a._inited&&this.trigger("valuecommit",[e,i,this]),this},option:function(a,i){var n=this._data;if(i!==e){switch(a){case"minDate":case"maxDate":n[a]=i?t.datepicker.parseDate(i):null;break;case"selectedDate":i=t.datepicker.parseDate(i),n._selectedYear=n._drawYear=i.getFullYear(),n._selectedMonth=n._drawMonth=i.getMonth(),n._selectedDay=i.getDate(),n._inited&&this.trigger("select",[this.selectedDate(),this]);break;case"date":this.option("selectedDate",i);break;case"gap":n[a]=i}return n._invalid=!0,this}return"selectedDate"===a?new Date(n._selectedYear,n._selectedMonth,n._selectedDay):n[a]},maxDate:function(t){return this.option("maxDate",t)},minDate:function(t){return this.option("minDate",t)},date:function(t){return this.option("date",t)},selectedDate:function(t){return this.option("selectedDate",t)},goTo:function(t,e){var a,i,n,r=this._data,s=this.minDate(),o=this.maxDate();return"string"==typeof t&&h.test(t)?(a="-"===RegExp.$1?-parseInt(RegExp.$2,10):parseInt(RegExp.$2,10),i=RegExp.$3.toLowerCase(),t=r._drawMonth+("m"===i?a:0),e=r._drawYear+("y"===i?a:0)):(t=parseInt(t,10),e=parseInt(e,10)),n=new Date(e,t,1),n=s&&s>n?s:o&&n>o?o:n,t=n.getMonth(),e=n.getFullYear(),(t!=r._drawMonth||e!=r._drawYear)&&(this.trigger("changemonthyear",[r._drawMonth=t,r._drawYear=e]),r._invalid=!0,this.refresh()),this},refresh:function(){var e=this._data;if(e._invalid)return t(".ui-datepicker-calendar td:not(.ui-state-disabled), .ui-datepicker-header a",e._container).highlight(),e._container.empty().append(this._generateHTML()),t(".ui-datepicker-calendar td:not(.ui-state-disabled), .ui-datepicker-header a",e._container).highlight("ui-state-hover"),e._invalid=!1,this},destroy:function(){var e=this._data,a=this._eventHandler;t(".ui-datepicker-calendar td:not(.ui-state-disabled)",e._container).highlight(),e._container.off("click",a).remove()}}),t.fn.datepicker=function(r){var s,h,o=n.call(arguments,1);return t.each(this,function(){if(h=i(this)||new a(this,t.isPlainObject(r)?r:null),"string"==typeof r&&r in h){if(s=h[r].apply(h,o),s!==h&&s!==e)return!1;s=e}else if("this"===r)return s=h,!1}),s!==e?s:this}}(a),e=a});