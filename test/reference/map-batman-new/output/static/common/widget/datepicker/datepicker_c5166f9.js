define("common:widget/datepicker/datepicker.js",function(t,e){var a=$;!function(t){var e,a,i,r=!1,n=function(){clearTimeout(a),e&&(i=e.attr("highlight-cls"))&&(e.removeClass(i).attr("highlight-cls",""),e=null)};t.extend(t.fn,{highlight:function(i){return r=r||!!t(document).on("touchend.highlight touchmove.highlight touchcancel.highlight",n),n(),this.each(function(){var r=t(this);r.css("-webkit-tap-highlight-color","rgba(255,255,255,0)").off("touchstart.highlight"),i&&r.on("touchstart.highlight",function(){a=setTimeout(function(){e=r.attr("highlight-cls",i).addClass(i)},100)})})}})}(a),function(t,e){function a(e,a){this._el=t(e),this._data=t.extend({date:null,firstDay:1,maxDate:null,minDate:null,container:null,gap:!0,dateList:[]},a),i(e,this),this._init()}var i=function(){var t=0,a={},i="dp"+ +new Date;return function(r,n){var s=r[i]||(r[i]=t++);return n!==e&&(n?a[s]=n:delete a[s]),a[s]}}(),r=Array.prototype.slice,n=["01月","02月","03月","04月","05月","06月","07月","08月","09月","10月","11月","12月"],s=["日","一","二","三","四","五","六"],h=/^(\+|\-)?(\d+)(M|Y)$/i,c=function(t,e){return 32-new Date(t,e,32).getDate()},o=function(t,e){return new Date(t,e,1).getDay()};t.datepicker={parseDate:function(t){var e=/^(\d{4})\-(\d{1,2})\-(\d{1,2})$/;return"object"==typeof t?t:e.test(t)?new Date(parseInt(RegExp.$1,10),parseInt(RegExp.$2,10)-1,parseInt(RegExp.$3,10)):null},parseDateList:function(e){for(var a=[],i=0;i<e.length;i++)a.push(t.datepicker.parseDate(e[i]));return a},formatDate:function(e){var a=t.datepicker.formatNumber;return e.getFullYear()+"-"+a(e.getMonth()+1,2)+"-"+a(e.getDate(),2)},formatNumber:function(t,e){for(var a=""+t;a.length<e;)a="0"+a;return a}},t.extend(a.prototype,{root:function(t){return this._el=t||this._el},on:function(e,a){return this.root().on(e,t.proxy(a,this)),this},off:function(t,e){return this.root().off(t,e),this},trigger:function(e,a){e="string"==typeof e?t.Event(e):e;var i,r=this._data,n=r[e.type];return n&&"function"==typeof n&&(e.data=a,i=n.apply(this,[e].concat(a)),i===!1||e.defaultPrevented)?this:(this.root().trigger(e,a),this)},_init:function(){var e=this._data,a=t.proxy(this._eventHandler,this);e._container=this._el,this.date(e.date||new Date).minDate(e.minDate).maxDate(e.maxDate).dateList(e.dateList).refresh(),e._container.addClass("ui-datepicker").on("click",a).highlight(),e._isShow=e._inited=!0},_eventHandler:function(e){var a,i,r,n=this,s=n._data,h=s._container;i=e.target,(a=t(i).closest(".ui-datepicker-calendar tbody a",h.get(0)))&&a.length?(e.preventDefault(),r=a.parent(),this.selectedDate(new Date(r.attr("data-year"),r.attr("data-month"),a.text())),this._commit(),this.refresh()):(a=t(i).closest(".ui-datepicker-prev, .ui-datepicker-next",h.get(0)))&&a.length&&(e.preventDefault(),setTimeout(function(){n.goTo((a.is(".ui-datepicker-prev")?"-":"+")+"1M")},0))},_checkUnSelectable:function(t){var e,a=this.minDate(),i=this.maxDate(),r=this.dateList();if(r.length){for(var n=0;n<r.length;n++)if(e=t-r[n],!e)return!1;return!0}return a&&a>t||i&&t>i},_generateHTML:function(){var t,e,a,i,r,h,d,u,l,g,p,f,D=this._data,_="",m=D._drawYear,v=D._drawMonth,k=new Date,w=new Date(k.getFullYear(),k.getMonth(),k.getDate()),y=(this.minDate(),this.maxDate(),this.selectedDate());for(r=parseInt(D.firstDay,10),r=isNaN(r)?0:r,_+='<div class="ui-datepicker-header"><a class="ui-datepicker-prev" href="#">&lt;&lt;</a><div class="ui-datepicker-title">'+D._drawYear+"年"+n[D._drawMonth]+'</div><a class="ui-datepicker-next" href="#">&gt;&gt;</a></div>',t="<thead><tr>",a=0;7>a;a++)h=(a+r)%7,t+="<th"+((a+r+6)%7>=5?' class="ui-datepicker-week-end"':"")+"><span>"+s[h]+"</span></th>";for(t+="</thead></tr>",e="<tbody>",e+=D.gap?'<tr class="ui-datepicker-gap"><td colspan="7">&#xa0;</td></tr>':"",u=c(m,v),d=(o(m,v)-r+7)%7,l=Math.ceil((d+u)/7),g=new Date(m,v,1-d),a=0;l>a;a++){for(e+="<tr>",i=0;7>i;i++)p=g.getMonth()!==v,f=p||this._checkUnSelectable(g),e+="<td class='"+((i+r+6)%7>=5?" ui-datepicker-week-end":"")+(p?" ui-datepicker-other-month":"")+(f?" ui-datepicker-unselectable ui-state-disabled":"")+(p||f?"":(g.getTime()===y.getTime()?" ui-datepicker-current-day":"")+(g.getTime()===w.getTime()?" ui-datepicker-today":""))+"'"+(f?"":" data-month='"+g.getMonth()+"' data-year='"+g.getFullYear()+"'")+">"+(p?"&#xa0;":f?"<span class='ui-state-default'>"+g.getDate()+"</span>":"<a class='ui-state-default"+(g.getTime()===w.getTime()?" ui-state-highlight":"")+(g.getTime()===y.getTime()?" ui-state-active":"")+"' href='#'>"+g.getDate()+"</a>")+"</td>",g.setDate(g.getDate()+1);e+="</tr>"}return e+="</tbody>",_+='<table  class="ui-datepicker-calendar">'+t+e+"</table>"},_commit:function(){var e,a=this._data,i=t.datepicker.formatDate(e=this.selectedDate());return a.date=e,a._inited&&this.trigger("valuecommit",[e,i,this]),this},option:function(a,i){var r=this._data;if(i!==e){switch(a){case"minDate":case"maxDate":r[a]=i?t.datepicker.parseDate(i):null;break;case"selectedDate":i=t.datepicker.parseDate(i),r._selectedYear=r._drawYear=i.getFullYear(),r._selectedMonth=r._drawMonth=i.getMonth(),r._selectedDay=i.getDate(),r._inited&&this.trigger("select",[this.selectedDate(),this]);break;case"date":this.option("selectedDate",i);break;case"dateList":r[a]=i?t.datepicker.parseDateList(i):[];break;case"gap":r[a]=i}return r._invalid=!0,this}return"selectedDate"===a?new Date(r._selectedYear,r._selectedMonth,r._selectedDay):r[a]},maxDate:function(t){return this.option("maxDate",t)},minDate:function(t){return this.option("minDate",t)},date:function(t){return this.option("date",t)},selectedDate:function(t){return this.option("selectedDate",t)},dateList:function(t){return this.option("dateList",t)},goTo:function(t,e){var a,i,r,n=this._data,s=this.minDate(),c=this.maxDate();return"string"==typeof t&&h.test(t)?(a="-"===RegExp.$1?-parseInt(RegExp.$2,10):parseInt(RegExp.$2,10),i=RegExp.$3.toLowerCase(),t=n._drawMonth+("m"===i?a:0),e=n._drawYear+("y"===i?a:0)):(t=parseInt(t,10),e=parseInt(e,10)),r=new Date(e,t,1),r=s&&s>r?s:c&&r>c?c:r,t=r.getMonth(),e=r.getFullYear(),(t!=n._drawMonth||e!=n._drawYear)&&(this.trigger("changemonthyear",[n._drawMonth=t,n._drawYear=e]),n._invalid=!0,this.refresh()),this},refresh:function(){var e=this._data;if(e._invalid)return t(".ui-datepicker-calendar td:not(.ui-state-disabled), .ui-datepicker-header a",e._container).highlight(),e._container.empty().append(this._generateHTML()),t(".ui-datepicker-calendar td:not(.ui-state-disabled), .ui-datepicker-header a",e._container).highlight("ui-state-hover"),e._invalid=!1,this},destroy:function(){var e=this._data,a=this._eventHandler;t(".ui-datepicker-calendar td:not(.ui-state-disabled)",e._container).highlight(),e._container.off("click",a).remove()}}),t.fn.datepicker=function(n){var s,h,c=r.call(arguments,1);return t.each(this,function(){if(h=i(this)||new a(this,t.isPlainObject(n)?n:null),"string"==typeof n&&n in h){if(s=h[n].apply(h,c),s!==h&&s!==e)return!1;s=e}else if("this"===n)return s=h,!1}),s!==e?s:this}}(a),e=a});