define("common:widget/url/url.js",function(e,t,a){var r=e("common:static/js/util.js"),o="_lastPageUrl";a.exports={host:"http://"+location.host,update:function(e,t){var a,r=t||{},o=this._get(e,r),n=window.location.pathname;o!==n&&(a=this.host+o,this.navigate(a,t))},navigate:function(e,t){if("string"==typeof e){var a=window.location.pathname,r=t||{};if(r.trigger=r.trigger===!1?!1:!0,r.replace===!0&&r.storageKey!==!1){try{window.localStorage.setItem(o,a)}catch(n){}appPage.redirect(e,r)}else appPage.redirect(e,r)}},get:function(){var e=window.location.pathname.slice(1),t=e.split("/"),a=t[0],o=t[1],n=t[2],i=t[3],c=t[4],p=t[5]||"",s={seachbox:function(e){var t={place:function(e){var t=p.split("from=place&"+e+"=");p="from=place&"+e+"="+encodeURIComponent(t[1])},loc:function(e){var t=p.split(e+"=");p=e+"="+encodeURIComponent(t[1])}};e&&t[e[1]](e[0])}};if(!/%3d|%26/gi.test(p)&&p.indexOf("=")>-1){var l={DictionaryName:"seachbox",DictionaryData:""},d=!/^(from=place&start=word%3d|from=place&end=word%3d)/gi.test(p),u=!/^(start=word%3d|end=word%3d)/gi.test(p);if(d||u){if(-1!==p.indexOf("start")){var f=/^start=word=/gi.test(p);!f&&d&&(l.DictionaryData=["start","place"]),f&&u&&(l.DictionaryData=["start","loc"])}else if(-1!==p.indexOf("end")){var g=/^end=word=/gi.test(p);!g&&d&&(l.DictionaryData=["end","place"]),g&&u&&(l.DictionaryData=["end","loc"])}s[l.DictionaryName](l.DictionaryData)}p.indexOf("refer_query")>-1&&p.indexOf("refer_pagestate")>-1&&(p="refer_query="+encodeURIComponent(p.match(/refer_query=(.*?)($|&refer_pagestate)/)[1])+"&refer_pagestate="+encodeURIComponent(p.match(/refer_pagestate=(.*?)($|&list_type)/)[1]))}return{product:a,style:o,module:n,action:i,query:r.urlToJSON(c||""),pageState:r.urlToJSON(p||"")}},toIndex:function(e){var e=$.extend({queryReplace:!0,pageStateReplace:!0},e);this.update({module:"index",action:"index"},e)},_get:function(e,t){var a=window.location.pathname.slice(1),o=a.split("/"),n=o[0]||"mobile",i=o[1]||"webapp",c=o[2]||"index",p=o[3]||"index",s=o[4]||"foo=bar",l=o[5]||"",d=t&&t.queryReplace||!1,u=t&&t.pageStateReplace||!1,f=[];if(f.push(e.product||n),f.push(e.style||i),f.push(e.module||c),f.push(e.action||p),d)e.query&&f.push(r.jsonToUrl(e.query));else{var g=r.urlToJSON(s);e.query=e.query||{};for(var y in e.query)""!==e.query[y]?g[y]=e.query[y]:delete g[y];f.push(r.jsonToUrl(g))}if(u)e.pageState&&f.push(r.jsonToUrl(e.pageState));else{e.pageState=e.pageState||{};var h=r.urlToJSON(l);for(var y in e.pageState)""!==e.pageState[y]?h[y]=e.pageState[y]:delete h[y];f.push(r.jsonToUrl(h))}return"/"+f.join("/")}}});