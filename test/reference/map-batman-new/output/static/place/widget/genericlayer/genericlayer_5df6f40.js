define("place:widget/genericlayer/genericlayer.js",function(t,e,a){function o(t){BMap.TileLayer.call(this,t),this._opts={},t=t||{},this._opts=$.extend(this._opts,t)}var i=t("common:widget/geolocation/location.js");o.prototype=new BMap.TileLayer,o.prototype.initialize=function(t,e){BMap.TileLayer.prototype.initialize.call(this,t,e),this._map=t},o.prototype.getTilesUrl=function(t,e){var a=this,o=t.y,n=t.x,s=["http://gss0.map.baidu.com","http://gss1.map.baidu.com","http://gss2.map.baidu.com","http://gss3.map.baidu.com"],p=Math.abs(n+o)%s.length,r=s[p]+"/?qt=bkg_png&c="+i.getCityCode()+"&ie=utf-8";r+=window.placeParam?"&wd="+encodeURIComponent(a._opts.json.result.return_query)+window.placeParam:"&wd="+encodeURIComponent(a._opts.json.result.return_query),r+="&rn=4",this._map.highResolutionEnabled()&&(r+="&imgtype=hdpi"),i.hasExactPoi()&&(r+="&center_rank=1",r+="&nb_x="+i.getPointX(),r+="&nb_y="+i.getPointY());var l=this._map.getBounds(),c=l.getSouthWest().lng,g=l.getSouthWest().lat,h=l.getNorthEast().lng,m=l.getNorthEast().lat,u=escape("(")+c+","+g+";"+h+","+m+escape(")");return r+="&l="+e+"&xy="+n+"_"+o+"&b="+u+"&t="+(new Date).getTime()},o._className_="MDLayer",a.exports=o});